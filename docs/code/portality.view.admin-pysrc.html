<?xml version="1.0" encoding="ascii"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
          "DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>portality.view.admin</title>
  <link rel="stylesheet" href="epydoc.css" type="text/css" />
  <script type="text/javascript" src="epydoc.js"></script>
</head>

<body bgcolor="white" text="black" link="blue" vlink="#204080"
      alink="#204080">
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="portality-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="https://github.com/DOAJ/doaj">DOAJ</a></th>
          </tr></table></th>
  </tr>
</table>
<table width="100%" cellpadding="0" cellspacing="0">
  <tr valign="top">
    <td width="100%">
      <span class="breadcrumbs">
        <a href="portality-module.html">Package&nbsp;portality</a> ::
        <a href="portality.view-module.html">Package&nbsp;view</a> ::
        Module&nbsp;admin
      </span>
    </td>
    <td>
      <table cellpadding="0" cellspacing="0">
        <!-- hide/show private -->
        <tr><td align="right"><span class="options">[<a href="javascript:void(0);" class="privatelink"
    onclick="toggle_private();">hide&nbsp;private</a>]</span></td></tr>
        <tr><td align="right"><span class="options"
            >[<a href="frames.html" target="_top">frames</a
            >]&nbsp;|&nbsp;<a href="portality.view.admin-pysrc.html"
            target="_top">no&nbsp;frames</a>]</span></td></tr>
      </table>
    </td>
  </tr>
</table>
<h1 class="epydoc">Source Code for <a href="portality.view.admin-module.html">Module portality.view.admin</a></h1>
<pre class="py-src">
<a name="L1"></a><tt class="py-lineno">  1</tt>  <tt class="py-line"><tt class="py-keyword">import</tt> <tt id="link-0" class="py-name" targets="Method portality.dao.DomainObject.json()=portality.dao.DomainObject-class.html#json,Method portality.lib.dataobj.DataObj.json()=portality.lib.dataobj.DataObj-class.html#json"><a title="portality.dao.DomainObject.json
portality.lib.dataobj.DataObj.json" class="py-name" href="#" onclick="return doclink('link-0', 'json', 'link-0');">json</a></tt> </tt>
<a name="L2"></a><tt class="py-lineno">  2</tt>  <tt class="py-line"> </tt>
<a name="L3"></a><tt class="py-lineno">  3</tt>  <tt class="py-line"><tt class="py-keyword">from</tt> <tt class="py-name">flask</tt> <tt class="py-keyword">import</tt> <tt class="py-name">Blueprint</tt><tt class="py-op">,</tt> <tt class="py-name">request</tt><tt class="py-op">,</tt> <tt class="py-name">flash</tt><tt class="py-op">,</tt> <tt id="link-1" class="py-name" targets="Function portality.scripts.sync_doaj_records.abort()=portality.scripts.sync_doaj_records-module.html#abort"><a title="portality.scripts.sync_doaj_records.abort" class="py-name" href="#" onclick="return doclink('link-1', 'abort', 'link-1');">abort</a></tt><tt class="py-op">,</tt> <tt class="py-name">make_response</tt> </tt>
<a name="L4"></a><tt class="py-lineno">  4</tt>  <tt class="py-line"><tt class="py-keyword">from</tt> <tt class="py-name">flask</tt> <tt class="py-keyword">import</tt> <tt id="link-2" class="py-name" targets="Method portality.formcontext.formcontext.AssEdApplicationReview.render_template()=portality.formcontext.formcontext.AssEdApplicationReview-class.html#render_template,Method portality.formcontext.formcontext.AssEdJournalReview.render_template()=portality.formcontext.formcontext.AssEdJournalReview-class.html#render_template,Method portality.formcontext.formcontext.EditorApplicationReview.render_template()=portality.formcontext.formcontext.EditorApplicationReview-class.html#render_template,Method portality.formcontext.formcontext.EditorJournalReview.render_template()=portality.formcontext.formcontext.EditorJournalReview-class.html#render_template,Method portality.formcontext.formcontext.FormContext.render_template()=portality.formcontext.formcontext.FormContext-class.html#render_template,Method portality.formcontext.formcontext.ManEdApplicationReview.render_template()=portality.formcontext.formcontext.ManEdApplicationReview-class.html#render_template,Method portality.formcontext.formcontext.ManEdJournalReview.render_template()=portality.formcontext.formcontext.ManEdJournalReview-class.html#render_template,Method portality.formcontext.formcontext.PublisherCsvReApplication.render_template()=portality.formcontext.formcontext.PublisherCsvReApplication-class.html#render_template,Method portality.formcontext.formcontext.PublisherReApplication.render_template()=portality.formcontext.formcontext.PublisherReApplication-class.html#render_template,Method portality.formcontext.formcontext.ReadOnlyJournal.render_template()=portality.formcontext.formcontext.ReadOnlyJournal-class.html#render_template"><a title="portality.formcontext.formcontext.AssEdApplicationReview.render_template
portality.formcontext.formcontext.AssEdJournalReview.render_template
portality.formcontext.formcontext.EditorApplicationReview.render_template
portality.formcontext.formcontext.EditorJournalReview.render_template
portality.formcontext.formcontext.FormContext.render_template
portality.formcontext.formcontext.ManEdApplicationReview.render_template
portality.formcontext.formcontext.ManEdJournalReview.render_template
portality.formcontext.formcontext.PublisherCsvReApplication.render_template
portality.formcontext.formcontext.PublisherReApplication.render_template
portality.formcontext.formcontext.ReadOnlyJournal.render_template" class="py-name" href="#" onclick="return doclink('link-2', 'render_template', 'link-2');">render_template</a></tt><tt class="py-op">,</tt> <tt id="link-3" class="py-name" targets="Method portality.view.account.RedirectForm.redirect()=portality.view.account.RedirectForm-class.html#redirect"><a title="portality.view.account.RedirectForm.redirect" class="py-name" href="#" onclick="return doclink('link-3', 'redirect', 'link-3');">redirect</a></tt><tt class="py-op">,</tt> <tt class="py-name">url_for</tt> </tt>
<a name="L5"></a><tt class="py-lineno">  5</tt>  <tt class="py-line"><tt class="py-keyword">from</tt> <tt class="py-name">flask</tt><tt class="py-op">.</tt><tt class="py-name">ext</tt><tt class="py-op">.</tt><tt id="link-4" class="py-name" targets="Function portality.view.account.login()=portality.view.account-module.html#login"><a title="portality.view.account.login" class="py-name" href="#" onclick="return doclink('link-4', 'login', 'link-4');">login</a></tt> <tt class="py-keyword">import</tt> <tt class="py-name">current_user</tt><tt class="py-op">,</tt> <tt class="py-name">login_required</tt> </tt>
<a name="L6"></a><tt class="py-lineno">  6</tt>  <tt class="py-line"> </tt>
<a name="L7"></a><tt class="py-lineno">  7</tt>  <tt class="py-line"><tt class="py-keyword">from</tt> <tt id="link-5" class="py-name" targets="Package portality=portality-module.html"><a title="portality" class="py-name" href="#" onclick="return doclink('link-5', 'portality', 'link-5');">portality</a></tt><tt class="py-op">.</tt><tt id="link-6" class="py-name" targets="Module portality.decorators=portality.decorators-module.html"><a title="portality.decorators" class="py-name" href="#" onclick="return doclink('link-6', 'decorators', 'link-6');">decorators</a></tt> <tt class="py-keyword">import</tt> <tt id="link-7" class="py-name" targets="Function portality.decorators.ssl_required()=portality.decorators-module.html#ssl_required"><a title="portality.decorators.ssl_required" class="py-name" href="#" onclick="return doclink('link-7', 'ssl_required', 'link-7');">ssl_required</a></tt><tt class="py-op">,</tt> <tt id="link-8" class="py-name" targets="Function portality.decorators.restrict_to_role()=portality.decorators-module.html#restrict_to_role"><a title="portality.decorators.restrict_to_role" class="py-name" href="#" onclick="return doclink('link-8', 'restrict_to_role', 'link-8');">restrict_to_role</a></tt><tt class="py-op">,</tt> <tt id="link-9" class="py-name" targets="Function portality.decorators.write_required()=portality.decorators-module.html#write_required"><a title="portality.decorators.write_required" class="py-name" href="#" onclick="return doclink('link-9', 'write_required', 'link-9');">write_required</a></tt> </tt>
<a name="L8"></a><tt class="py-lineno">  8</tt>  <tt class="py-line"><tt class="py-keyword">import</tt> <tt id="link-10" class="py-name"><a title="portality" class="py-name" href="#" onclick="return doclink('link-10', 'portality', 'link-5');">portality</a></tt><tt class="py-op">.</tt><tt id="link-11" class="py-name" targets="Package portality.models=portality.models-module.html"><a title="portality.models" class="py-name" href="#" onclick="return doclink('link-11', 'models', 'link-11');">models</a></tt> <tt class="py-keyword">as</tt> <tt id="link-12" class="py-name"><a title="portality.models" class="py-name" href="#" onclick="return doclink('link-12', 'models', 'link-11');">models</a></tt> </tt>
<a name="L9"></a><tt class="py-lineno">  9</tt>  <tt class="py-line"><tt class="py-keyword">from</tt> <tt id="link-13" class="py-name"><a title="portality" class="py-name" href="#" onclick="return doclink('link-13', 'portality', 'link-5');">portality</a></tt><tt class="py-op">.</tt><tt id="link-14" class="py-name" targets="Package portality.formcontext=portality.formcontext-module.html,Module portality.formcontext.formcontext=portality.formcontext.formcontext-module.html"><a title="portality.formcontext
portality.formcontext.formcontext" class="py-name" href="#" onclick="return doclink('link-14', 'formcontext', 'link-14');">formcontext</a></tt> <tt class="py-keyword">import</tt> <tt id="link-15" class="py-name"><a title="portality.formcontext
portality.formcontext.formcontext" class="py-name" href="#" onclick="return doclink('link-15', 'formcontext', 'link-14');">formcontext</a></tt> </tt>
<a name="L10"></a><tt class="py-lineno"> 10</tt>  <tt class="py-line"><tt class="py-keyword">from</tt> <tt id="link-16" class="py-name"><a title="portality" class="py-name" href="#" onclick="return doclink('link-16', 'portality', 'link-5');">portality</a></tt> <tt class="py-keyword">import</tt> <tt id="link-17" class="py-name" targets="Module portality.lock=portality.lock-module.html,Function portality.lock.lock()=portality.lock-module.html#lock,Module portality.models.lock=portality.models.lock-module.html"><a title="portality.lock
portality.lock.lock
portality.models.lock" class="py-name" href="#" onclick="return doclink('link-17', 'lock', 'link-17');">lock</a></tt> </tt>
<a name="L11"></a><tt class="py-lineno"> 11</tt>  <tt class="py-line"><tt class="py-keyword">from</tt> <tt id="link-18" class="py-name"><a title="portality" class="py-name" href="#" onclick="return doclink('link-18', 'portality', 'link-5');">portality</a></tt><tt class="py-op">.</tt><tt id="link-19" class="py-name" targets="Module portality.util=portality.util-module.html"><a title="portality.util" class="py-name" href="#" onclick="return doclink('link-19', 'util', 'link-19');">util</a></tt> <tt class="py-keyword">import</tt> <tt id="link-20" class="py-name" targets="Function portality.util.flash_with_url()=portality.util-module.html#flash_with_url"><a title="portality.util.flash_with_url" class="py-name" href="#" onclick="return doclink('link-20', 'flash_with_url', 'link-20');">flash_with_url</a></tt><tt class="py-op">,</tt> <tt id="link-21" class="py-name" targets="Function portality.util.jsonp()=portality.util-module.html#jsonp"><a title="portality.util.jsonp" class="py-name" href="#" onclick="return doclink('link-21', 'jsonp', 'link-21');">jsonp</a></tt> </tt>
<a name="L12"></a><tt class="py-lineno"> 12</tt>  <tt class="py-line"><tt class="py-keyword">from</tt> <tt id="link-22" class="py-name"><a title="portality" class="py-name" href="#" onclick="return doclink('link-22', 'portality', 'link-5');">portality</a></tt><tt class="py-op">.</tt><tt id="link-23" class="py-name" targets="Module portality.core=portality.core-module.html"><a title="portality.core" class="py-name" href="#" onclick="return doclink('link-23', 'core', 'link-23');">core</a></tt> <tt class="py-keyword">import</tt> <tt id="link-24" class="py-name" targets="Module portality.app=portality.app-module.html,Variable portality.core.app=portality.core-module.html#app"><a title="portality.app
portality.core.app" class="py-name" href="#" onclick="return doclink('link-24', 'app', 'link-24');">app</a></tt> </tt>
<a name="L13"></a><tt class="py-lineno"> 13</tt>  <tt class="py-line"> </tt>
<a name="L14"></a><tt class="py-lineno"> 14</tt>  <tt class="py-line"><tt class="py-keyword">from</tt> <tt id="link-25" class="py-name"><a title="portality" class="py-name" href="#" onclick="return doclink('link-25', 'portality', 'link-5');">portality</a></tt><tt class="py-op">.</tt><tt id="link-26" class="py-name" targets="Package portality.view=portality.view-module.html"><a title="portality.view" class="py-name" href="#" onclick="return doclink('link-26', 'view', 'link-26');">view</a></tt><tt class="py-op">.</tt><tt id="link-27" class="py-name" targets="Module portality.formcontext.forms=portality.formcontext.forms-module.html,Module portality.view.forms=portality.view.forms-module.html"><a title="portality.formcontext.forms
portality.view.forms" class="py-name" href="#" onclick="return doclink('link-27', 'forms', 'link-27');">forms</a></tt> <tt class="py-keyword">import</tt> <tt id="link-28" class="py-name" targets="Class portality.view.forms.EditorGroupForm=portality.view.forms.EditorGroupForm-class.html"><a title="portality.view.forms.EditorGroupForm" class="py-name" href="#" onclick="return doclink('link-28', 'EditorGroupForm', 'link-28');">EditorGroupForm</a></tt><tt class="py-op">,</tt> <tt id="link-29" class="py-name" targets="Class portality.view.forms.MakeContinuation=portality.view.forms.MakeContinuation-class.html"><a title="portality.view.forms.MakeContinuation" class="py-name" href="#" onclick="return doclink('link-29', 'MakeContinuation', 'link-29');">MakeContinuation</a></tt> </tt>
<a name="L15"></a><tt class="py-lineno"> 15</tt>  <tt class="py-line"> </tt>
<a name="L16"></a><tt class="py-lineno"> 16</tt>  <tt class="py-line"><tt id="link-30" class="py-name" targets="Variable portality.view.account.blueprint=portality.view.account-module.html#blueprint,Variable portality.view.admin.blueprint=portality.view.admin-module.html#blueprint,Variable portality.view.api_v1.blueprint=portality.view.api_v1-module.html#blueprint,Variable portality.view.atom.blueprint=portality.view.atom-module.html#blueprint,Variable portality.view.doaj.blueprint=portality.view.doaj-module.html#blueprint,Variable portality.view.doajservices.blueprint=portality.view.doajservices-module.html#blueprint,Variable portality.view.editor.blueprint=portality.view.editor-module.html#blueprint,Variable portality.view.hooks.blueprint=portality.view.hooks-module.html#blueprint,Variable portality.view.media.blueprint=portality.view.media-module.html#blueprint,Variable portality.view.oaipmh.blueprint=portality.view.oaipmh-module.html#blueprint,Variable portality.view.openurl.blueprint=portality.view.openurl-module.html#blueprint,Variable portality.view.publisher.blueprint=portality.view.publisher-module.html#blueprint,Variable portality.view.query.blueprint=portality.view.query-module.html#blueprint,Variable portality.view.stream.blueprint=portality.view.stream-module.html#blueprint"><a title="portality.view.account.blueprint
portality.view.admin.blueprint
portality.view.api_v1.blueprint
portality.view.atom.blueprint
portality.view.doaj.blueprint
portality.view.doajservices.blueprint
portality.view.editor.blueprint
portality.view.hooks.blueprint
portality.view.media.blueprint
portality.view.oaipmh.blueprint
portality.view.openurl.blueprint
portality.view.publisher.blueprint
portality.view.query.blueprint
portality.view.stream.blueprint" class="py-name" href="#" onclick="return doclink('link-30', 'blueprint', 'link-30');">blueprint</a></tt> <tt class="py-op">=</tt> <tt class="py-name">Blueprint</tt><tt class="py-op">(</tt><tt class="py-string">'admin'</tt><tt class="py-op">,</tt> <tt class="py-name">__name__</tt><tt class="py-op">)</tt> </tt>
<a name="restrict"></a><div id="restrict-def"><a name="L17"></a><tt class="py-lineno"> 17</tt>  <tt class="py-line"> </tt>
<a name="L18"></a><tt class="py-lineno"> 18</tt>  <tt class="py-line"><tt class="py-comment"># restrict everything in admin to logged in users with the "admin" role</tt> </tt>
<a name="L19"></a><tt class="py-lineno"> 19</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">blueprint</tt><tt class="py-op">.</tt><tt class="py-name">before_request</tt> </tt>
<a name="L20"></a><tt class="py-lineno"> 20</tt> <a class="py-toggle" href="#" id="restrict-toggle" onclick="return toggle('restrict');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="portality.view.admin-module.html#restrict">restrict</a><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="restrict-collapsed" style="display:none;" pad="+++" indent="++++"></div><div id="restrict-expanded"><a name="L21"></a><tt class="py-lineno"> 21</tt>  <tt class="py-line">    <tt class="py-keyword">return</tt> <tt id="link-31" class="py-name"><a title="portality.decorators.restrict_to_role" class="py-name" href="#" onclick="return doclink('link-31', 'restrict_to_role', 'link-8');">restrict_to_role</a></tt><tt class="py-op">(</tt><tt class="py-string">'admin'</tt><tt class="py-op">)</tt> </tt>
</div><a name="L22"></a><tt class="py-lineno"> 22</tt>  <tt class="py-line"> </tt>
<a name="index"></a><div id="index-def"><a name="L23"></a><tt class="py-lineno"> 23</tt>  <tt class="py-line"><tt class="py-comment"># build an admin page where things can be done</tt> </tt>
<a name="L24"></a><tt class="py-lineno"> 24</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">blueprint</tt><tt class="py-op">.</tt><tt class="py-name">route</tt><tt class="py-op">(</tt><tt class="py-string">'/'</tt><tt class="py-op">)</tt> </tt>
<a name="L25"></a><tt class="py-lineno"> 25</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">login_required</tt> </tt>
<a name="L26"></a><tt class="py-lineno"> 26</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">ssl_required</tt> </tt>
<a name="L27"></a><tt class="py-lineno"> 27</tt> <a class="py-toggle" href="#" id="index-toggle" onclick="return toggle('index');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="portality.view.admin-module.html#index">index</a><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="index-collapsed" style="display:none;" pad="+++" indent="++++"></div><div id="index-expanded"><a name="L28"></a><tt class="py-lineno"> 28</tt>  <tt class="py-line">    <tt class="py-keyword">return</tt> <tt id="link-32" class="py-name"><a title="portality.formcontext.formcontext.AssEdApplicationReview.render_template
portality.formcontext.formcontext.AssEdJournalReview.render_template
portality.formcontext.formcontext.EditorApplicationReview.render_template
portality.formcontext.formcontext.EditorJournalReview.render_template
portality.formcontext.formcontext.FormContext.render_template
portality.formcontext.formcontext.ManEdApplicationReview.render_template
portality.formcontext.formcontext.ManEdJournalReview.render_template
portality.formcontext.formcontext.PublisherCsvReApplication.render_template
portality.formcontext.formcontext.PublisherReApplication.render_template
portality.formcontext.formcontext.ReadOnlyJournal.render_template" class="py-name" href="#" onclick="return doclink('link-32', 'render_template', 'link-2');">render_template</a></tt><tt class="py-op">(</tt><tt class="py-string">'admin/index.html'</tt><tt class="py-op">,</tt> <tt class="py-name">admin_page</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">)</tt> </tt>
</div><a name="L29"></a><tt class="py-lineno"> 29</tt>  <tt class="py-line"> </tt>
<a name="journals"></a><div id="journals-def"><a name="L30"></a><tt class="py-lineno"> 30</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">blueprint</tt><tt class="py-op">.</tt><tt class="py-name">route</tt><tt class="py-op">(</tt><tt class="py-string">"/journals"</tt><tt class="py-op">,</tt> <tt class="py-name">methods</tt><tt class="py-op">=</tt><tt class="py-op">[</tt><tt class="py-string">"GET"</tt><tt class="py-op">]</tt><tt class="py-op">)</tt> </tt>
<a name="L31"></a><tt class="py-lineno"> 31</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">login_required</tt> </tt>
<a name="L32"></a><tt class="py-lineno"> 32</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">ssl_required</tt> </tt>
<a name="L33"></a><tt class="py-lineno"> 33</tt> <a class="py-toggle" href="#" id="journals-toggle" onclick="return toggle('journals');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="portality.view.admin-module.html#journals">journals</a><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="journals-collapsed" style="display:none;" pad="+++" indent="++++"></div><div id="journals-expanded"><a name="L34"></a><tt class="py-lineno"> 34</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-keyword">not</tt> <tt class="py-name">current_user</tt><tt class="py-op">.</tt><tt id="link-33" class="py-name" targets="Class Method portality.authorise.Authorise.has_role()=portality.authorise.Authorise-class.html#has_role,Method portality.models.account.Account.has_role()=portality.models.account.Account-class.html#has_role"><a title="portality.authorise.Authorise.has_role
portality.models.account.Account.has_role" class="py-name" href="#" onclick="return doclink('link-33', 'has_role', 'link-33');">has_role</a></tt><tt class="py-op">(</tt><tt class="py-string">"admin_journals"</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L35"></a><tt class="py-lineno"> 35</tt>  <tt class="py-line">        <tt id="link-34" class="py-name"><a title="portality.scripts.sync_doaj_records.abort" class="py-name" href="#" onclick="return doclink('link-34', 'abort', 'link-1');">abort</a></tt><tt class="py-op">(</tt><tt class="py-number">401</tt><tt class="py-op">)</tt> </tt>
<a name="L36"></a><tt class="py-lineno"> 36</tt>  <tt class="py-line">    <tt class="py-keyword">return</tt> <tt id="link-35" class="py-name"><a title="portality.formcontext.formcontext.AssEdApplicationReview.render_template
portality.formcontext.formcontext.AssEdJournalReview.render_template
portality.formcontext.formcontext.EditorApplicationReview.render_template
portality.formcontext.formcontext.EditorJournalReview.render_template
portality.formcontext.formcontext.FormContext.render_template
portality.formcontext.formcontext.ManEdApplicationReview.render_template
portality.formcontext.formcontext.ManEdJournalReview.render_template
portality.formcontext.formcontext.PublisherCsvReApplication.render_template
portality.formcontext.formcontext.PublisherReApplication.render_template
portality.formcontext.formcontext.ReadOnlyJournal.render_template" class="py-name" href="#" onclick="return doclink('link-35', 'render_template', 'link-2');">render_template</a></tt><tt class="py-op">(</tt><tt class="py-string">'admin/journals.html'</tt><tt class="py-op">,</tt> </tt>
<a name="L37"></a><tt class="py-lineno"> 37</tt>  <tt class="py-line">               <tt class="py-name">search_page</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">,</tt> </tt>
<a name="L38"></a><tt class="py-lineno"> 38</tt>  <tt class="py-line">               <tt class="py-name">facetviews</tt><tt class="py-op">=</tt><tt class="py-op">[</tt><tt class="py-string">'admin.journals.facetview'</tt><tt class="py-op">]</tt><tt class="py-op">,</tt> </tt>
<a name="L39"></a><tt class="py-lineno"> 39</tt>  <tt class="py-line">               <tt class="py-name">admin_page</tt><tt class="py-op">=</tt><tt class="py-name">True</tt> </tt>
<a name="L40"></a><tt class="py-lineno"> 40</tt>  <tt class="py-line">           <tt class="py-op">)</tt> </tt>
</div><a name="L41"></a><tt class="py-lineno"> 41</tt>  <tt class="py-line"> </tt>
<a name="journals_list"></a><div id="journals_list-def"><a name="L42"></a><tt class="py-lineno"> 42</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">blueprint</tt><tt class="py-op">.</tt><tt class="py-name">route</tt><tt class="py-op">(</tt><tt class="py-string">"/journals"</tt><tt class="py-op">,</tt> <tt class="py-name">methods</tt><tt class="py-op">=</tt><tt class="py-op">[</tt><tt class="py-string">"POST"</tt><tt class="py-op">,</tt> <tt class="py-string">"DELETE"</tt><tt class="py-op">]</tt><tt class="py-op">)</tt> </tt>
<a name="L43"></a><tt class="py-lineno"> 43</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">login_required</tt> </tt>
<a name="L44"></a><tt class="py-lineno"> 44</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">ssl_required</tt> </tt>
<a name="L45"></a><tt class="py-lineno"> 45</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">write_required</tt> </tt>
<a name="L46"></a><tt class="py-lineno"> 46</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">jsonp</tt> </tt>
<a name="L47"></a><tt class="py-lineno"> 47</tt> <a class="py-toggle" href="#" id="journals_list-toggle" onclick="return toggle('journals_list');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="portality.view.admin-module.html#journals_list">journals_list</a><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="journals_list-collapsed" style="display:none;" pad="+++" indent="++++"></div><div id="journals_list-expanded"><a name="L48"></a><tt class="py-lineno"> 48</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">request</tt><tt class="py-op">.</tt><tt class="py-name">method</tt> <tt class="py-op">==</tt> <tt class="py-string">"POST"</tt><tt class="py-op">:</tt> </tt>
<a name="L49"></a><tt class="py-lineno"> 49</tt>  <tt class="py-line">        <tt class="py-keyword">try</tt><tt class="py-op">:</tt> </tt>
<a name="L50"></a><tt class="py-lineno"> 50</tt>  <tt class="py-line">            <tt id="link-36" class="py-name" targets="Method portality.api.v1.discovery.ApplicationQuery.query()=portality.api.v1.discovery.ApplicationQuery-class.html#query,Method portality.api.v1.discovery.SearchQuery.query()=portality.api.v1.discovery.SearchQuery-class.html#query,Method portality.blog.NewsQuery.query()=portality.blog.NewsQuery-class.html#query,Class Method portality.dao.DomainObject.query()=portality.dao.DomainObject-class.html#query,Method portality.models.article.ArticleIssueQuery.query()=portality.models.article.ArticleIssueQuery-class.html#query,Method portality.models.article.ArticleQuery.query()=portality.models.article.ArticleQuery-class.html#query,Method portality.models.article.ArticleVolumesIssuesQuery.query()=portality.models.article.ArticleVolumesIssuesQuery-class.html#query,Method portality.models.article.ArticleVolumesQuery.query()=portality.models.article.ArticleVolumesQuery-class.html#query,Method portality.models.article.DuplicateArticleQuery.query()=portality.models.article.DuplicateArticleQuery-class.html#query,Method portality.models.editors.EditorGroupMemberQuery.query()=portality.models.editors.EditorGroupMemberQuery-class.html#query,Method portality.models.editors.EditorGroupQuery.query()=portality.models.editors.EditorGroupQuery-class.html#query,Method portality.models.journal.ContinuationQuery.query()=portality.models.journal.ContinuationQuery-class.html#query,Method portality.models.journal.IssnQuery.query()=portality.models.journal.IssnQuery-class.html#query,Method portality.models.journal.PublisherQuery.query()=portality.models.journal.PublisherQuery-class.html#query,Method portality.models.journal.TitleQuery.query()=portality.models.journal.TitleQuery-class.html#query,Method portality.models.reapplication.OwnerBulkQuery.query()=portality.models.reapplication.OwnerBulkQuery-class.html#query,Method portality.models.reapplication.StatusBulkQuery.query()=portality.models.reapplication.StatusBulkQuery-class.html#query,Method portality.models.suggestion.OwnerStatusQuery.query()=portality.models.suggestion.OwnerStatusQuery-class.html#query,Method portality.models.suggestion.SuggestionQuery.query()=portality.models.suggestion.SuggestionQuery-class.html#query,Method portality.models.toc.ToCQuery.query()=portality.models.toc.ToCQuery-class.html#query,Method portality.models.toc.VolumesToCQuery.query()=portality.models.toc.VolumesToCQuery-class.html#query,Method portality.models.uploads.ExistsFileQuery.query()=portality.models.uploads.ExistsFileQuery-class.html#query,Method portality.models.uploads.OwnerFileQuery.query()=portality.models.uploads.OwnerFileQuery-class.html#query,Method portality.models.uploads.ValidFileQuery.query()=portality.models.uploads.ValidFileQuery-class.html#query,Module portality.view.query=portality.view.query-module.html,Function portality.view.query.query()=portality.view.query-module.html#query"><a title="portality.api.v1.discovery.ApplicationQuery.query
portality.api.v1.discovery.SearchQuery.query
portality.blog.NewsQuery.query
portality.dao.DomainObject.query
portality.models.article.ArticleIssueQuery.query
portality.models.article.ArticleQuery.query
portality.models.article.ArticleVolumesIssuesQuery.query
portality.models.article.ArticleVolumesQuery.query
portality.models.article.DuplicateArticleQuery.query
portality.models.editors.EditorGroupMemberQuery.query
portality.models.editors.EditorGroupQuery.query
portality.models.journal.ContinuationQuery.query
portality.models.journal.IssnQuery.query
portality.models.journal.PublisherQuery.query
portality.models.journal.TitleQuery.query
portality.models.reapplication.OwnerBulkQuery.query
portality.models.reapplication.StatusBulkQuery.query
portality.models.suggestion.OwnerStatusQuery.query
portality.models.suggestion.SuggestionQuery.query
portality.models.toc.ToCQuery.query
portality.models.toc.VolumesToCQuery.query
portality.models.uploads.ExistsFileQuery.query
portality.models.uploads.OwnerFileQuery.query
portality.models.uploads.ValidFileQuery.query
portality.view.query
portality.view.query.query" class="py-name" href="#" onclick="return doclink('link-36', 'query', 'link-36');">query</a></tt> <tt class="py-op">=</tt> <tt id="link-37" class="py-name"><a title="portality.dao.DomainObject.json
portality.lib.dataobj.DataObj.json" class="py-name" href="#" onclick="return doclink('link-37', 'json', 'link-0');">json</a></tt><tt class="py-op">.</tt><tt class="py-name">loads</tt><tt class="py-op">(</tt><tt class="py-name">request</tt><tt class="py-op">.</tt><tt id="link-38" class="py-name" targets="Method portality.ordereddict.OrderedDict.values()=portality.ordereddict.OrderedDict-class.html#values"><a title="portality.ordereddict.OrderedDict.values" class="py-name" href="#" onclick="return doclink('link-38', 'values', 'link-38');">values</a></tt><tt class="py-op">.</tt><tt class="py-name">get</tt><tt class="py-op">(</tt><tt class="py-string">"q"</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L51"></a><tt class="py-lineno"> 51</tt>  <tt class="py-line">        <tt class="py-keyword">except</tt><tt class="py-op">:</tt> </tt>
<a name="L52"></a><tt class="py-lineno"> 52</tt>  <tt class="py-line">            <tt id="link-39" class="py-name"><a title="portality.app
portality.core.app" class="py-name" href="#" onclick="return doclink('link-39', 'app', 'link-24');">app</a></tt><tt class="py-op">.</tt><tt class="py-name">logger</tt><tt class="py-op">.</tt><tt class="py-name">warn</tt><tt class="py-op">(</tt><tt class="py-string">"Bad Request at admin/journals: "</tt> <tt class="py-op">+</tt> <tt class="py-name">str</tt><tt class="py-op">(</tt><tt class="py-name">request</tt><tt class="py-op">.</tt><tt id="link-40" class="py-name"><a title="portality.ordereddict.OrderedDict.values" class="py-name" href="#" onclick="return doclink('link-40', 'values', 'link-38');">values</a></tt><tt class="py-op">.</tt><tt class="py-name">get</tt><tt class="py-op">(</tt><tt class="py-string">"q"</tt><tt class="py-op">)</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L53"></a><tt class="py-lineno"> 53</tt>  <tt class="py-line">            <tt id="link-41" class="py-name"><a title="portality.scripts.sync_doaj_records.abort" class="py-name" href="#" onclick="return doclink('link-41', 'abort', 'link-1');">abort</a></tt><tt class="py-op">(</tt><tt class="py-number">400</tt><tt class="py-op">)</tt> </tt>
<a name="L54"></a><tt class="py-lineno"> 54</tt>  <tt class="py-line"> </tt>
<a name="L55"></a><tt class="py-lineno"> 55</tt>  <tt class="py-line">        <tt class="py-comment"># get the total number of journals to be affected</tt> </tt>
<a name="L56"></a><tt class="py-lineno"> 56</tt>  <tt class="py-line">        <tt class="py-name">jtotal</tt> <tt class="py-op">=</tt> <tt id="link-42" class="py-name"><a title="portality.models" class="py-name" href="#" onclick="return doclink('link-42', 'models', 'link-11');">models</a></tt><tt class="py-op">.</tt><tt id="link-43" class="py-name" targets="Class portality.models.journal.Journal=portality.models.journal.Journal-class.html"><a title="portality.models.journal.Journal" class="py-name" href="#" onclick="return doclink('link-43', 'Journal', 'link-43');">Journal</a></tt><tt class="py-op">.</tt><tt id="link-44" class="py-name" targets="Class Method portality.dao.DomainObject.hit_count()=portality.dao.DomainObject-class.html#hit_count"><a title="portality.dao.DomainObject.hit_count" class="py-name" href="#" onclick="return doclink('link-44', 'hit_count', 'link-44');">hit_count</a></tt><tt class="py-op">(</tt><tt id="link-45" class="py-name"><a title="portality.api.v1.discovery.ApplicationQuery.query
portality.api.v1.discovery.SearchQuery.query
portality.blog.NewsQuery.query
portality.dao.DomainObject.query
portality.models.article.ArticleIssueQuery.query
portality.models.article.ArticleQuery.query
portality.models.article.ArticleVolumesIssuesQuery.query
portality.models.article.ArticleVolumesQuery.query
portality.models.article.DuplicateArticleQuery.query
portality.models.editors.EditorGroupMemberQuery.query
portality.models.editors.EditorGroupQuery.query
portality.models.journal.ContinuationQuery.query
portality.models.journal.IssnQuery.query
portality.models.journal.PublisherQuery.query
portality.models.journal.TitleQuery.query
portality.models.reapplication.OwnerBulkQuery.query
portality.models.reapplication.StatusBulkQuery.query
portality.models.suggestion.OwnerStatusQuery.query
portality.models.suggestion.SuggestionQuery.query
portality.models.toc.ToCQuery.query
portality.models.toc.VolumesToCQuery.query
portality.models.uploads.ExistsFileQuery.query
portality.models.uploads.OwnerFileQuery.query
portality.models.uploads.ValidFileQuery.query
portality.view.query
portality.view.query.query" class="py-name" href="#" onclick="return doclink('link-45', 'query', 'link-36');">query</a></tt><tt class="py-op">,</tt> <tt class="py-name">consistent_order</tt><tt class="py-op">=</tt><tt class="py-name">False</tt><tt class="py-op">)</tt> </tt>
<a name="L57"></a><tt class="py-lineno"> 57</tt>  <tt class="py-line"> </tt>
<a name="L58"></a><tt class="py-lineno"> 58</tt>  <tt class="py-line">        <tt class="py-comment"># get the total number of articles to be affected</tt> </tt>
<a name="L59"></a><tt class="py-lineno"> 59</tt>  <tt class="py-line">        <tt id="link-46" class="py-name" targets="Method portality.models.bibjson.GenericBibJSON.issns()=portality.models.bibjson.GenericBibJSON-class.html#issns"><a title="portality.models.bibjson.GenericBibJSON.issns" class="py-name" href="#" onclick="return doclink('link-46', 'issns', 'link-46');">issns</a></tt> <tt class="py-op">=</tt> <tt id="link-47" class="py-name"><a title="portality.models" class="py-name" href="#" onclick="return doclink('link-47', 'models', 'link-11');">models</a></tt><tt class="py-op">.</tt><tt id="link-48" class="py-name"><a title="portality.models.journal.Journal" class="py-name" href="#" onclick="return doclink('link-48', 'Journal', 'link-43');">Journal</a></tt><tt class="py-op">.</tt><tt id="link-49" class="py-name" targets="Class Method portality.models.journal.JournalLikeObject.issns_by_query()=portality.models.journal.JournalLikeObject-class.html#issns_by_query"><a title="portality.models.journal.JournalLikeObject.issns_by_query" class="py-name" href="#" onclick="return doclink('link-49', 'issns_by_query', 'link-49');">issns_by_query</a></tt><tt class="py-op">(</tt><tt id="link-50" class="py-name"><a title="portality.api.v1.discovery.ApplicationQuery.query
portality.api.v1.discovery.SearchQuery.query
portality.blog.NewsQuery.query
portality.dao.DomainObject.query
portality.models.article.ArticleIssueQuery.query
portality.models.article.ArticleQuery.query
portality.models.article.ArticleVolumesIssuesQuery.query
portality.models.article.ArticleVolumesQuery.query
portality.models.article.DuplicateArticleQuery.query
portality.models.editors.EditorGroupMemberQuery.query
portality.models.editors.EditorGroupQuery.query
portality.models.journal.ContinuationQuery.query
portality.models.journal.IssnQuery.query
portality.models.journal.PublisherQuery.query
portality.models.journal.TitleQuery.query
portality.models.reapplication.OwnerBulkQuery.query
portality.models.reapplication.StatusBulkQuery.query
portality.models.suggestion.OwnerStatusQuery.query
portality.models.suggestion.SuggestionQuery.query
portality.models.toc.ToCQuery.query
portality.models.toc.VolumesToCQuery.query
portality.models.uploads.ExistsFileQuery.query
portality.models.uploads.OwnerFileQuery.query
portality.models.uploads.ValidFileQuery.query
portality.view.query
portality.view.query.query" class="py-name" href="#" onclick="return doclink('link-50', 'query', 'link-36');">query</a></tt><tt class="py-op">)</tt> </tt>
<a name="L60"></a><tt class="py-lineno"> 60</tt>  <tt class="py-line">        <tt class="py-name">atotal</tt> <tt class="py-op">=</tt> <tt id="link-51" class="py-name"><a title="portality.models" class="py-name" href="#" onclick="return doclink('link-51', 'models', 'link-11');">models</a></tt><tt class="py-op">.</tt><tt id="link-52" class="py-name" targets="Class portality.models.article.Article=portality.models.article.Article-class.html"><a title="portality.models.article.Article" class="py-name" href="#" onclick="return doclink('link-52', 'Article', 'link-52');">Article</a></tt><tt class="py-op">.</tt><tt id="link-53" class="py-name" targets="Class Method portality.models.article.Article.count_by_issns()=portality.models.article.Article-class.html#count_by_issns"><a title="portality.models.article.Article.count_by_issns" class="py-name" href="#" onclick="return doclink('link-53', 'count_by_issns', 'link-53');">count_by_issns</a></tt><tt class="py-op">(</tt><tt id="link-54" class="py-name"><a title="portality.models.bibjson.GenericBibJSON.issns" class="py-name" href="#" onclick="return doclink('link-54', 'issns', 'link-46');">issns</a></tt><tt class="py-op">)</tt> </tt>
<a name="L61"></a><tt class="py-lineno"> 61</tt>  <tt class="py-line"> </tt>
<a name="L62"></a><tt class="py-lineno"> 62</tt>  <tt class="py-line">        <tt class="py-name">resp</tt> <tt class="py-op">=</tt> <tt class="py-name">make_response</tt><tt class="py-op">(</tt><tt id="link-55" class="py-name"><a title="portality.dao.DomainObject.json
portality.lib.dataobj.DataObj.json" class="py-name" href="#" onclick="return doclink('link-55', 'json', 'link-0');">json</a></tt><tt class="py-op">.</tt><tt class="py-name">dumps</tt><tt class="py-op">(</tt><tt class="py-op">{</tt><tt class="py-string">"journals"</tt> <tt class="py-op">:</tt> <tt class="py-name">jtotal</tt><tt class="py-op">,</tt> <tt class="py-string">"articles"</tt> <tt class="py-op">:</tt> <tt class="py-name">atotal</tt><tt class="py-op">}</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L63"></a><tt class="py-lineno"> 63</tt>  <tt class="py-line">        <tt class="py-name">resp</tt><tt class="py-op">.</tt><tt class="py-name">mimetype</tt> <tt class="py-op">=</tt> <tt class="py-string">"application/json"</tt> </tt>
<a name="L64"></a><tt class="py-lineno"> 64</tt>  <tt class="py-line">        <tt class="py-keyword">return</tt> <tt class="py-name">resp</tt> </tt>
<a name="L65"></a><tt class="py-lineno"> 65</tt>  <tt class="py-line"> </tt>
<a name="L66"></a><tt class="py-lineno"> 66</tt>  <tt class="py-line">    <tt class="py-keyword">elif</tt> <tt class="py-name">request</tt><tt class="py-op">.</tt><tt class="py-name">method</tt> <tt class="py-op">==</tt> <tt class="py-string">"DELETE"</tt><tt class="py-op">:</tt> </tt>
<a name="L67"></a><tt class="py-lineno"> 67</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-keyword">not</tt> <tt class="py-name">current_user</tt><tt class="py-op">.</tt><tt id="link-56" class="py-name"><a title="portality.authorise.Authorise.has_role
portality.models.account.Account.has_role" class="py-name" href="#" onclick="return doclink('link-56', 'has_role', 'link-33');">has_role</a></tt><tt class="py-op">(</tt><tt class="py-string">"delete_article"</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L68"></a><tt class="py-lineno"> 68</tt>  <tt class="py-line">            <tt id="link-57" class="py-name"><a title="portality.scripts.sync_doaj_records.abort" class="py-name" href="#" onclick="return doclink('link-57', 'abort', 'link-1');">abort</a></tt><tt class="py-op">(</tt><tt class="py-number">401</tt><tt class="py-op">)</tt> </tt>
<a name="L69"></a><tt class="py-lineno"> 69</tt>  <tt class="py-line"> </tt>
<a name="L70"></a><tt class="py-lineno"> 70</tt>  <tt class="py-line">        <tt class="py-keyword">try</tt><tt class="py-op">:</tt> </tt>
<a name="L71"></a><tt class="py-lineno"> 71</tt>  <tt class="py-line">            <tt id="link-58" class="py-name"><a title="portality.api.v1.discovery.ApplicationQuery.query
portality.api.v1.discovery.SearchQuery.query
portality.blog.NewsQuery.query
portality.dao.DomainObject.query
portality.models.article.ArticleIssueQuery.query
portality.models.article.ArticleQuery.query
portality.models.article.ArticleVolumesIssuesQuery.query
portality.models.article.ArticleVolumesQuery.query
portality.models.article.DuplicateArticleQuery.query
portality.models.editors.EditorGroupMemberQuery.query
portality.models.editors.EditorGroupQuery.query
portality.models.journal.ContinuationQuery.query
portality.models.journal.IssnQuery.query
portality.models.journal.PublisherQuery.query
portality.models.journal.TitleQuery.query
portality.models.reapplication.OwnerBulkQuery.query
portality.models.reapplication.StatusBulkQuery.query
portality.models.suggestion.OwnerStatusQuery.query
portality.models.suggestion.SuggestionQuery.query
portality.models.toc.ToCQuery.query
portality.models.toc.VolumesToCQuery.query
portality.models.uploads.ExistsFileQuery.query
portality.models.uploads.OwnerFileQuery.query
portality.models.uploads.ValidFileQuery.query
portality.view.query
portality.view.query.query" class="py-name" href="#" onclick="return doclink('link-58', 'query', 'link-36');">query</a></tt> <tt class="py-op">=</tt> <tt id="link-59" class="py-name"><a title="portality.dao.DomainObject.json
portality.lib.dataobj.DataObj.json" class="py-name" href="#" onclick="return doclink('link-59', 'json', 'link-0');">json</a></tt><tt class="py-op">.</tt><tt class="py-name">loads</tt><tt class="py-op">(</tt><tt class="py-name">request</tt><tt class="py-op">.</tt><tt class="py-name">data</tt><tt class="py-op">)</tt> </tt>
<a name="L72"></a><tt class="py-lineno"> 72</tt>  <tt class="py-line">        <tt class="py-keyword">except</tt><tt class="py-op">:</tt> </tt>
<a name="L73"></a><tt class="py-lineno"> 73</tt>  <tt class="py-line">            <tt id="link-60" class="py-name"><a title="portality.app
portality.core.app" class="py-name" href="#" onclick="return doclink('link-60', 'app', 'link-24');">app</a></tt><tt class="py-op">.</tt><tt class="py-name">logger</tt><tt class="py-op">.</tt><tt class="py-name">warn</tt><tt class="py-op">(</tt><tt class="py-string">"Bad Request at admin/journals: "</tt> <tt class="py-op">+</tt> <tt class="py-name">str</tt><tt class="py-op">(</tt><tt class="py-name">request</tt><tt class="py-op">.</tt><tt class="py-name">data</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L74"></a><tt class="py-lineno"> 74</tt>  <tt class="py-line">            <tt id="link-61" class="py-name"><a title="portality.scripts.sync_doaj_records.abort" class="py-name" href="#" onclick="return doclink('link-61', 'abort', 'link-1');">abort</a></tt><tt class="py-op">(</tt><tt class="py-number">400</tt><tt class="py-op">)</tt> </tt>
<a name="L75"></a><tt class="py-lineno"> 75</tt>  <tt class="py-line"> </tt>
<a name="L76"></a><tt class="py-lineno"> 76</tt>  <tt class="py-line">        <tt class="py-comment"># get only the query part</tt> </tt>
<a name="L77"></a><tt class="py-lineno"> 77</tt>  <tt class="py-line">        <tt id="link-62" class="py-name"><a title="portality.api.v1.discovery.ApplicationQuery.query
portality.api.v1.discovery.SearchQuery.query
portality.blog.NewsQuery.query
portality.dao.DomainObject.query
portality.models.article.ArticleIssueQuery.query
portality.models.article.ArticleQuery.query
portality.models.article.ArticleVolumesIssuesQuery.query
portality.models.article.ArticleVolumesQuery.query
portality.models.article.DuplicateArticleQuery.query
portality.models.editors.EditorGroupMemberQuery.query
portality.models.editors.EditorGroupQuery.query
portality.models.journal.ContinuationQuery.query
portality.models.journal.IssnQuery.query
portality.models.journal.PublisherQuery.query
portality.models.journal.TitleQuery.query
portality.models.reapplication.OwnerBulkQuery.query
portality.models.reapplication.StatusBulkQuery.query
portality.models.suggestion.OwnerStatusQuery.query
portality.models.suggestion.SuggestionQuery.query
portality.models.toc.ToCQuery.query
portality.models.toc.VolumesToCQuery.query
portality.models.uploads.ExistsFileQuery.query
portality.models.uploads.OwnerFileQuery.query
portality.models.uploads.ValidFileQuery.query
portality.view.query
portality.view.query.query" class="py-name" href="#" onclick="return doclink('link-62', 'query', 'link-36');">query</a></tt> <tt class="py-op">=</tt> <tt class="py-op">{</tt><tt class="py-string">"query"</tt> <tt class="py-op">:</tt> <tt id="link-63" class="py-name"><a title="portality.api.v1.discovery.ApplicationQuery.query
portality.api.v1.discovery.SearchQuery.query
portality.blog.NewsQuery.query
portality.dao.DomainObject.query
portality.models.article.ArticleIssueQuery.query
portality.models.article.ArticleQuery.query
portality.models.article.ArticleVolumesIssuesQuery.query
portality.models.article.ArticleVolumesQuery.query
portality.models.article.DuplicateArticleQuery.query
portality.models.editors.EditorGroupMemberQuery.query
portality.models.editors.EditorGroupQuery.query
portality.models.journal.ContinuationQuery.query
portality.models.journal.IssnQuery.query
portality.models.journal.PublisherQuery.query
portality.models.journal.TitleQuery.query
portality.models.reapplication.OwnerBulkQuery.query
portality.models.reapplication.StatusBulkQuery.query
portality.models.suggestion.OwnerStatusQuery.query
portality.models.suggestion.SuggestionQuery.query
portality.models.toc.ToCQuery.query
portality.models.toc.VolumesToCQuery.query
portality.models.uploads.ExistsFileQuery.query
portality.models.uploads.OwnerFileQuery.query
portality.models.uploads.ValidFileQuery.query
portality.view.query
portality.view.query.query" class="py-name" href="#" onclick="return doclink('link-63', 'query', 'link-36');">query</a></tt><tt class="py-op">.</tt><tt class="py-name">get</tt><tt class="py-op">(</tt><tt class="py-string">"query"</tt><tt class="py-op">)</tt><tt class="py-op">}</tt> </tt>
<a name="L78"></a><tt class="py-lineno"> 78</tt>  <tt class="py-line">        <tt id="link-64" class="py-name"><a title="portality.models" class="py-name" href="#" onclick="return doclink('link-64', 'models', 'link-11');">models</a></tt><tt class="py-op">.</tt><tt id="link-65" class="py-name"><a title="portality.models.journal.Journal" class="py-name" href="#" onclick="return doclink('link-65', 'Journal', 'link-43');">Journal</a></tt><tt class="py-op">.</tt><tt id="link-66" class="py-name" targets="Class Method portality.models.article.Article.delete_selected()=portality.models.article.Article-class.html#delete_selected,Class Method portality.models.journal.Journal.delete_selected()=portality.models.journal.Journal-class.html#delete_selected,Class Method portality.models.suggestion.Suggestion.delete_selected()=portality.models.suggestion.Suggestion-class.html#delete_selected"><a title="portality.models.article.Article.delete_selected
portality.models.journal.Journal.delete_selected
portality.models.suggestion.Suggestion.delete_selected" class="py-name" href="#" onclick="return doclink('link-66', 'delete_selected', 'link-66');">delete_selected</a></tt><tt class="py-op">(</tt><tt id="link-67" class="py-name"><a title="portality.api.v1.discovery.ApplicationQuery.query
portality.api.v1.discovery.SearchQuery.query
portality.blog.NewsQuery.query
portality.dao.DomainObject.query
portality.models.article.ArticleIssueQuery.query
portality.models.article.ArticleQuery.query
portality.models.article.ArticleVolumesIssuesQuery.query
portality.models.article.ArticleVolumesQuery.query
portality.models.article.DuplicateArticleQuery.query
portality.models.editors.EditorGroupMemberQuery.query
portality.models.editors.EditorGroupQuery.query
portality.models.journal.ContinuationQuery.query
portality.models.journal.IssnQuery.query
portality.models.journal.PublisherQuery.query
portality.models.journal.TitleQuery.query
portality.models.reapplication.OwnerBulkQuery.query
portality.models.reapplication.StatusBulkQuery.query
portality.models.suggestion.OwnerStatusQuery.query
portality.models.suggestion.SuggestionQuery.query
portality.models.toc.ToCQuery.query
portality.models.toc.VolumesToCQuery.query
portality.models.uploads.ExistsFileQuery.query
portality.models.uploads.OwnerFileQuery.query
portality.models.uploads.ValidFileQuery.query
portality.view.query
portality.view.query.query" class="py-name" href="#" onclick="return doclink('link-67', 'query', 'link-36');">query</a></tt><tt class="py-op">=</tt><tt id="link-68" class="py-name"><a title="portality.api.v1.discovery.ApplicationQuery.query
portality.api.v1.discovery.SearchQuery.query
portality.blog.NewsQuery.query
portality.dao.DomainObject.query
portality.models.article.ArticleIssueQuery.query
portality.models.article.ArticleQuery.query
portality.models.article.ArticleVolumesIssuesQuery.query
portality.models.article.ArticleVolumesQuery.query
portality.models.article.DuplicateArticleQuery.query
portality.models.editors.EditorGroupMemberQuery.query
portality.models.editors.EditorGroupQuery.query
portality.models.journal.ContinuationQuery.query
portality.models.journal.IssnQuery.query
portality.models.journal.PublisherQuery.query
portality.models.journal.TitleQuery.query
portality.models.reapplication.OwnerBulkQuery.query
portality.models.reapplication.StatusBulkQuery.query
portality.models.suggestion.OwnerStatusQuery.query
portality.models.suggestion.SuggestionQuery.query
portality.models.toc.ToCQuery.query
portality.models.toc.VolumesToCQuery.query
portality.models.uploads.ExistsFileQuery.query
portality.models.uploads.OwnerFileQuery.query
portality.models.uploads.ValidFileQuery.query
portality.view.query
portality.view.query.query" class="py-name" href="#" onclick="return doclink('link-68', 'query', 'link-36');">query</a></tt><tt class="py-op">,</tt> <tt id="link-69" class="py-name" targets="Module portality.api.v1.bulk.articles=portality.api.v1.bulk.articles-module.html,Module portality.api.v1.crud.articles=portality.api.v1.crud.articles-module.html,Method portality.models.toc.JournalIssueToC.articles()=portality.models.toc.JournalIssueToC-class.html#articles"><a title="portality.api.v1.bulk.articles
portality.api.v1.crud.articles
portality.models.toc.JournalIssueToC.articles" class="py-name" href="#" onclick="return doclink('link-69', 'articles', 'link-69');">articles</a></tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">,</tt> <tt class="py-name">snapshot_journals</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">,</tt> <tt class="py-name">snapshot_articles</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">)</tt> </tt>
<a name="L79"></a><tt class="py-lineno"> 79</tt>  <tt class="py-line">        <tt class="py-name">resp</tt> <tt class="py-op">=</tt> <tt class="py-name">make_response</tt><tt class="py-op">(</tt><tt id="link-70" class="py-name"><a title="portality.dao.DomainObject.json
portality.lib.dataobj.DataObj.json" class="py-name" href="#" onclick="return doclink('link-70', 'json', 'link-0');">json</a></tt><tt class="py-op">.</tt><tt class="py-name">dumps</tt><tt class="py-op">(</tt><tt class="py-op">{</tt><tt class="py-string">"status"</tt> <tt class="py-op">:</tt> <tt class="py-string">"success"</tt><tt class="py-op">}</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L80"></a><tt class="py-lineno"> 80</tt>  <tt class="py-line">        <tt class="py-name">resp</tt><tt class="py-op">.</tt><tt class="py-name">mimetype</tt> <tt class="py-op">=</tt> <tt class="py-string">"application/json"</tt> </tt>
<a name="L81"></a><tt class="py-lineno"> 81</tt>  <tt class="py-line">        <tt class="py-keyword">return</tt> <tt class="py-name">resp</tt> </tt>
</div><a name="L82"></a><tt class="py-lineno"> 82</tt>  <tt class="py-line"> </tt>
<a name="articles_list"></a><div id="articles_list-def"><a name="L83"></a><tt class="py-lineno"> 83</tt>  <tt class="py-line"> </tt>
<a name="L84"></a><tt class="py-lineno"> 84</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">blueprint</tt><tt class="py-op">.</tt><tt class="py-name">route</tt><tt class="py-op">(</tt><tt class="py-string">"/articles"</tt><tt class="py-op">,</tt> <tt class="py-name">methods</tt><tt class="py-op">=</tt><tt class="py-op">[</tt><tt class="py-string">"POST"</tt><tt class="py-op">,</tt> <tt class="py-string">"DELETE"</tt><tt class="py-op">]</tt><tt class="py-op">)</tt> </tt>
<a name="L85"></a><tt class="py-lineno"> 85</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">login_required</tt> </tt>
<a name="L86"></a><tt class="py-lineno"> 86</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">ssl_required</tt> </tt>
<a name="L87"></a><tt class="py-lineno"> 87</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">write_required</tt> </tt>
<a name="L88"></a><tt class="py-lineno"> 88</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">jsonp</tt> </tt>
<a name="L89"></a><tt class="py-lineno"> 89</tt> <a class="py-toggle" href="#" id="articles_list-toggle" onclick="return toggle('articles_list');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="portality.view.admin-module.html#articles_list">articles_list</a><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="articles_list-collapsed" style="display:none;" pad="+++" indent="++++"></div><div id="articles_list-expanded"><a name="L90"></a><tt class="py-lineno"> 90</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">request</tt><tt class="py-op">.</tt><tt class="py-name">method</tt> <tt class="py-op">==</tt> <tt class="py-string">"POST"</tt><tt class="py-op">:</tt> </tt>
<a name="L91"></a><tt class="py-lineno"> 91</tt>  <tt class="py-line">        <tt class="py-keyword">try</tt><tt class="py-op">:</tt> </tt>
<a name="L92"></a><tt class="py-lineno"> 92</tt>  <tt class="py-line">            <tt id="link-71" class="py-name"><a title="portality.api.v1.discovery.ApplicationQuery.query
portality.api.v1.discovery.SearchQuery.query
portality.blog.NewsQuery.query
portality.dao.DomainObject.query
portality.models.article.ArticleIssueQuery.query
portality.models.article.ArticleQuery.query
portality.models.article.ArticleVolumesIssuesQuery.query
portality.models.article.ArticleVolumesQuery.query
portality.models.article.DuplicateArticleQuery.query
portality.models.editors.EditorGroupMemberQuery.query
portality.models.editors.EditorGroupQuery.query
portality.models.journal.ContinuationQuery.query
portality.models.journal.IssnQuery.query
portality.models.journal.PublisherQuery.query
portality.models.journal.TitleQuery.query
portality.models.reapplication.OwnerBulkQuery.query
portality.models.reapplication.StatusBulkQuery.query
portality.models.suggestion.OwnerStatusQuery.query
portality.models.suggestion.SuggestionQuery.query
portality.models.toc.ToCQuery.query
portality.models.toc.VolumesToCQuery.query
portality.models.uploads.ExistsFileQuery.query
portality.models.uploads.OwnerFileQuery.query
portality.models.uploads.ValidFileQuery.query
portality.view.query
portality.view.query.query" class="py-name" href="#" onclick="return doclink('link-71', 'query', 'link-36');">query</a></tt> <tt class="py-op">=</tt> <tt id="link-72" class="py-name"><a title="portality.dao.DomainObject.json
portality.lib.dataobj.DataObj.json" class="py-name" href="#" onclick="return doclink('link-72', 'json', 'link-0');">json</a></tt><tt class="py-op">.</tt><tt class="py-name">loads</tt><tt class="py-op">(</tt><tt class="py-name">request</tt><tt class="py-op">.</tt><tt id="link-73" class="py-name"><a title="portality.ordereddict.OrderedDict.values" class="py-name" href="#" onclick="return doclink('link-73', 'values', 'link-38');">values</a></tt><tt class="py-op">.</tt><tt class="py-name">get</tt><tt class="py-op">(</tt><tt class="py-string">"q"</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L93"></a><tt class="py-lineno"> 93</tt>  <tt class="py-line">        <tt class="py-keyword">except</tt><tt class="py-op">:</tt> </tt>
<a name="L94"></a><tt class="py-lineno"> 94</tt>  <tt class="py-line">            <tt class="py-keyword">print</tt> <tt class="py-name">request</tt><tt class="py-op">.</tt><tt id="link-74" class="py-name"><a title="portality.ordereddict.OrderedDict.values" class="py-name" href="#" onclick="return doclink('link-74', 'values', 'link-38');">values</a></tt><tt class="py-op">.</tt><tt class="py-name">get</tt><tt class="py-op">(</tt><tt class="py-string">"q"</tt><tt class="py-op">)</tt> </tt>
<a name="L95"></a><tt class="py-lineno"> 95</tt>  <tt class="py-line">            <tt id="link-75" class="py-name"><a title="portality.scripts.sync_doaj_records.abort" class="py-name" href="#" onclick="return doclink('link-75', 'abort', 'link-1');">abort</a></tt><tt class="py-op">(</tt><tt class="py-number">400</tt><tt class="py-op">)</tt> </tt>
<a name="L96"></a><tt class="py-lineno"> 96</tt>  <tt class="py-line">        <tt class="py-name">total</tt> <tt class="py-op">=</tt> <tt id="link-76" class="py-name"><a title="portality.models" class="py-name" href="#" onclick="return doclink('link-76', 'models', 'link-11');">models</a></tt><tt class="py-op">.</tt><tt id="link-77" class="py-name"><a title="portality.models.article.Article" class="py-name" href="#" onclick="return doclink('link-77', 'Article', 'link-52');">Article</a></tt><tt class="py-op">.</tt><tt id="link-78" class="py-name"><a title="portality.dao.DomainObject.hit_count" class="py-name" href="#" onclick="return doclink('link-78', 'hit_count', 'link-44');">hit_count</a></tt><tt class="py-op">(</tt><tt id="link-79" class="py-name"><a title="portality.api.v1.discovery.ApplicationQuery.query
portality.api.v1.discovery.SearchQuery.query
portality.blog.NewsQuery.query
portality.dao.DomainObject.query
portality.models.article.ArticleIssueQuery.query
portality.models.article.ArticleQuery.query
portality.models.article.ArticleVolumesIssuesQuery.query
portality.models.article.ArticleVolumesQuery.query
portality.models.article.DuplicateArticleQuery.query
portality.models.editors.EditorGroupMemberQuery.query
portality.models.editors.EditorGroupQuery.query
portality.models.journal.ContinuationQuery.query
portality.models.journal.IssnQuery.query
portality.models.journal.PublisherQuery.query
portality.models.journal.TitleQuery.query
portality.models.reapplication.OwnerBulkQuery.query
portality.models.reapplication.StatusBulkQuery.query
portality.models.suggestion.OwnerStatusQuery.query
portality.models.suggestion.SuggestionQuery.query
portality.models.toc.ToCQuery.query
portality.models.toc.VolumesToCQuery.query
portality.models.uploads.ExistsFileQuery.query
portality.models.uploads.OwnerFileQuery.query
portality.models.uploads.ValidFileQuery.query
portality.view.query
portality.view.query.query" class="py-name" href="#" onclick="return doclink('link-79', 'query', 'link-36');">query</a></tt><tt class="py-op">,</tt> <tt class="py-name">consistent_order</tt><tt class="py-op">=</tt><tt class="py-name">False</tt><tt class="py-op">)</tt> </tt>
<a name="L97"></a><tt class="py-lineno"> 97</tt>  <tt class="py-line">        <tt class="py-name">resp</tt> <tt class="py-op">=</tt> <tt class="py-name">make_response</tt><tt class="py-op">(</tt><tt id="link-80" class="py-name"><a title="portality.dao.DomainObject.json
portality.lib.dataobj.DataObj.json" class="py-name" href="#" onclick="return doclink('link-80', 'json', 'link-0');">json</a></tt><tt class="py-op">.</tt><tt class="py-name">dumps</tt><tt class="py-op">(</tt><tt class="py-op">{</tt><tt class="py-string">"total"</tt> <tt class="py-op">:</tt> <tt class="py-name">total</tt><tt class="py-op">}</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L98"></a><tt class="py-lineno"> 98</tt>  <tt class="py-line">        <tt class="py-name">resp</tt><tt class="py-op">.</tt><tt class="py-name">mimetype</tt> <tt class="py-op">=</tt> <tt class="py-string">"application/json"</tt> </tt>
<a name="L99"></a><tt class="py-lineno"> 99</tt>  <tt class="py-line">        <tt class="py-keyword">return</tt> <tt class="py-name">resp</tt> </tt>
<a name="L100"></a><tt class="py-lineno">100</tt>  <tt class="py-line">    <tt class="py-keyword">elif</tt> <tt class="py-name">request</tt><tt class="py-op">.</tt><tt class="py-name">method</tt> <tt class="py-op">==</tt> <tt class="py-string">"DELETE"</tt><tt class="py-op">:</tt> </tt>
<a name="L101"></a><tt class="py-lineno">101</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-keyword">not</tt> <tt class="py-name">current_user</tt><tt class="py-op">.</tt><tt id="link-81" class="py-name"><a title="portality.authorise.Authorise.has_role
portality.models.account.Account.has_role" class="py-name" href="#" onclick="return doclink('link-81', 'has_role', 'link-33');">has_role</a></tt><tt class="py-op">(</tt><tt class="py-string">"delete_article"</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L102"></a><tt class="py-lineno">102</tt>  <tt class="py-line">            <tt id="link-82" class="py-name"><a title="portality.scripts.sync_doaj_records.abort" class="py-name" href="#" onclick="return doclink('link-82', 'abort', 'link-1');">abort</a></tt><tt class="py-op">(</tt><tt class="py-number">401</tt><tt class="py-op">)</tt> </tt>
<a name="L103"></a><tt class="py-lineno">103</tt>  <tt class="py-line"> </tt>
<a name="L104"></a><tt class="py-lineno">104</tt>  <tt class="py-line">        <tt class="py-keyword">try</tt><tt class="py-op">:</tt> </tt>
<a name="L105"></a><tt class="py-lineno">105</tt>  <tt class="py-line">            <tt id="link-83" class="py-name"><a title="portality.api.v1.discovery.ApplicationQuery.query
portality.api.v1.discovery.SearchQuery.query
portality.blog.NewsQuery.query
portality.dao.DomainObject.query
portality.models.article.ArticleIssueQuery.query
portality.models.article.ArticleQuery.query
portality.models.article.ArticleVolumesIssuesQuery.query
portality.models.article.ArticleVolumesQuery.query
portality.models.article.DuplicateArticleQuery.query
portality.models.editors.EditorGroupMemberQuery.query
portality.models.editors.EditorGroupQuery.query
portality.models.journal.ContinuationQuery.query
portality.models.journal.IssnQuery.query
portality.models.journal.PublisherQuery.query
portality.models.journal.TitleQuery.query
portality.models.reapplication.OwnerBulkQuery.query
portality.models.reapplication.StatusBulkQuery.query
portality.models.suggestion.OwnerStatusQuery.query
portality.models.suggestion.SuggestionQuery.query
portality.models.toc.ToCQuery.query
portality.models.toc.VolumesToCQuery.query
portality.models.uploads.ExistsFileQuery.query
portality.models.uploads.OwnerFileQuery.query
portality.models.uploads.ValidFileQuery.query
portality.view.query
portality.view.query.query" class="py-name" href="#" onclick="return doclink('link-83', 'query', 'link-36');">query</a></tt> <tt class="py-op">=</tt> <tt id="link-84" class="py-name"><a title="portality.dao.DomainObject.json
portality.lib.dataobj.DataObj.json" class="py-name" href="#" onclick="return doclink('link-84', 'json', 'link-0');">json</a></tt><tt class="py-op">.</tt><tt class="py-name">loads</tt><tt class="py-op">(</tt><tt class="py-name">request</tt><tt class="py-op">.</tt><tt class="py-name">data</tt><tt class="py-op">)</tt> </tt>
<a name="L106"></a><tt class="py-lineno">106</tt>  <tt class="py-line">        <tt class="py-keyword">except</tt><tt class="py-op">:</tt> </tt>
<a name="L107"></a><tt class="py-lineno">107</tt>  <tt class="py-line">            <tt id="link-85" class="py-name"><a title="portality.app
portality.core.app" class="py-name" href="#" onclick="return doclink('link-85', 'app', 'link-24');">app</a></tt><tt class="py-op">.</tt><tt class="py-name">logger</tt><tt class="py-op">.</tt><tt class="py-name">warn</tt><tt class="py-op">(</tt><tt class="py-string">"Bad Request at admin/journals: "</tt> <tt class="py-op">+</tt> <tt class="py-name">str</tt><tt class="py-op">(</tt><tt class="py-name">request</tt><tt class="py-op">.</tt><tt class="py-name">data</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L108"></a><tt class="py-lineno">108</tt>  <tt class="py-line">            <tt id="link-86" class="py-name"><a title="portality.scripts.sync_doaj_records.abort" class="py-name" href="#" onclick="return doclink('link-86', 'abort', 'link-1');">abort</a></tt><tt class="py-op">(</tt><tt class="py-number">400</tt><tt class="py-op">)</tt> </tt>
<a name="L109"></a><tt class="py-lineno">109</tt>  <tt class="py-line"> </tt>
<a name="L110"></a><tt class="py-lineno">110</tt>  <tt class="py-line">        <tt class="py-comment"># get only the query part</tt> </tt>
<a name="L111"></a><tt class="py-lineno">111</tt>  <tt class="py-line">        <tt id="link-87" class="py-name"><a title="portality.api.v1.discovery.ApplicationQuery.query
portality.api.v1.discovery.SearchQuery.query
portality.blog.NewsQuery.query
portality.dao.DomainObject.query
portality.models.article.ArticleIssueQuery.query
portality.models.article.ArticleQuery.query
portality.models.article.ArticleVolumesIssuesQuery.query
portality.models.article.ArticleVolumesQuery.query
portality.models.article.DuplicateArticleQuery.query
portality.models.editors.EditorGroupMemberQuery.query
portality.models.editors.EditorGroupQuery.query
portality.models.journal.ContinuationQuery.query
portality.models.journal.IssnQuery.query
portality.models.journal.PublisherQuery.query
portality.models.journal.TitleQuery.query
portality.models.reapplication.OwnerBulkQuery.query
portality.models.reapplication.StatusBulkQuery.query
portality.models.suggestion.OwnerStatusQuery.query
portality.models.suggestion.SuggestionQuery.query
portality.models.toc.ToCQuery.query
portality.models.toc.VolumesToCQuery.query
portality.models.uploads.ExistsFileQuery.query
portality.models.uploads.OwnerFileQuery.query
portality.models.uploads.ValidFileQuery.query
portality.view.query
portality.view.query.query" class="py-name" href="#" onclick="return doclink('link-87', 'query', 'link-36');">query</a></tt> <tt class="py-op">=</tt> <tt class="py-op">{</tt><tt class="py-string">"query"</tt> <tt class="py-op">:</tt> <tt id="link-88" class="py-name"><a title="portality.api.v1.discovery.ApplicationQuery.query
portality.api.v1.discovery.SearchQuery.query
portality.blog.NewsQuery.query
portality.dao.DomainObject.query
portality.models.article.ArticleIssueQuery.query
portality.models.article.ArticleQuery.query
portality.models.article.ArticleVolumesIssuesQuery.query
portality.models.article.ArticleVolumesQuery.query
portality.models.article.DuplicateArticleQuery.query
portality.models.editors.EditorGroupMemberQuery.query
portality.models.editors.EditorGroupQuery.query
portality.models.journal.ContinuationQuery.query
portality.models.journal.IssnQuery.query
portality.models.journal.PublisherQuery.query
portality.models.journal.TitleQuery.query
portality.models.reapplication.OwnerBulkQuery.query
portality.models.reapplication.StatusBulkQuery.query
portality.models.suggestion.OwnerStatusQuery.query
portality.models.suggestion.SuggestionQuery.query
portality.models.toc.ToCQuery.query
portality.models.toc.VolumesToCQuery.query
portality.models.uploads.ExistsFileQuery.query
portality.models.uploads.OwnerFileQuery.query
portality.models.uploads.ValidFileQuery.query
portality.view.query
portality.view.query.query" class="py-name" href="#" onclick="return doclink('link-88', 'query', 'link-36');">query</a></tt><tt class="py-op">.</tt><tt class="py-name">get</tt><tt class="py-op">(</tt><tt class="py-string">"query"</tt><tt class="py-op">)</tt><tt class="py-op">}</tt> </tt>
<a name="L112"></a><tt class="py-lineno">112</tt>  <tt class="py-line">        <tt id="link-89" class="py-name"><a title="portality.models" class="py-name" href="#" onclick="return doclink('link-89', 'models', 'link-11');">models</a></tt><tt class="py-op">.</tt><tt id="link-90" class="py-name"><a title="portality.models.article.Article" class="py-name" href="#" onclick="return doclink('link-90', 'Article', 'link-52');">Article</a></tt><tt class="py-op">.</tt><tt id="link-91" class="py-name"><a title="portality.models.article.Article.delete_selected
portality.models.journal.Journal.delete_selected
portality.models.suggestion.Suggestion.delete_selected" class="py-name" href="#" onclick="return doclink('link-91', 'delete_selected', 'link-66');">delete_selected</a></tt><tt class="py-op">(</tt><tt id="link-92" class="py-name"><a title="portality.api.v1.discovery.ApplicationQuery.query
portality.api.v1.discovery.SearchQuery.query
portality.blog.NewsQuery.query
portality.dao.DomainObject.query
portality.models.article.ArticleIssueQuery.query
portality.models.article.ArticleQuery.query
portality.models.article.ArticleVolumesIssuesQuery.query
portality.models.article.ArticleVolumesQuery.query
portality.models.article.DuplicateArticleQuery.query
portality.models.editors.EditorGroupMemberQuery.query
portality.models.editors.EditorGroupQuery.query
portality.models.journal.ContinuationQuery.query
portality.models.journal.IssnQuery.query
portality.models.journal.PublisherQuery.query
portality.models.journal.TitleQuery.query
portality.models.reapplication.OwnerBulkQuery.query
portality.models.reapplication.StatusBulkQuery.query
portality.models.suggestion.OwnerStatusQuery.query
portality.models.suggestion.SuggestionQuery.query
portality.models.toc.ToCQuery.query
portality.models.toc.VolumesToCQuery.query
portality.models.uploads.ExistsFileQuery.query
portality.models.uploads.OwnerFileQuery.query
portality.models.uploads.ValidFileQuery.query
portality.view.query
portality.view.query.query" class="py-name" href="#" onclick="return doclink('link-92', 'query', 'link-36');">query</a></tt><tt class="py-op">=</tt><tt id="link-93" class="py-name"><a title="portality.api.v1.discovery.ApplicationQuery.query
portality.api.v1.discovery.SearchQuery.query
portality.blog.NewsQuery.query
portality.dao.DomainObject.query
portality.models.article.ArticleIssueQuery.query
portality.models.article.ArticleQuery.query
portality.models.article.ArticleVolumesIssuesQuery.query
portality.models.article.ArticleVolumesQuery.query
portality.models.article.DuplicateArticleQuery.query
portality.models.editors.EditorGroupMemberQuery.query
portality.models.editors.EditorGroupQuery.query
portality.models.journal.ContinuationQuery.query
portality.models.journal.IssnQuery.query
portality.models.journal.PublisherQuery.query
portality.models.journal.TitleQuery.query
portality.models.reapplication.OwnerBulkQuery.query
portality.models.reapplication.StatusBulkQuery.query
portality.models.suggestion.OwnerStatusQuery.query
portality.models.suggestion.SuggestionQuery.query
portality.models.toc.ToCQuery.query
portality.models.toc.VolumesToCQuery.query
portality.models.uploads.ExistsFileQuery.query
portality.models.uploads.OwnerFileQuery.query
portality.models.uploads.ValidFileQuery.query
portality.view.query
portality.view.query.query" class="py-name" href="#" onclick="return doclink('link-93', 'query', 'link-36');">query</a></tt><tt class="py-op">,</tt> <tt id="link-94" class="py-name" targets="Method portality.models.article.Article.snapshot()=portality.models.article.Article-class.html#snapshot,Method portality.models.journal.Journal.snapshot()=portality.models.journal.Journal-class.html#snapshot"><a title="portality.models.article.Article.snapshot
portality.models.journal.Journal.snapshot" class="py-name" href="#" onclick="return doclink('link-94', 'snapshot', 'link-94');">snapshot</a></tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">)</tt> </tt>
<a name="L113"></a><tt class="py-lineno">113</tt>  <tt class="py-line">        <tt class="py-name">resp</tt> <tt class="py-op">=</tt> <tt class="py-name">make_response</tt><tt class="py-op">(</tt><tt id="link-95" class="py-name"><a title="portality.dao.DomainObject.json
portality.lib.dataobj.DataObj.json" class="py-name" href="#" onclick="return doclink('link-95', 'json', 'link-0');">json</a></tt><tt class="py-op">.</tt><tt class="py-name">dumps</tt><tt class="py-op">(</tt><tt class="py-op">{</tt><tt class="py-string">"status"</tt> <tt class="py-op">:</tt> <tt class="py-string">"success"</tt><tt class="py-op">}</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L114"></a><tt class="py-lineno">114</tt>  <tt class="py-line">        <tt class="py-name">resp</tt><tt class="py-op">.</tt><tt class="py-name">mimetype</tt> <tt class="py-op">=</tt> <tt class="py-string">"application/json"</tt> </tt>
<a name="L115"></a><tt class="py-lineno">115</tt>  <tt class="py-line">        <tt class="py-keyword">return</tt> <tt class="py-name">resp</tt> </tt>
</div><a name="L116"></a><tt class="py-lineno">116</tt>  <tt class="py-line"> </tt>
<a name="article_endpoint"></a><div id="article_endpoint-def"><a name="L117"></a><tt class="py-lineno">117</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">blueprint</tt><tt class="py-op">.</tt><tt class="py-name">route</tt><tt class="py-op">(</tt><tt class="py-string">"/article/&lt;article_id&gt;"</tt><tt class="py-op">,</tt> <tt class="py-name">methods</tt><tt class="py-op">=</tt><tt class="py-op">[</tt><tt class="py-string">"POST"</tt><tt class="py-op">]</tt><tt class="py-op">)</tt> </tt>
<a name="L118"></a><tt class="py-lineno">118</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">login_required</tt> </tt>
<a name="L119"></a><tt class="py-lineno">119</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">ssl_required</tt> </tt>
<a name="L120"></a><tt class="py-lineno">120</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">write_required</tt> </tt>
<a name="L121"></a><tt class="py-lineno">121</tt> <a class="py-toggle" href="#" id="article_endpoint-toggle" onclick="return toggle('article_endpoint');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="portality.view.admin-module.html#article_endpoint">article_endpoint</a><tt class="py-op">(</tt><tt class="py-param">article_id</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="article_endpoint-collapsed" style="display:none;" pad="+++" indent="++++"></div><div id="article_endpoint-expanded"><a name="L122"></a><tt class="py-lineno">122</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-keyword">not</tt> <tt class="py-name">current_user</tt><tt class="py-op">.</tt><tt id="link-96" class="py-name"><a title="portality.authorise.Authorise.has_role
portality.models.account.Account.has_role" class="py-name" href="#" onclick="return doclink('link-96', 'has_role', 'link-33');">has_role</a></tt><tt class="py-op">(</tt><tt class="py-string">"delete_article"</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L123"></a><tt class="py-lineno">123</tt>  <tt class="py-line">        <tt id="link-97" class="py-name"><a title="portality.scripts.sync_doaj_records.abort" class="py-name" href="#" onclick="return doclink('link-97', 'abort', 'link-1');">abort</a></tt><tt class="py-op">(</tt><tt class="py-number">401</tt><tt class="py-op">)</tt> </tt>
<a name="L124"></a><tt class="py-lineno">124</tt>  <tt class="py-line">    <tt id="link-98" class="py-name" targets="Class Method portality.journalcsv.Journal2QuestionXwalk.a()=portality.journalcsv.Journal2QuestionXwalk-class.html#a,Class Method portality.reapplication.Suggestion2QuestionXwalk.a()=portality.reapplication.Suggestion2QuestionXwalk-class.html#a"><a title="portality.journalcsv.Journal2QuestionXwalk.a
portality.reapplication.Suggestion2QuestionXwalk.a" class="py-name" href="#" onclick="return doclink('link-98', 'a', 'link-98');">a</a></tt> <tt class="py-op">=</tt> <tt id="link-99" class="py-name"><a title="portality.models" class="py-name" href="#" onclick="return doclink('link-99', 'models', 'link-11');">models</a></tt><tt class="py-op">.</tt><tt id="link-100" class="py-name"><a title="portality.models.article.Article" class="py-name" href="#" onclick="return doclink('link-100', 'Article', 'link-52');">Article</a></tt><tt class="py-op">.</tt><tt id="link-101" class="py-name" targets="Class Method portality.dao.DomainObject.pull()=portality.dao.DomainObject-class.html#pull,Method portality.models.oaipmh.OAIPMHArticle.pull()=portality.models.oaipmh.OAIPMHArticle-class.html#pull,Method portality.models.oaipmh.OAIPMHJournal.pull()=portality.models.oaipmh.OAIPMHJournal-class.html#pull"><a title="portality.dao.DomainObject.pull
portality.models.oaipmh.OAIPMHArticle.pull
portality.models.oaipmh.OAIPMHJournal.pull" class="py-name" href="#" onclick="return doclink('link-101', 'pull', 'link-101');">pull</a></tt><tt class="py-op">(</tt><tt class="py-name">article_id</tt><tt class="py-op">)</tt> </tt>
<a name="L125"></a><tt class="py-lineno">125</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt id="link-102" class="py-name"><a title="portality.journalcsv.Journal2QuestionXwalk.a
portality.reapplication.Suggestion2QuestionXwalk.a" class="py-name" href="#" onclick="return doclink('link-102', 'a', 'link-98');">a</a></tt> <tt class="py-keyword">is</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L126"></a><tt class="py-lineno">126</tt>  <tt class="py-line">        <tt id="link-103" class="py-name"><a title="portality.scripts.sync_doaj_records.abort" class="py-name" href="#" onclick="return doclink('link-103', 'abort', 'link-1');">abort</a></tt><tt class="py-op">(</tt><tt class="py-number">404</tt><tt class="py-op">)</tt> </tt>
<a name="L127"></a><tt class="py-lineno">127</tt>  <tt class="py-line">    <tt id="link-104" class="py-name" targets="Class Method portality.api.v1.bulk.applications.ApplicationsBulkApi.delete()=portality.api.v1.bulk.applications.ApplicationsBulkApi-class.html#delete,Class Method portality.api.v1.bulk.articles.ArticlesBulkApi.delete()=portality.api.v1.bulk.articles.ArticlesBulkApi-class.html#delete,Class Method portality.api.v1.crud.applications.ApplicationsCrudApi.delete()=portality.api.v1.crud.applications.ApplicationsCrudApi-class.html#delete,Class Method portality.api.v1.crud.articles.ArticlesCrudApi.delete()=portality.api.v1.crud.articles.ArticlesCrudApi-class.html#delete,Method portality.dao.DomainObject.delete()=portality.dao.DomainObject-class.html#delete"><a title="portality.api.v1.bulk.applications.ApplicationsBulkApi.delete
portality.api.v1.bulk.articles.ArticlesBulkApi.delete
portality.api.v1.crud.applications.ApplicationsCrudApi.delete
portality.api.v1.crud.articles.ArticlesCrudApi.delete
portality.dao.DomainObject.delete" class="py-name" href="#" onclick="return doclink('link-104', 'delete', 'link-104');">delete</a></tt> <tt class="py-op">=</tt> <tt class="py-name">request</tt><tt class="py-op">.</tt><tt id="link-105" class="py-name"><a title="portality.ordereddict.OrderedDict.values" class="py-name" href="#" onclick="return doclink('link-105', 'values', 'link-38');">values</a></tt><tt class="py-op">.</tt><tt class="py-name">get</tt><tt class="py-op">(</tt><tt class="py-string">"delete"</tt><tt class="py-op">,</tt> <tt class="py-string">"false"</tt><tt class="py-op">)</tt> </tt>
<a name="L128"></a><tt class="py-lineno">128</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt id="link-106" class="py-name"><a title="portality.api.v1.bulk.applications.ApplicationsBulkApi.delete
portality.api.v1.bulk.articles.ArticlesBulkApi.delete
portality.api.v1.crud.applications.ApplicationsCrudApi.delete
portality.api.v1.crud.articles.ArticlesCrudApi.delete
portality.dao.DomainObject.delete" class="py-name" href="#" onclick="return doclink('link-106', 'delete', 'link-104');">delete</a></tt> <tt class="py-op">!=</tt> <tt class="py-string">"true"</tt><tt class="py-op">:</tt> </tt>
<a name="L129"></a><tt class="py-lineno">129</tt>  <tt class="py-line">        <tt id="link-107" class="py-name"><a title="portality.scripts.sync_doaj_records.abort" class="py-name" href="#" onclick="return doclink('link-107', 'abort', 'link-1');">abort</a></tt><tt class="py-op">(</tt><tt class="py-number">400</tt><tt class="py-op">)</tt> </tt>
<a name="L130"></a><tt class="py-lineno">130</tt>  <tt class="py-line">    <tt id="link-108" class="py-name"><a title="portality.journalcsv.Journal2QuestionXwalk.a
portality.reapplication.Suggestion2QuestionXwalk.a" class="py-name" href="#" onclick="return doclink('link-108', 'a', 'link-98');">a</a></tt><tt class="py-op">.</tt><tt id="link-109" class="py-name"><a title="portality.models.article.Article.snapshot
portality.models.journal.Journal.snapshot" class="py-name" href="#" onclick="return doclink('link-109', 'snapshot', 'link-94');">snapshot</a></tt><tt class="py-op">(</tt><tt class="py-op">)</tt> </tt>
<a name="L131"></a><tt class="py-lineno">131</tt>  <tt class="py-line">    <tt id="link-110" class="py-name"><a title="portality.journalcsv.Journal2QuestionXwalk.a
portality.reapplication.Suggestion2QuestionXwalk.a" class="py-name" href="#" onclick="return doclink('link-110', 'a', 'link-98');">a</a></tt><tt class="py-op">.</tt><tt id="link-111" class="py-name"><a title="portality.api.v1.bulk.applications.ApplicationsBulkApi.delete
portality.api.v1.bulk.articles.ArticlesBulkApi.delete
portality.api.v1.crud.applications.ApplicationsCrudApi.delete
portality.api.v1.crud.articles.ArticlesCrudApi.delete
portality.dao.DomainObject.delete" class="py-name" href="#" onclick="return doclink('link-111', 'delete', 'link-104');">delete</a></tt><tt class="py-op">(</tt><tt class="py-op">)</tt> </tt>
<a name="L132"></a><tt class="py-lineno">132</tt>  <tt class="py-line">    <tt class="py-comment"># return a json response</tt> </tt>
<a name="L133"></a><tt class="py-lineno">133</tt>  <tt class="py-line">    <tt class="py-name">resp</tt> <tt class="py-op">=</tt> <tt class="py-name">make_response</tt><tt class="py-op">(</tt><tt id="link-112" class="py-name"><a title="portality.dao.DomainObject.json
portality.lib.dataobj.DataObj.json" class="py-name" href="#" onclick="return doclink('link-112', 'json', 'link-0');">json</a></tt><tt class="py-op">.</tt><tt class="py-name">dumps</tt><tt class="py-op">(</tt><tt class="py-op">{</tt><tt class="py-string">"success"</tt> <tt class="py-op">:</tt> <tt class="py-name">True</tt><tt class="py-op">}</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L134"></a><tt class="py-lineno">134</tt>  <tt class="py-line">    <tt class="py-name">resp</tt><tt class="py-op">.</tt><tt class="py-name">mimetype</tt> <tt class="py-op">=</tt> <tt class="py-string">"application/json"</tt> </tt>
<a name="L135"></a><tt class="py-lineno">135</tt>  <tt class="py-line">    <tt class="py-keyword">return</tt> <tt class="py-name">resp</tt> </tt>
</div><a name="L136"></a><tt class="py-lineno">136</tt>  <tt class="py-line"> </tt>
<a name="journal_page"></a><div id="journal_page-def"><a name="L137"></a><tt class="py-lineno">137</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">blueprint</tt><tt class="py-op">.</tt><tt class="py-name">route</tt><tt class="py-op">(</tt><tt class="py-string">"/journal/&lt;journal_id&gt;"</tt><tt class="py-op">,</tt> <tt class="py-name">methods</tt><tt class="py-op">=</tt><tt class="py-op">[</tt><tt class="py-string">"GET"</tt><tt class="py-op">,</tt> <tt class="py-string">"POST"</tt><tt class="py-op">]</tt><tt class="py-op">)</tt> </tt>
<a name="L138"></a><tt class="py-lineno">138</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">login_required</tt> </tt>
<a name="L139"></a><tt class="py-lineno">139</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">ssl_required</tt> </tt>
<a name="L140"></a><tt class="py-lineno">140</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">write_required</tt> </tt>
<a name="L141"></a><tt class="py-lineno">141</tt> <a class="py-toggle" href="#" id="journal_page-toggle" onclick="return toggle('journal_page');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="portality.view.admin-module.html#journal_page">journal_page</a><tt class="py-op">(</tt><tt class="py-param">journal_id</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="journal_page-collapsed" style="display:none;" pad="+++" indent="++++"></div><div id="journal_page-expanded"><a name="L142"></a><tt class="py-lineno">142</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-keyword">not</tt> <tt class="py-name">current_user</tt><tt class="py-op">.</tt><tt id="link-113" class="py-name"><a title="portality.authorise.Authorise.has_role
portality.models.account.Account.has_role" class="py-name" href="#" onclick="return doclink('link-113', 'has_role', 'link-33');">has_role</a></tt><tt class="py-op">(</tt><tt class="py-string">"edit_journal"</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L143"></a><tt class="py-lineno">143</tt>  <tt class="py-line">        <tt id="link-114" class="py-name"><a title="portality.scripts.sync_doaj_records.abort" class="py-name" href="#" onclick="return doclink('link-114', 'abort', 'link-1');">abort</a></tt><tt class="py-op">(</tt><tt class="py-number">401</tt><tt class="py-op">)</tt> </tt>
<a name="L144"></a><tt class="py-lineno">144</tt>  <tt class="py-line">    <tt class="py-name">ap</tt> <tt class="py-op">=</tt> <tt id="link-115" class="py-name"><a title="portality.models" class="py-name" href="#" onclick="return doclink('link-115', 'models', 'link-11');">models</a></tt><tt class="py-op">.</tt><tt id="link-116" class="py-name"><a title="portality.models.journal.Journal" class="py-name" href="#" onclick="return doclink('link-116', 'Journal', 'link-43');">Journal</a></tt><tt class="py-op">.</tt><tt id="link-117" class="py-name"><a title="portality.dao.DomainObject.pull
portality.models.oaipmh.OAIPMHArticle.pull
portality.models.oaipmh.OAIPMHJournal.pull" class="py-name" href="#" onclick="return doclink('link-117', 'pull', 'link-101');">pull</a></tt><tt class="py-op">(</tt><tt class="py-name">journal_id</tt><tt class="py-op">)</tt> </tt>
<a name="L145"></a><tt class="py-lineno">145</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">ap</tt> <tt class="py-keyword">is</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L146"></a><tt class="py-lineno">146</tt>  <tt class="py-line">        <tt id="link-118" class="py-name"><a title="portality.scripts.sync_doaj_records.abort" class="py-name" href="#" onclick="return doclink('link-118', 'abort', 'link-1');">abort</a></tt><tt class="py-op">(</tt><tt class="py-number">404</tt><tt class="py-op">)</tt> </tt>
<a name="L147"></a><tt class="py-lineno">147</tt>  <tt class="py-line"> </tt>
<a name="L148"></a><tt class="py-lineno">148</tt>  <tt class="py-line">    <tt class="py-comment"># attempt to get a lock on the object</tt> </tt>
<a name="L149"></a><tt class="py-lineno">149</tt>  <tt class="py-line">    <tt class="py-keyword">try</tt><tt class="py-op">:</tt> </tt>
<a name="L150"></a><tt class="py-lineno">150</tt>  <tt class="py-line">        <tt class="py-name">lockinfo</tt> <tt class="py-op">=</tt> <tt id="link-119" class="py-name"><a title="portality.lock
portality.lock.lock
portality.models.lock" class="py-name" href="#" onclick="return doclink('link-119', 'lock', 'link-17');">lock</a></tt><tt class="py-op">.</tt><tt id="link-120" class="py-name"><a title="portality.lock
portality.lock.lock
portality.models.lock" class="py-name" href="#" onclick="return doclink('link-120', 'lock', 'link-17');">lock</a></tt><tt class="py-op">(</tt><tt class="py-string">"journal"</tt><tt class="py-op">,</tt> <tt class="py-name">journal_id</tt><tt class="py-op">,</tt> <tt class="py-name">current_user</tt><tt class="py-op">.</tt><tt id="link-121" class="py-name" targets="Method portality.dao.DomainObject.id()=portality.dao.DomainObject-class.html#id,Variable portality.migrate.st2cl.cluster2.id=portality.migrate.st2cl.cluster2-module.html#id,Method portality.models.journal.JournalLikeObject.id()=portality.models.journal.JournalLikeObject-class.html#id"><a title="portality.dao.DomainObject.id
portality.migrate.st2cl.cluster2.id
portality.models.journal.JournalLikeObject.id" class="py-name" href="#" onclick="return doclink('link-121', 'id', 'link-121');">id</a></tt><tt class="py-op">)</tt> </tt>
<a name="L151"></a><tt class="py-lineno">151</tt>  <tt class="py-line">    <tt class="py-keyword">except</tt> <tt id="link-122" class="py-name"><a title="portality.lock
portality.lock.lock
portality.models.lock" class="py-name" href="#" onclick="return doclink('link-122', 'lock', 'link-17');">lock</a></tt><tt class="py-op">.</tt><tt id="link-123" class="py-name" targets="Class portality.lock.Locked=portality.lock.Locked-class.html"><a title="portality.lock.Locked" class="py-name" href="#" onclick="return doclink('link-123', 'Locked', 'link-123');">Locked</a></tt> <tt class="py-keyword">as</tt> <tt id="link-124" class="py-name" targets="Variable portality.datasets.l=portality.datasets-module.html#l"><a title="portality.datasets.l" class="py-name" href="#" onclick="return doclink('link-124', 'l', 'link-124');">l</a></tt><tt class="py-op">:</tt> </tt>
<a name="L152"></a><tt class="py-lineno">152</tt>  <tt class="py-line">        <tt class="py-keyword">return</tt> <tt id="link-125" class="py-name"><a title="portality.formcontext.formcontext.AssEdApplicationReview.render_template
portality.formcontext.formcontext.AssEdJournalReview.render_template
portality.formcontext.formcontext.EditorApplicationReview.render_template
portality.formcontext.formcontext.EditorJournalReview.render_template
portality.formcontext.formcontext.FormContext.render_template
portality.formcontext.formcontext.ManEdApplicationReview.render_template
portality.formcontext.formcontext.ManEdJournalReview.render_template
portality.formcontext.formcontext.PublisherCsvReApplication.render_template
portality.formcontext.formcontext.PublisherReApplication.render_template
portality.formcontext.formcontext.ReadOnlyJournal.render_template" class="py-name" href="#" onclick="return doclink('link-125', 'render_template', 'link-2');">render_template</a></tt><tt class="py-op">(</tt><tt class="py-string">"admin/journal_locked.html"</tt><tt class="py-op">,</tt> <tt id="link-126" class="py-name" targets="Module portality.api.v1.data_objects.journal=portality.api.v1.data_objects.journal-module.html,Method portality.models.account.Account.journal()=portality.models.account.Account-class.html#journal,Module portality.models.journal=portality.models.journal-module.html"><a title="portality.api.v1.data_objects.journal
portality.models.account.Account.journal
portality.models.journal" class="py-name" href="#" onclick="return doclink('link-126', 'journal', 'link-126');">journal</a></tt><tt class="py-op">=</tt><tt class="py-name">ap</tt><tt class="py-op">,</tt> <tt id="link-127" class="py-name"><a title="portality.lock
portality.lock.lock
portality.models.lock" class="py-name" href="#" onclick="return doclink('link-127', 'lock', 'link-17');">lock</a></tt><tt class="py-op">=</tt><tt id="link-128" class="py-name"><a title="portality.datasets.l" class="py-name" href="#" onclick="return doclink('link-128', 'l', 'link-124');">l</a></tt><tt class="py-op">.</tt><tt id="link-129" class="py-name"><a title="portality.lock
portality.lock.lock
portality.models.lock" class="py-name" href="#" onclick="return doclink('link-129', 'lock', 'link-17');">lock</a></tt><tt class="py-op">,</tt> <tt class="py-name">edit_journal_page</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">)</tt> </tt>
<a name="L153"></a><tt class="py-lineno">153</tt>  <tt class="py-line"> </tt>
<a name="L154"></a><tt class="py-lineno">154</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">request</tt><tt class="py-op">.</tt><tt class="py-name">method</tt> <tt class="py-op">==</tt> <tt class="py-string">"GET"</tt><tt class="py-op">:</tt> </tt>
<a name="L155"></a><tt class="py-lineno">155</tt>  <tt class="py-line">        <tt class="py-name">fc</tt> <tt class="py-op">=</tt> <tt id="link-130" class="py-name"><a title="portality.formcontext
portality.formcontext.formcontext" class="py-name" href="#" onclick="return doclink('link-130', 'formcontext', 'link-14');">formcontext</a></tt><tt class="py-op">.</tt><tt id="link-131" class="py-name" targets="Class portality.formcontext.formcontext.JournalFormFactory=portality.formcontext.formcontext.JournalFormFactory-class.html"><a title="portality.formcontext.formcontext.JournalFormFactory" class="py-name" href="#" onclick="return doclink('link-131', 'JournalFormFactory', 'link-131');">JournalFormFactory</a></tt><tt class="py-op">.</tt><tt id="link-132" class="py-name" targets="Class Method portality.formcontext.formcontext.ApplicationFormFactory.get_form_context()=portality.formcontext.formcontext.ApplicationFormFactory-class.html#get_form_context,Class Method portality.formcontext.formcontext.JournalFormFactory.get_form_context()=portality.formcontext.formcontext.JournalFormFactory-class.html#get_form_context"><a title="portality.formcontext.formcontext.ApplicationFormFactory.get_form_context
portality.formcontext.formcontext.JournalFormFactory.get_form_context" class="py-name" href="#" onclick="return doclink('link-132', 'get_form_context', 'link-132');">get_form_context</a></tt><tt class="py-op">(</tt><tt id="link-133" class="py-name" targets="Method portality.models.account.Account.role()=portality.models.account.Account-class.html#role"><a title="portality.models.account.Account.role" class="py-name" href="#" onclick="return doclink('link-133', 'role', 'link-133');">role</a></tt><tt class="py-op">=</tt><tt class="py-string">"admin"</tt><tt class="py-op">,</tt> <tt id="link-134" class="py-name" targets="Method portality.formcontext.formcontext.FormContext.source()=portality.formcontext.formcontext.FormContext-class.html#source"><a title="portality.formcontext.formcontext.FormContext.source" class="py-name" href="#" onclick="return doclink('link-134', 'source', 'link-134');">source</a></tt><tt class="py-op">=</tt><tt class="py-name">ap</tt><tt class="py-op">)</tt> </tt>
<a name="L156"></a><tt class="py-lineno">156</tt>  <tt class="py-line">        <tt class="py-keyword">return</tt> <tt class="py-name">fc</tt><tt class="py-op">.</tt><tt id="link-135" class="py-name"><a title="portality.formcontext.formcontext.AssEdApplicationReview.render_template
portality.formcontext.formcontext.AssEdJournalReview.render_template
portality.formcontext.formcontext.EditorApplicationReview.render_template
portality.formcontext.formcontext.EditorJournalReview.render_template
portality.formcontext.formcontext.FormContext.render_template
portality.formcontext.formcontext.ManEdApplicationReview.render_template
portality.formcontext.formcontext.ManEdJournalReview.render_template
portality.formcontext.formcontext.PublisherCsvReApplication.render_template
portality.formcontext.formcontext.PublisherReApplication.render_template
portality.formcontext.formcontext.ReadOnlyJournal.render_template" class="py-name" href="#" onclick="return doclink('link-135', 'render_template', 'link-2');">render_template</a></tt><tt class="py-op">(</tt><tt class="py-name">edit_journal_page</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">,</tt> <tt id="link-136" class="py-name"><a title="portality.lock
portality.lock.lock
portality.models.lock" class="py-name" href="#" onclick="return doclink('link-136', 'lock', 'link-17');">lock</a></tt><tt class="py-op">=</tt><tt class="py-name">lockinfo</tt><tt class="py-op">)</tt> </tt>
<a name="L157"></a><tt class="py-lineno">157</tt>  <tt class="py-line">    <tt class="py-keyword">elif</tt> <tt class="py-name">request</tt><tt class="py-op">.</tt><tt class="py-name">method</tt> <tt class="py-op">==</tt> <tt class="py-string">"POST"</tt><tt class="py-op">:</tt> </tt>
<a name="L158"></a><tt class="py-lineno">158</tt>  <tt class="py-line">        <tt class="py-name">fc</tt> <tt class="py-op">=</tt> <tt id="link-137" class="py-name"><a title="portality.formcontext
portality.formcontext.formcontext" class="py-name" href="#" onclick="return doclink('link-137', 'formcontext', 'link-14');">formcontext</a></tt><tt class="py-op">.</tt><tt id="link-138" class="py-name"><a title="portality.formcontext.formcontext.JournalFormFactory" class="py-name" href="#" onclick="return doclink('link-138', 'JournalFormFactory', 'link-131');">JournalFormFactory</a></tt><tt class="py-op">.</tt><tt id="link-139" class="py-name"><a title="portality.formcontext.formcontext.ApplicationFormFactory.get_form_context
portality.formcontext.formcontext.JournalFormFactory.get_form_context" class="py-name" href="#" onclick="return doclink('link-139', 'get_form_context', 'link-132');">get_form_context</a></tt><tt class="py-op">(</tt><tt id="link-140" class="py-name"><a title="portality.models.account.Account.role" class="py-name" href="#" onclick="return doclink('link-140', 'role', 'link-133');">role</a></tt><tt class="py-op">=</tt><tt class="py-string">"admin"</tt><tt class="py-op">,</tt> <tt id="link-141" class="py-name" targets="Method portality.formcontext.formcontext.FormContext.form_data()=portality.formcontext.formcontext.FormContext-class.html#form_data"><a title="portality.formcontext.formcontext.FormContext.form_data" class="py-name" href="#" onclick="return doclink('link-141', 'form_data', 'link-141');">form_data</a></tt><tt class="py-op">=</tt><tt class="py-name">request</tt><tt class="py-op">.</tt><tt id="link-142" class="py-name" targets="Method portality.formcontext.formcontext.FormContext.form()=portality.formcontext.formcontext.FormContext-class.html#form,Function portality.lib.modeldoc.form()=portality.lib.modeldoc-module.html#form"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-142', 'form', 'link-142');">form</a></tt><tt class="py-op">,</tt> <tt id="link-143" class="py-name"><a title="portality.formcontext.formcontext.FormContext.source" class="py-name" href="#" onclick="return doclink('link-143', 'source', 'link-134');">source</a></tt><tt class="py-op">=</tt><tt class="py-name">ap</tt><tt class="py-op">)</tt> </tt>
<a name="L159"></a><tt class="py-lineno">159</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">fc</tt><tt class="py-op">.</tt><tt id="link-144" class="py-name" targets="Method portality.article.DOAJXWalk.validate()=portality.article.DOAJXWalk-class.html#validate,Method portality.formcontext.formcontext.FormContext.validate()=portality.formcontext.formcontext.FormContext-class.html#validate,Method portality.formcontext.formcontext.ManEdJournalReview.validate()=portality.formcontext.formcontext.ManEdJournalReview-class.html#validate,Module portality.formcontext.validate=portality.formcontext.validate-module.html,Method portality.lib.dataobj.DataObj.validate()=portality.lib.dataobj.DataObj-class.html#validate,Function portality.lib.dataobj.validate()=portality.lib.dataobj-module.html#validate"><a title="portality.article.DOAJXWalk.validate
portality.formcontext.formcontext.FormContext.validate
portality.formcontext.formcontext.ManEdJournalReview.validate
portality.formcontext.validate
portality.lib.dataobj.DataObj.validate
portality.lib.dataobj.validate" class="py-name" href="#" onclick="return doclink('link-144', 'validate', 'link-144');">validate</a></tt><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L160"></a><tt class="py-lineno">160</tt>  <tt class="py-line">            <tt class="py-keyword">try</tt><tt class="py-op">:</tt> </tt>
<a name="L161"></a><tt class="py-lineno">161</tt>  <tt class="py-line">                <tt class="py-name">fc</tt><tt class="py-op">.</tt><tt id="link-145" class="py-name" targets="Method portality.formcontext.formcontext.AssEdApplicationReview.finalise()=portality.formcontext.formcontext.AssEdApplicationReview-class.html#finalise,Method portality.formcontext.formcontext.AssEdJournalReview.finalise()=portality.formcontext.formcontext.AssEdJournalReview-class.html#finalise,Method portality.formcontext.formcontext.EditorApplicationReview.finalise()=portality.formcontext.formcontext.EditorApplicationReview-class.html#finalise,Method portality.formcontext.formcontext.EditorJournalReview.finalise()=portality.formcontext.formcontext.EditorJournalReview-class.html#finalise,Method portality.formcontext.formcontext.FormContext.finalise()=portality.formcontext.formcontext.FormContext-class.html#finalise,Method portality.formcontext.formcontext.ManEdApplicationReview.finalise()=portality.formcontext.formcontext.ManEdApplicationReview-class.html#finalise,Method portality.formcontext.formcontext.ManEdJournalReview.finalise()=portality.formcontext.formcontext.ManEdJournalReview-class.html#finalise,Method portality.formcontext.formcontext.PublicApplication.finalise()=portality.formcontext.formcontext.PublicApplication-class.html#finalise,Method portality.formcontext.formcontext.PublisherCsvReApplication.finalise()=portality.formcontext.formcontext.PublisherCsvReApplication-class.html#finalise,Method portality.formcontext.formcontext.PublisherReApplication.finalise()=portality.formcontext.formcontext.PublisherReApplication-class.html#finalise,Method portality.formcontext.formcontext.ReadOnlyJournal.finalise()=portality.formcontext.formcontext.ReadOnlyJournal-class.html#finalise"><a title="portality.formcontext.formcontext.AssEdApplicationReview.finalise
portality.formcontext.formcontext.AssEdJournalReview.finalise
portality.formcontext.formcontext.EditorApplicationReview.finalise
portality.formcontext.formcontext.EditorJournalReview.finalise
portality.formcontext.formcontext.FormContext.finalise
portality.formcontext.formcontext.ManEdApplicationReview.finalise
portality.formcontext.formcontext.ManEdJournalReview.finalise
portality.formcontext.formcontext.PublicApplication.finalise
portality.formcontext.formcontext.PublisherCsvReApplication.finalise
portality.formcontext.formcontext.PublisherReApplication.finalise
portality.formcontext.formcontext.ReadOnlyJournal.finalise" class="py-name" href="#" onclick="return doclink('link-145', 'finalise', 'link-145');">finalise</a></tt><tt class="py-op">(</tt><tt class="py-op">)</tt> </tt>
<a name="L162"></a><tt class="py-lineno">162</tt>  <tt class="py-line">                <tt class="py-name">flash</tt><tt class="py-op">(</tt><tt class="py-string">'Journal updated.'</tt><tt class="py-op">,</tt> <tt class="py-string">'success'</tt><tt class="py-op">)</tt> </tt>
<a name="L163"></a><tt class="py-lineno">163</tt>  <tt class="py-line">                <tt class="py-keyword">for</tt> <tt id="link-146" class="py-name"><a title="portality.journalcsv.Journal2QuestionXwalk.a
portality.reapplication.Suggestion2QuestionXwalk.a" class="py-name" href="#" onclick="return doclink('link-146', 'a', 'link-98');">a</a></tt> <tt class="py-keyword">in</tt> <tt class="py-name">fc</tt><tt class="py-op">.</tt><tt id="link-147" class="py-name" targets="Method portality.formcontext.formcontext.FormContext.alert()=portality.formcontext.formcontext.FormContext-class.html#alert"><a title="portality.formcontext.formcontext.FormContext.alert" class="py-name" href="#" onclick="return doclink('link-147', 'alert', 'link-147');">alert</a></tt><tt class="py-op">:</tt> </tt>
<a name="L164"></a><tt class="py-lineno">164</tt>  <tt class="py-line">                    <tt id="link-148" class="py-name"><a title="portality.util.flash_with_url" class="py-name" href="#" onclick="return doclink('link-148', 'flash_with_url', 'link-20');">flash_with_url</a></tt><tt class="py-op">(</tt><tt id="link-149" class="py-name"><a title="portality.journalcsv.Journal2QuestionXwalk.a
portality.reapplication.Suggestion2QuestionXwalk.a" class="py-name" href="#" onclick="return doclink('link-149', 'a', 'link-98');">a</a></tt><tt class="py-op">,</tt> <tt class="py-string">"success"</tt><tt class="py-op">)</tt> </tt>
<a name="L165"></a><tt class="py-lineno">165</tt>  <tt class="py-line">                <tt class="py-keyword">return</tt> <tt id="link-150" class="py-name"><a title="portality.view.account.RedirectForm.redirect" class="py-name" href="#" onclick="return doclink('link-150', 'redirect', 'link-3');">redirect</a></tt><tt class="py-op">(</tt><tt class="py-name">url_for</tt><tt class="py-op">(</tt><tt class="py-string">"admin.journal_page"</tt><tt class="py-op">,</tt> <tt class="py-name">journal_id</tt><tt class="py-op">=</tt><tt class="py-name">ap</tt><tt class="py-op">.</tt><tt id="link-151" class="py-name"><a title="portality.dao.DomainObject.id
portality.migrate.st2cl.cluster2.id
portality.models.journal.JournalLikeObject.id" class="py-name" href="#" onclick="return doclink('link-151', 'id', 'link-121');">id</a></tt><tt class="py-op">,</tt> <tt class="py-name">_anchor</tt><tt class="py-op">=</tt><tt class="py-string">'done'</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L166"></a><tt class="py-lineno">166</tt>  <tt class="py-line">            <tt class="py-keyword">except</tt> <tt id="link-152" class="py-name"><a title="portality.formcontext
portality.formcontext.formcontext" class="py-name" href="#" onclick="return doclink('link-152', 'formcontext', 'link-14');">formcontext</a></tt><tt class="py-op">.</tt><tt id="link-153" class="py-name" targets="Class portality.formcontext.formcontext.FormContextException=portality.formcontext.formcontext.FormContextException-class.html"><a title="portality.formcontext.formcontext.FormContextException" class="py-name" href="#" onclick="return doclink('link-153', 'FormContextException', 'link-153');">FormContextException</a></tt> <tt class="py-keyword">as</tt> <tt class="py-name">e</tt><tt class="py-op">:</tt> </tt>
<a name="L167"></a><tt class="py-lineno">167</tt>  <tt class="py-line">                <tt class="py-name">flash</tt><tt class="py-op">(</tt><tt class="py-name">e</tt><tt class="py-op">.</tt><tt id="link-154" class="py-name" targets="Variable portality.view.forms.ContactUs.message=portality.view.forms.ContactUs-class.html#message"><a title="portality.view.forms.ContactUs.message" class="py-name" href="#" onclick="return doclink('link-154', 'message', 'link-154');">message</a></tt><tt class="py-op">)</tt> </tt>
<a name="L168"></a><tt class="py-lineno">168</tt>  <tt class="py-line">                <tt class="py-keyword">return</tt> <tt id="link-155" class="py-name"><a title="portality.view.account.RedirectForm.redirect" class="py-name" href="#" onclick="return doclink('link-155', 'redirect', 'link-3');">redirect</a></tt><tt class="py-op">(</tt><tt class="py-name">url_for</tt><tt class="py-op">(</tt><tt class="py-string">"admin.journal_page"</tt><tt class="py-op">,</tt> <tt class="py-name">journal_id</tt><tt class="py-op">=</tt><tt class="py-name">ap</tt><tt class="py-op">.</tt><tt id="link-156" class="py-name"><a title="portality.dao.DomainObject.id
portality.migrate.st2cl.cluster2.id
portality.models.journal.JournalLikeObject.id" class="py-name" href="#" onclick="return doclink('link-156', 'id', 'link-121');">id</a></tt><tt class="py-op">,</tt> <tt class="py-name">_anchor</tt><tt class="py-op">=</tt><tt class="py-string">'cannot_edit'</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L169"></a><tt class="py-lineno">169</tt>  <tt class="py-line">        <tt class="py-keyword">else</tt><tt class="py-op">:</tt> </tt>
<a name="L170"></a><tt class="py-lineno">170</tt>  <tt class="py-line">            <tt class="py-keyword">return</tt> <tt class="py-name">fc</tt><tt class="py-op">.</tt><tt id="link-157" class="py-name"><a title="portality.formcontext.formcontext.AssEdApplicationReview.render_template
portality.formcontext.formcontext.AssEdJournalReview.render_template
portality.formcontext.formcontext.EditorApplicationReview.render_template
portality.formcontext.formcontext.EditorJournalReview.render_template
portality.formcontext.formcontext.FormContext.render_template
portality.formcontext.formcontext.ManEdApplicationReview.render_template
portality.formcontext.formcontext.ManEdJournalReview.render_template
portality.formcontext.formcontext.PublisherCsvReApplication.render_template
portality.formcontext.formcontext.PublisherReApplication.render_template
portality.formcontext.formcontext.ReadOnlyJournal.render_template" class="py-name" href="#" onclick="return doclink('link-157', 'render_template', 'link-2');">render_template</a></tt><tt class="py-op">(</tt><tt class="py-name">edit_journal_page</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">,</tt> <tt id="link-158" class="py-name"><a title="portality.lock
portality.lock.lock
portality.models.lock" class="py-name" href="#" onclick="return doclink('link-158', 'lock', 'link-17');">lock</a></tt><tt class="py-op">=</tt><tt class="py-name">lockinfo</tt><tt class="py-op">)</tt> </tt>
</div><a name="L171"></a><tt class="py-lineno">171</tt>  <tt class="py-line"> </tt>
<a name="journal_activate"></a><div id="journal_activate-def"><a name="L172"></a><tt class="py-lineno">172</tt>  <tt class="py-line"> </tt>
<a name="L173"></a><tt class="py-lineno">173</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">blueprint</tt><tt class="py-op">.</tt><tt class="py-name">route</tt><tt class="py-op">(</tt><tt class="py-string">"/journal/&lt;journal_id&gt;/activate"</tt><tt class="py-op">,</tt> <tt class="py-name">methods</tt><tt class="py-op">=</tt><tt class="py-op">[</tt><tt class="py-string">"GET"</tt><tt class="py-op">,</tt> <tt class="py-string">"POST"</tt><tt class="py-op">]</tt><tt class="py-op">)</tt> </tt>
<a name="L174"></a><tt class="py-lineno">174</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">login_required</tt> </tt>
<a name="L175"></a><tt class="py-lineno">175</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">ssl_required</tt> </tt>
<a name="L176"></a><tt class="py-lineno">176</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">write_required</tt> </tt>
<a name="L177"></a><tt class="py-lineno">177</tt> <a class="py-toggle" href="#" id="journal_activate-toggle" onclick="return toggle('journal_activate');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="portality.view.admin-module.html#journal_activate">journal_activate</a><tt class="py-op">(</tt><tt class="py-param">journal_id</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="journal_activate-collapsed" style="display:none;" pad="+++" indent="++++"></div><div id="journal_activate-expanded"><a name="L178"></a><tt class="py-lineno">178</tt>  <tt class="py-line">    <tt class="py-name">j</tt> <tt class="py-op">=</tt> <tt id="link-159" class="py-name"><a title="portality.models" class="py-name" href="#" onclick="return doclink('link-159', 'models', 'link-11');">models</a></tt><tt class="py-op">.</tt><tt id="link-160" class="py-name"><a title="portality.models.journal.Journal" class="py-name" href="#" onclick="return doclink('link-160', 'Journal', 'link-43');">Journal</a></tt><tt class="py-op">.</tt><tt id="link-161" class="py-name"><a title="portality.dao.DomainObject.pull
portality.models.oaipmh.OAIPMHArticle.pull
portality.models.oaipmh.OAIPMHJournal.pull" class="py-name" href="#" onclick="return doclink('link-161', 'pull', 'link-101');">pull</a></tt><tt class="py-op">(</tt><tt class="py-name">journal_id</tt><tt class="py-op">)</tt> </tt>
<a name="L179"></a><tt class="py-lineno">179</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">j</tt> <tt class="py-keyword">is</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L180"></a><tt class="py-lineno">180</tt>  <tt class="py-line">        <tt id="link-162" class="py-name"><a title="portality.scripts.sync_doaj_records.abort" class="py-name" href="#" onclick="return doclink('link-162', 'abort', 'link-1');">abort</a></tt><tt class="py-op">(</tt><tt class="py-number">404</tt><tt class="py-op">)</tt> </tt>
<a name="L181"></a><tt class="py-lineno">181</tt>  <tt class="py-line">    <tt class="py-name">j</tt><tt class="py-op">.</tt><tt id="link-163" class="py-name" targets="Method portality.models.article.Article.bibjson()=portality.models.article.Article-class.html#bibjson,Module portality.models.bibjson=portality.models.bibjson-module.html,Method portality.models.journal.JournalLikeObject.bibjson()=portality.models.journal.JournalLikeObject-class.html#bibjson"><a title="portality.models.article.Article.bibjson
portality.models.bibjson
portality.models.journal.JournalLikeObject.bibjson" class="py-name" href="#" onclick="return doclink('link-163', 'bibjson', 'link-163');">bibjson</a></tt><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">.</tt><tt id="link-164" class="py-name" targets="Method portality.models.journal.JournalBibJSON.active()=portality.models.journal.JournalBibJSON-class.html#active"><a title="portality.models.journal.JournalBibJSON.active" class="py-name" href="#" onclick="return doclink('link-164', 'active', 'link-164');">active</a></tt> <tt class="py-op">=</tt> <tt class="py-name">True</tt> </tt>
<a name="L182"></a><tt class="py-lineno">182</tt>  <tt class="py-line">    <tt class="py-name">j</tt><tt class="py-op">.</tt><tt id="link-165" class="py-name" targets="Method portality.models.article.Article.set_in_doaj()=portality.models.article.Article-class.html#set_in_doaj,Method portality.models.journal.Journal.set_in_doaj()=portality.models.journal.Journal-class.html#set_in_doaj"><a title="portality.models.article.Article.set_in_doaj
portality.models.journal.Journal.set_in_doaj" class="py-name" href="#" onclick="return doclink('link-165', 'set_in_doaj', 'link-165');">set_in_doaj</a></tt><tt class="py-op">(</tt><tt class="py-name">True</tt><tt class="py-op">)</tt> </tt>
<a name="L183"></a><tt class="py-lineno">183</tt>  <tt class="py-line">    <tt class="py-name">j</tt><tt class="py-op">.</tt><tt id="link-166" class="py-name" targets="Method portality.clcsv.ClCsv.save()=portality.clcsv.ClCsv-class.html#save,Method portality.dao.DomainObject.save()=portality.dao.DomainObject-class.html#save,Method portality.models.article.Article.save()=portality.models.article.Article-class.html#save,Method portality.models.history.History.save()=portality.models.history.History-class.html#save,Method portality.models.journal.Journal.save()=portality.models.journal.Journal-class.html#save,Method portality.models.lcc.LCC.save()=portality.models.lcc.LCC-class.html#save,Method portality.models.suggestion.Suggestion.save()=portality.models.suggestion.Suggestion-class.html#save,Function portality.scripts.prepare_delete_request.save()=portality.scripts.prepare_delete_request-module.html#save"><a title="portality.clcsv.ClCsv.save
portality.dao.DomainObject.save
portality.models.article.Article.save
portality.models.history.History.save
portality.models.journal.Journal.save
portality.models.lcc.LCC.save
portality.models.suggestion.Suggestion.save
portality.scripts.prepare_delete_request.save" class="py-name" href="#" onclick="return doclink('link-166', 'save', 'link-166');">save</a></tt><tt class="py-op">(</tt><tt class="py-op">)</tt> </tt>
<a name="L184"></a><tt class="py-lineno">184</tt>  <tt class="py-line">    <tt class="py-name">j</tt><tt class="py-op">.</tt><tt id="link-167" class="py-name" targets="Method portality.models.journal.Journal.propagate_in_doaj_status_to_articles()=portality.models.journal.Journal-class.html#propagate_in_doaj_status_to_articles"><a title="portality.models.journal.Journal.propagate_in_doaj_status_to_articles" class="py-name" href="#" onclick="return doclink('link-167', 'propagate_in_doaj_status_to_articles', 'link-167');">propagate_in_doaj_status_to_articles</a></tt><tt class="py-op">(</tt><tt class="py-op">)</tt>  <tt class="py-comment"># will save each article, could take a while</tt> </tt>
<a name="L185"></a><tt class="py-lineno">185</tt>  <tt class="py-line">    <tt class="py-keyword">return</tt> <tt id="link-168" class="py-name"><a title="portality.view.account.RedirectForm.redirect" class="py-name" href="#" onclick="return doclink('link-168', 'redirect', 'link-3');">redirect</a></tt><tt class="py-op">(</tt><tt class="py-name">url_for</tt><tt class="py-op">(</tt><tt class="py-string">'.journal_page'</tt><tt class="py-op">,</tt> <tt class="py-name">journal_id</tt><tt class="py-op">=</tt><tt class="py-name">journal_id</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
</div><a name="L186"></a><tt class="py-lineno">186</tt>  <tt class="py-line"> </tt>
<a name="journal_deactivate"></a><div id="journal_deactivate-def"><a name="L187"></a><tt class="py-lineno">187</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">blueprint</tt><tt class="py-op">.</tt><tt class="py-name">route</tt><tt class="py-op">(</tt><tt class="py-string">"/journal/&lt;journal_id&gt;/deactivate"</tt><tt class="py-op">,</tt> <tt class="py-name">methods</tt><tt class="py-op">=</tt><tt class="py-op">[</tt><tt class="py-string">"GET"</tt><tt class="py-op">,</tt> <tt class="py-string">"POST"</tt><tt class="py-op">]</tt><tt class="py-op">)</tt> </tt>
<a name="L188"></a><tt class="py-lineno">188</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">login_required</tt> </tt>
<a name="L189"></a><tt class="py-lineno">189</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">ssl_required</tt> </tt>
<a name="L190"></a><tt class="py-lineno">190</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">write_required</tt> </tt>
<a name="L191"></a><tt class="py-lineno">191</tt> <a class="py-toggle" href="#" id="journal_deactivate-toggle" onclick="return toggle('journal_deactivate');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="portality.view.admin-module.html#journal_deactivate">journal_deactivate</a><tt class="py-op">(</tt><tt class="py-param">journal_id</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="journal_deactivate-collapsed" style="display:none;" pad="+++" indent="++++"></div><div id="journal_deactivate-expanded"><a name="L192"></a><tt class="py-lineno">192</tt>  <tt class="py-line">    <tt class="py-name">j</tt> <tt class="py-op">=</tt> <tt id="link-169" class="py-name"><a title="portality.models" class="py-name" href="#" onclick="return doclink('link-169', 'models', 'link-11');">models</a></tt><tt class="py-op">.</tt><tt id="link-170" class="py-name"><a title="portality.models.journal.Journal" class="py-name" href="#" onclick="return doclink('link-170', 'Journal', 'link-43');">Journal</a></tt><tt class="py-op">.</tt><tt id="link-171" class="py-name"><a title="portality.dao.DomainObject.pull
portality.models.oaipmh.OAIPMHArticle.pull
portality.models.oaipmh.OAIPMHJournal.pull" class="py-name" href="#" onclick="return doclink('link-171', 'pull', 'link-101');">pull</a></tt><tt class="py-op">(</tt><tt class="py-name">journal_id</tt><tt class="py-op">)</tt> </tt>
<a name="L193"></a><tt class="py-lineno">193</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">j</tt> <tt class="py-keyword">is</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L194"></a><tt class="py-lineno">194</tt>  <tt class="py-line">        <tt id="link-172" class="py-name"><a title="portality.scripts.sync_doaj_records.abort" class="py-name" href="#" onclick="return doclink('link-172', 'abort', 'link-1');">abort</a></tt><tt class="py-op">(</tt><tt class="py-number">404</tt><tt class="py-op">)</tt> </tt>
<a name="L195"></a><tt class="py-lineno">195</tt>  <tt class="py-line">    <tt class="py-name">j</tt><tt class="py-op">.</tt><tt id="link-173" class="py-name"><a title="portality.models.article.Article.bibjson
portality.models.bibjson
portality.models.journal.JournalLikeObject.bibjson" class="py-name" href="#" onclick="return doclink('link-173', 'bibjson', 'link-163');">bibjson</a></tt><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">.</tt><tt id="link-174" class="py-name"><a title="portality.models.journal.JournalBibJSON.active" class="py-name" href="#" onclick="return doclink('link-174', 'active', 'link-164');">active</a></tt> <tt class="py-op">=</tt> <tt class="py-name">False</tt> </tt>
<a name="L196"></a><tt class="py-lineno">196</tt>  <tt class="py-line">    <tt class="py-name">j</tt><tt class="py-op">.</tt><tt id="link-175" class="py-name"><a title="portality.models.article.Article.set_in_doaj
portality.models.journal.Journal.set_in_doaj" class="py-name" href="#" onclick="return doclink('link-175', 'set_in_doaj', 'link-165');">set_in_doaj</a></tt><tt class="py-op">(</tt><tt class="py-name">False</tt><tt class="py-op">)</tt> </tt>
<a name="L197"></a><tt class="py-lineno">197</tt>  <tt class="py-line">    <tt class="py-name">j</tt><tt class="py-op">.</tt><tt id="link-176" class="py-name"><a title="portality.clcsv.ClCsv.save
portality.dao.DomainObject.save
portality.models.article.Article.save
portality.models.history.History.save
portality.models.journal.Journal.save
portality.models.lcc.LCC.save
portality.models.suggestion.Suggestion.save
portality.scripts.prepare_delete_request.save" class="py-name" href="#" onclick="return doclink('link-176', 'save', 'link-166');">save</a></tt><tt class="py-op">(</tt><tt class="py-op">)</tt> </tt>
<a name="L198"></a><tt class="py-lineno">198</tt>  <tt class="py-line">    <tt class="py-name">j</tt><tt class="py-op">.</tt><tt id="link-177" class="py-name"><a title="portality.models.journal.Journal.propagate_in_doaj_status_to_articles" class="py-name" href="#" onclick="return doclink('link-177', 'propagate_in_doaj_status_to_articles', 'link-167');">propagate_in_doaj_status_to_articles</a></tt><tt class="py-op">(</tt><tt class="py-op">)</tt>  <tt class="py-comment"># will save each article, could take a while</tt> </tt>
<a name="L199"></a><tt class="py-lineno">199</tt>  <tt class="py-line">    <tt class="py-keyword">return</tt> <tt id="link-178" class="py-name"><a title="portality.view.account.RedirectForm.redirect" class="py-name" href="#" onclick="return doclink('link-178', 'redirect', 'link-3');">redirect</a></tt><tt class="py-op">(</tt><tt class="py-name">url_for</tt><tt class="py-op">(</tt><tt class="py-string">'.journal_page'</tt><tt class="py-op">,</tt> <tt class="py-name">journal_id</tt><tt class="py-op">=</tt><tt class="py-name">journal_id</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
</div><a name="L200"></a><tt class="py-lineno">200</tt>  <tt class="py-line"> </tt>
<a name="journal_continue"></a><div id="journal_continue-def"><a name="L201"></a><tt class="py-lineno">201</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">blueprint</tt><tt class="py-op">.</tt><tt class="py-name">route</tt><tt class="py-op">(</tt><tt class="py-string">"/journal/&lt;journal_id&gt;/continue"</tt><tt class="py-op">,</tt> <tt class="py-name">methods</tt><tt class="py-op">=</tt><tt class="py-op">[</tt><tt class="py-string">"GET"</tt><tt class="py-op">,</tt> <tt class="py-string">"POST"</tt><tt class="py-op">]</tt><tt class="py-op">)</tt> </tt>
<a name="L202"></a><tt class="py-lineno">202</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">login_required</tt> </tt>
<a name="L203"></a><tt class="py-lineno">203</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">ssl_required</tt> </tt>
<a name="L204"></a><tt class="py-lineno">204</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">write_required</tt> </tt>
<a name="L205"></a><tt class="py-lineno">205</tt> <a class="py-toggle" href="#" id="journal_continue-toggle" onclick="return toggle('journal_continue');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="portality.view.admin-module.html#journal_continue">journal_continue</a><tt class="py-op">(</tt><tt class="py-param">journal_id</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="journal_continue-collapsed" style="display:none;" pad="+++" indent="++++"></div><div id="journal_continue-expanded"><a name="L206"></a><tt class="py-lineno">206</tt>  <tt class="py-line">    <tt class="py-name">j</tt> <tt class="py-op">=</tt> <tt id="link-179" class="py-name"><a title="portality.models" class="py-name" href="#" onclick="return doclink('link-179', 'models', 'link-11');">models</a></tt><tt class="py-op">.</tt><tt id="link-180" class="py-name"><a title="portality.models.journal.Journal" class="py-name" href="#" onclick="return doclink('link-180', 'Journal', 'link-43');">Journal</a></tt><tt class="py-op">.</tt><tt id="link-181" class="py-name"><a title="portality.dao.DomainObject.pull
portality.models.oaipmh.OAIPMHArticle.pull
portality.models.oaipmh.OAIPMHJournal.pull" class="py-name" href="#" onclick="return doclink('link-181', 'pull', 'link-101');">pull</a></tt><tt class="py-op">(</tt><tt class="py-name">journal_id</tt><tt class="py-op">)</tt> </tt>
<a name="L207"></a><tt class="py-lineno">207</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">j</tt> <tt class="py-keyword">is</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L208"></a><tt class="py-lineno">208</tt>  <tt class="py-line">        <tt id="link-182" class="py-name"><a title="portality.scripts.sync_doaj_records.abort" class="py-name" href="#" onclick="return doclink('link-182', 'abort', 'link-1');">abort</a></tt><tt class="py-op">(</tt><tt class="py-number">404</tt><tt class="py-op">)</tt> </tt>
<a name="L209"></a><tt class="py-lineno">209</tt>  <tt class="py-line"> </tt>
<a name="L210"></a><tt class="py-lineno">210</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">request</tt><tt class="py-op">.</tt><tt class="py-name">method</tt> <tt class="py-op">==</tt> <tt class="py-string">"GET"</tt><tt class="py-op">:</tt> </tt>
<a name="L211"></a><tt class="py-lineno">211</tt>  <tt class="py-line">        <tt id="link-183" class="py-name" targets="Method portality.models.lock.Lock.type()=portality.models.lock.Lock-class.html#type,Variable portality.view.forms.MakeContinuation.type=portality.view.forms.MakeContinuation-class.html#type"><a title="portality.models.lock.Lock.type
portality.view.forms.MakeContinuation.type" class="py-name" href="#" onclick="return doclink('link-183', 'type', 'link-183');">type</a></tt> <tt class="py-op">=</tt> <tt class="py-name">request</tt><tt class="py-op">.</tt><tt id="link-184" class="py-name"><a title="portality.ordereddict.OrderedDict.values" class="py-name" href="#" onclick="return doclink('link-184', 'values', 'link-38');">values</a></tt><tt class="py-op">.</tt><tt class="py-name">get</tt><tt class="py-op">(</tt><tt class="py-string">"type"</tt><tt class="py-op">)</tt> </tt>
<a name="L212"></a><tt class="py-lineno">212</tt>  <tt class="py-line">        <tt id="link-185" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-185', 'form', 'link-142');">form</a></tt> <tt class="py-op">=</tt> <tt id="link-186" class="py-name"><a title="portality.view.forms.MakeContinuation" class="py-name" href="#" onclick="return doclink('link-186', 'MakeContinuation', 'link-29');">MakeContinuation</a></tt><tt class="py-op">(</tt><tt class="py-op">)</tt> </tt>
<a name="L213"></a><tt class="py-lineno">213</tt>  <tt class="py-line">        <tt id="link-187" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-187', 'form', 'link-142');">form</a></tt><tt class="py-op">.</tt><tt id="link-188" class="py-name"><a title="portality.models.lock.Lock.type
portality.view.forms.MakeContinuation.type" class="py-name" href="#" onclick="return doclink('link-188', 'type', 'link-183');">type</a></tt><tt class="py-op">.</tt><tt class="py-name">data</tt> <tt class="py-op">=</tt> <tt id="link-189" class="py-name"><a title="portality.models.lock.Lock.type
portality.view.forms.MakeContinuation.type" class="py-name" href="#" onclick="return doclink('link-189', 'type', 'link-183');">type</a></tt> </tt>
<a name="L214"></a><tt class="py-lineno">214</tt>  <tt class="py-line">        <tt class="py-keyword">return</tt> <tt id="link-190" class="py-name"><a title="portality.formcontext.formcontext.AssEdApplicationReview.render_template
portality.formcontext.formcontext.AssEdJournalReview.render_template
portality.formcontext.formcontext.EditorApplicationReview.render_template
portality.formcontext.formcontext.EditorJournalReview.render_template
portality.formcontext.formcontext.FormContext.render_template
portality.formcontext.formcontext.ManEdApplicationReview.render_template
portality.formcontext.formcontext.ManEdJournalReview.render_template
portality.formcontext.formcontext.PublisherCsvReApplication.render_template
portality.formcontext.formcontext.PublisherReApplication.render_template
portality.formcontext.formcontext.ReadOnlyJournal.render_template" class="py-name" href="#" onclick="return doclink('link-190', 'render_template', 'link-2');">render_template</a></tt><tt class="py-op">(</tt><tt class="py-string">"admin/continuation.html"</tt><tt class="py-op">,</tt> <tt id="link-191" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-191', 'form', 'link-142');">form</a></tt><tt class="py-op">=</tt><tt id="link-192" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-192', 'form', 'link-142');">form</a></tt><tt class="py-op">,</tt> <tt class="py-name">current</tt><tt class="py-op">=</tt><tt class="py-name">j</tt><tt class="py-op">)</tt> </tt>
<a name="L215"></a><tt class="py-lineno">215</tt>  <tt class="py-line"> </tt>
<a name="L216"></a><tt class="py-lineno">216</tt>  <tt class="py-line">    <tt class="py-keyword">elif</tt> <tt class="py-name">request</tt><tt class="py-op">.</tt><tt class="py-name">method</tt> <tt class="py-op">==</tt> <tt class="py-string">"POST"</tt><tt class="py-op">:</tt> </tt>
<a name="L217"></a><tt class="py-lineno">217</tt>  <tt class="py-line">        <tt id="link-193" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-193', 'form', 'link-142');">form</a></tt> <tt class="py-op">=</tt> <tt id="link-194" class="py-name"><a title="portality.view.forms.MakeContinuation" class="py-name" href="#" onclick="return doclink('link-194', 'MakeContinuation', 'link-29');">MakeContinuation</a></tt><tt class="py-op">(</tt><tt class="py-name">request</tt><tt class="py-op">.</tt><tt id="link-195" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-195', 'form', 'link-142');">form</a></tt><tt class="py-op">)</tt> </tt>
<a name="L218"></a><tt class="py-lineno">218</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-keyword">not</tt> <tt id="link-196" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-196', 'form', 'link-142');">form</a></tt><tt class="py-op">.</tt><tt id="link-197" class="py-name"><a title="portality.article.DOAJXWalk.validate
portality.formcontext.formcontext.FormContext.validate
portality.formcontext.formcontext.ManEdJournalReview.validate
portality.formcontext.validate
portality.lib.dataobj.DataObj.validate
portality.lib.dataobj.validate" class="py-name" href="#" onclick="return doclink('link-197', 'validate', 'link-144');">validate</a></tt><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L219"></a><tt class="py-lineno">219</tt>  <tt class="py-line">            <tt class="py-keyword">return</tt> <tt id="link-198" class="py-name"><a title="portality.formcontext.formcontext.AssEdApplicationReview.render_template
portality.formcontext.formcontext.AssEdJournalReview.render_template
portality.formcontext.formcontext.EditorApplicationReview.render_template
portality.formcontext.formcontext.EditorJournalReview.render_template
portality.formcontext.formcontext.FormContext.render_template
portality.formcontext.formcontext.ManEdApplicationReview.render_template
portality.formcontext.formcontext.ManEdJournalReview.render_template
portality.formcontext.formcontext.PublisherCsvReApplication.render_template
portality.formcontext.formcontext.PublisherReApplication.render_template
portality.formcontext.formcontext.ReadOnlyJournal.render_template" class="py-name" href="#" onclick="return doclink('link-198', 'render_template', 'link-2');">render_template</a></tt><tt class="py-op">(</tt><tt class="py-string">'admin/continuation.html'</tt><tt class="py-op">,</tt> <tt id="link-199" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-199', 'form', 'link-142');">form</a></tt><tt class="py-op">=</tt><tt id="link-200" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-200', 'form', 'link-142');">form</a></tt><tt class="py-op">,</tt> <tt class="py-name">current</tt><tt class="py-op">=</tt><tt class="py-name">j</tt><tt class="py-op">)</tt> </tt>
<a name="L220"></a><tt class="py-lineno">220</tt>  <tt class="py-line"> </tt>
<a name="L221"></a><tt class="py-lineno">221</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt id="link-201" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-201', 'form', 'link-142');">form</a></tt><tt class="py-op">.</tt><tt id="link-202" class="py-name"><a title="portality.models.lock.Lock.type
portality.view.forms.MakeContinuation.type" class="py-name" href="#" onclick="return doclink('link-202', 'type', 'link-183');">type</a></tt><tt class="py-op">.</tt><tt class="py-name">data</tt> <tt class="py-keyword">is</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L222"></a><tt class="py-lineno">222</tt>  <tt class="py-line">            <tt id="link-203" class="py-name"><a title="portality.scripts.sync_doaj_records.abort" class="py-name" href="#" onclick="return doclink('link-203', 'abort', 'link-1');">abort</a></tt><tt class="py-op">(</tt><tt class="py-number">400</tt><tt class="py-op">)</tt> </tt>
<a name="L223"></a><tt class="py-lineno">223</tt>  <tt class="py-line"> </tt>
<a name="L224"></a><tt class="py-lineno">224</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt id="link-204" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-204', 'form', 'link-142');">form</a></tt><tt class="py-op">.</tt><tt id="link-205" class="py-name"><a title="portality.models.lock.Lock.type
portality.view.forms.MakeContinuation.type" class="py-name" href="#" onclick="return doclink('link-205', 'type', 'link-183');">type</a></tt><tt class="py-op">.</tt><tt class="py-name">data</tt> <tt class="py-keyword">not</tt> <tt class="py-keyword">in</tt> <tt class="py-op">[</tt><tt class="py-string">"replaces"</tt><tt class="py-op">,</tt> <tt class="py-string">"is_replaced_by"</tt><tt class="py-op">]</tt><tt class="py-op">:</tt> </tt>
<a name="L225"></a><tt class="py-lineno">225</tt>  <tt class="py-line">            <tt id="link-206" class="py-name"><a title="portality.scripts.sync_doaj_records.abort" class="py-name" href="#" onclick="return doclink('link-206', 'abort', 'link-1');">abort</a></tt><tt class="py-op">(</tt><tt class="py-number">400</tt><tt class="py-op">)</tt> </tt>
<a name="L226"></a><tt class="py-lineno">226</tt>  <tt class="py-line"> </tt>
<a name="L227"></a><tt class="py-lineno">227</tt>  <tt class="py-line">        <tt class="py-keyword">try</tt><tt class="py-op">:</tt> </tt>
<a name="L228"></a><tt class="py-lineno">228</tt>  <tt class="py-line">            <tt class="py-name">cont</tt> <tt class="py-op">=</tt> <tt class="py-name">j</tt><tt class="py-op">.</tt><tt id="link-207" class="py-name" targets="Method portality.models.journal.Journal.make_continuation()=portality.models.journal.Journal-class.html#make_continuation"><a title="portality.models.journal.Journal.make_continuation" class="py-name" href="#" onclick="return doclink('link-207', 'make_continuation', 'link-207');">make_continuation</a></tt><tt class="py-op">(</tt><tt id="link-208" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-208', 'form', 'link-142');">form</a></tt><tt class="py-op">.</tt><tt id="link-209" class="py-name"><a title="portality.models.lock.Lock.type
portality.view.forms.MakeContinuation.type" class="py-name" href="#" onclick="return doclink('link-209', 'type', 'link-183');">type</a></tt><tt class="py-op">.</tt><tt class="py-name">data</tt><tt class="py-op">,</tt> <tt id="link-210" class="py-name" targets="Variable portality.formcontext.forms.JournalInformation.eissn=portality.formcontext.forms.JournalInformation-class.html#eissn,Method portality.models.openurl.OpenURLRequest.eissn()=portality.models.openurl.OpenURLRequest-class.html#eissn,Variable portality.view.forms.ArticleForm.eissn=portality.view.forms.ArticleForm-class.html#eissn,Variable portality.view.forms.MakeContinuation.eissn=portality.view.forms.MakeContinuation-class.html#eissn"><a title="portality.formcontext.forms.JournalInformation.eissn
portality.models.openurl.OpenURLRequest.eissn
portality.view.forms.ArticleForm.eissn
portality.view.forms.MakeContinuation.eissn" class="py-name" href="#" onclick="return doclink('link-210', 'eissn', 'link-210');">eissn</a></tt><tt class="py-op">=</tt><tt id="link-211" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-211', 'form', 'link-142');">form</a></tt><tt class="py-op">.</tt><tt id="link-212" class="py-name"><a title="portality.formcontext.forms.JournalInformation.eissn
portality.models.openurl.OpenURLRequest.eissn
portality.view.forms.ArticleForm.eissn
portality.view.forms.MakeContinuation.eissn" class="py-name" href="#" onclick="return doclink('link-212', 'eissn', 'link-210');">eissn</a></tt><tt class="py-op">.</tt><tt class="py-name">data</tt><tt class="py-op">,</tt> <tt id="link-213" class="py-name" targets="Variable portality.formcontext.forms.JournalInformation.pissn=portality.formcontext.forms.JournalInformation-class.html#pissn,Variable portality.view.forms.ArticleForm.pissn=portality.view.forms.ArticleForm-class.html#pissn,Variable portality.view.forms.MakeContinuation.pissn=portality.view.forms.MakeContinuation-class.html#pissn"><a title="portality.formcontext.forms.JournalInformation.pissn
portality.view.forms.ArticleForm.pissn
portality.view.forms.MakeContinuation.pissn" class="py-name" href="#" onclick="return doclink('link-213', 'pissn', 'link-213');">pissn</a></tt><tt class="py-op">=</tt><tt id="link-214" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-214', 'form', 'link-142');">form</a></tt><tt class="py-op">.</tt><tt id="link-215" class="py-name"><a title="portality.formcontext.forms.JournalInformation.pissn
portality.view.forms.ArticleForm.pissn
portality.view.forms.MakeContinuation.pissn" class="py-name" href="#" onclick="return doclink('link-215', 'pissn', 'link-213');">pissn</a></tt><tt class="py-op">.</tt><tt class="py-name">data</tt><tt class="py-op">,</tt> <tt id="link-216" class="py-name" targets="Method portality.blog.News.title()=portality.blog.News-class.html#title,Variable portality.formcontext.forms.JournalInformation.title=portality.formcontext.forms.JournalInformation-class.html#title,Method portality.models.bibjson.GenericBibJSON.title()=portality.models.bibjson.GenericBibJSON-class.html#title,Variable portality.view.forms.ArticleForm.title=portality.view.forms.ArticleForm-class.html#title,Variable portality.view.forms.MakeContinuation.title=portality.view.forms.MakeContinuation-class.html#title"><a title="portality.blog.News.title
portality.formcontext.forms.JournalInformation.title
portality.models.bibjson.GenericBibJSON.title
portality.view.forms.ArticleForm.title
portality.view.forms.MakeContinuation.title" class="py-name" href="#" onclick="return doclink('link-216', 'title', 'link-216');">title</a></tt><tt class="py-op">=</tt><tt id="link-217" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-217', 'form', 'link-142');">form</a></tt><tt class="py-op">.</tt><tt id="link-218" class="py-name"><a title="portality.blog.News.title
portality.formcontext.forms.JournalInformation.title
portality.models.bibjson.GenericBibJSON.title
portality.view.forms.ArticleForm.title
portality.view.forms.MakeContinuation.title" class="py-name" href="#" onclick="return doclink('link-218', 'title', 'link-216');">title</a></tt><tt class="py-op">.</tt><tt class="py-name">data</tt><tt class="py-op">)</tt> </tt>
<a name="L229"></a><tt class="py-lineno">229</tt>  <tt class="py-line">        <tt class="py-keyword">except</tt><tt class="py-op">:</tt> </tt>
<a name="L230"></a><tt class="py-lineno">230</tt>  <tt class="py-line">            <tt id="link-219" class="py-name"><a title="portality.scripts.sync_doaj_records.abort" class="py-name" href="#" onclick="return doclink('link-219', 'abort', 'link-1');">abort</a></tt><tt class="py-op">(</tt><tt class="py-number">400</tt><tt class="py-op">)</tt> </tt>
<a name="L231"></a><tt class="py-lineno">231</tt>  <tt class="py-line"> </tt>
<a name="L232"></a><tt class="py-lineno">232</tt>  <tt class="py-line">        <tt class="py-name">flash</tt><tt class="py-op">(</tt><tt class="py-string">"The continuation has been created (see below).  You may now edit the other metadata associated with it.  The original journal has also been updated with this continuation's ISSN(s).  Once you are happy with this record, you can publish it to the DOAJ"</tt><tt class="py-op">,</tt> <tt class="py-string">"success"</tt><tt class="py-op">)</tt> </tt>
<a name="L233"></a><tt class="py-lineno">233</tt>  <tt class="py-line">        <tt class="py-keyword">return</tt> <tt id="link-220" class="py-name"><a title="portality.view.account.RedirectForm.redirect" class="py-name" href="#" onclick="return doclink('link-220', 'redirect', 'link-3');">redirect</a></tt><tt class="py-op">(</tt><tt class="py-name">url_for</tt><tt class="py-op">(</tt><tt class="py-string">'.journal_page'</tt><tt class="py-op">,</tt> <tt class="py-name">journal_id</tt><tt class="py-op">=</tt><tt class="py-name">cont</tt><tt class="py-op">.</tt><tt id="link-221" class="py-name"><a title="portality.dao.DomainObject.id
portality.migrate.st2cl.cluster2.id
portality.models.journal.JournalLikeObject.id" class="py-name" href="#" onclick="return doclink('link-221', 'id', 'link-121');">id</a></tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
</div><a name="L234"></a><tt class="py-lineno">234</tt>  <tt class="py-line"> </tt>
<a name="suggestions"></a><div id="suggestions-def"><a name="L235"></a><tt class="py-lineno">235</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">blueprint</tt><tt class="py-op">.</tt><tt class="py-name">route</tt><tt class="py-op">(</tt><tt class="py-string">"/applications"</tt><tt class="py-op">)</tt> </tt>
<a name="L236"></a><tt class="py-lineno">236</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">login_required</tt> </tt>
<a name="L237"></a><tt class="py-lineno">237</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">ssl_required</tt> </tt>
<a name="L238"></a><tt class="py-lineno">238</tt> <a class="py-toggle" href="#" id="suggestions-toggle" onclick="return toggle('suggestions');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="portality.view.admin-module.html#suggestions">suggestions</a><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="suggestions-collapsed" style="display:none;" pad="+++" indent="++++"></div><div id="suggestions-expanded"><a name="L239"></a><tt class="py-lineno">239</tt>  <tt class="py-line">    <tt class="py-keyword">return</tt> <tt id="link-222" class="py-name"><a title="portality.formcontext.formcontext.AssEdApplicationReview.render_template
portality.formcontext.formcontext.AssEdJournalReview.render_template
portality.formcontext.formcontext.EditorApplicationReview.render_template
portality.formcontext.formcontext.EditorJournalReview.render_template
portality.formcontext.formcontext.FormContext.render_template
portality.formcontext.formcontext.ManEdApplicationReview.render_template
portality.formcontext.formcontext.ManEdJournalReview.render_template
portality.formcontext.formcontext.PublisherCsvReApplication.render_template
portality.formcontext.formcontext.PublisherReApplication.render_template
portality.formcontext.formcontext.ReadOnlyJournal.render_template" class="py-name" href="#" onclick="return doclink('link-222', 'render_template', 'link-2');">render_template</a></tt><tt class="py-op">(</tt><tt class="py-string">'admin/suggestions.html'</tt><tt class="py-op">,</tt> </tt>
<a name="L240"></a><tt class="py-lineno">240</tt>  <tt class="py-line">               <tt class="py-name">search_page</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">,</tt> </tt>
<a name="L241"></a><tt class="py-lineno">241</tt>  <tt class="py-line">               <tt class="py-name">facetviews</tt><tt class="py-op">=</tt><tt class="py-op">[</tt><tt class="py-string">"admin.applications.facetview"</tt><tt class="py-op">]</tt><tt class="py-op">,</tt> </tt>
<a name="L242"></a><tt class="py-lineno">242</tt>  <tt class="py-line">               <tt class="py-name">admin_page</tt><tt class="py-op">=</tt><tt class="py-name">True</tt> </tt>
<a name="L243"></a><tt class="py-lineno">243</tt>  <tt class="py-line">           <tt class="py-op">)</tt> </tt>
</div><a name="L244"></a><tt class="py-lineno">244</tt>  <tt class="py-line"> </tt>
<a name="suggestion_page"></a><div id="suggestion_page-def"><a name="L245"></a><tt class="py-lineno">245</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">blueprint</tt><tt class="py-op">.</tt><tt class="py-name">route</tt><tt class="py-op">(</tt><tt class="py-string">"/suggestion/&lt;suggestion_id&gt;"</tt><tt class="py-op">,</tt> <tt class="py-name">methods</tt><tt class="py-op">=</tt><tt class="py-op">[</tt><tt class="py-string">"GET"</tt><tt class="py-op">,</tt> <tt class="py-string">"POST"</tt><tt class="py-op">]</tt><tt class="py-op">)</tt> </tt>
<a name="L246"></a><tt class="py-lineno">246</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">login_required</tt> </tt>
<a name="L247"></a><tt class="py-lineno">247</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">ssl_required</tt> </tt>
<a name="L248"></a><tt class="py-lineno">248</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">write_required</tt> </tt>
<a name="L249"></a><tt class="py-lineno">249</tt> <a class="py-toggle" href="#" id="suggestion_page-toggle" onclick="return toggle('suggestion_page');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="portality.view.admin-module.html#suggestion_page">suggestion_page</a><tt class="py-op">(</tt><tt class="py-param">suggestion_id</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="suggestion_page-collapsed" style="display:none;" pad="+++" indent="++++"></div><div id="suggestion_page-expanded"><a name="L250"></a><tt class="py-lineno">250</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-keyword">not</tt> <tt class="py-name">current_user</tt><tt class="py-op">.</tt><tt id="link-223" class="py-name"><a title="portality.authorise.Authorise.has_role
portality.models.account.Account.has_role" class="py-name" href="#" onclick="return doclink('link-223', 'has_role', 'link-33');">has_role</a></tt><tt class="py-op">(</tt><tt class="py-string">"edit_suggestion"</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L251"></a><tt class="py-lineno">251</tt>  <tt class="py-line">        <tt id="link-224" class="py-name"><a title="portality.scripts.sync_doaj_records.abort" class="py-name" href="#" onclick="return doclink('link-224', 'abort', 'link-1');">abort</a></tt><tt class="py-op">(</tt><tt class="py-number">401</tt><tt class="py-op">)</tt> </tt>
<a name="L252"></a><tt class="py-lineno">252</tt>  <tt class="py-line">    <tt class="py-name">ap</tt> <tt class="py-op">=</tt> <tt id="link-225" class="py-name"><a title="portality.models" class="py-name" href="#" onclick="return doclink('link-225', 'models', 'link-11');">models</a></tt><tt class="py-op">.</tt><tt id="link-226" class="py-name" targets="Class portality.formcontext.forms.Suggestion=portality.formcontext.forms.Suggestion-class.html,Class portality.models.suggestion.Suggestion=portality.models.suggestion.Suggestion-class.html"><a title="portality.formcontext.forms.Suggestion
portality.models.suggestion.Suggestion" class="py-name" href="#" onclick="return doclink('link-226', 'Suggestion', 'link-226');">Suggestion</a></tt><tt class="py-op">.</tt><tt id="link-227" class="py-name"><a title="portality.dao.DomainObject.pull
portality.models.oaipmh.OAIPMHArticle.pull
portality.models.oaipmh.OAIPMHJournal.pull" class="py-name" href="#" onclick="return doclink('link-227', 'pull', 'link-101');">pull</a></tt><tt class="py-op">(</tt><tt class="py-name">suggestion_id</tt><tt class="py-op">)</tt> </tt>
<a name="L253"></a><tt class="py-lineno">253</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">ap</tt> <tt class="py-keyword">is</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L254"></a><tt class="py-lineno">254</tt>  <tt class="py-line">        <tt id="link-228" class="py-name"><a title="portality.scripts.sync_doaj_records.abort" class="py-name" href="#" onclick="return doclink('link-228', 'abort', 'link-1');">abort</a></tt><tt class="py-op">(</tt><tt class="py-number">404</tt><tt class="py-op">)</tt> </tt>
<a name="L255"></a><tt class="py-lineno">255</tt>  <tt class="py-line"> </tt>
<a name="L256"></a><tt class="py-lineno">256</tt>  <tt class="py-line">    <tt class="py-comment"># attempt to get a lock on the object</tt> </tt>
<a name="L257"></a><tt class="py-lineno">257</tt>  <tt class="py-line">    <tt class="py-keyword">try</tt><tt class="py-op">:</tt> </tt>
<a name="L258"></a><tt class="py-lineno">258</tt>  <tt class="py-line">        <tt class="py-name">lockinfo</tt> <tt class="py-op">=</tt> <tt id="link-229" class="py-name"><a title="portality.lock
portality.lock.lock
portality.models.lock" class="py-name" href="#" onclick="return doclink('link-229', 'lock', 'link-17');">lock</a></tt><tt class="py-op">.</tt><tt id="link-230" class="py-name"><a title="portality.lock
portality.lock.lock
portality.models.lock" class="py-name" href="#" onclick="return doclink('link-230', 'lock', 'link-17');">lock</a></tt><tt class="py-op">(</tt><tt class="py-string">"suggestion"</tt><tt class="py-op">,</tt> <tt class="py-name">suggestion_id</tt><tt class="py-op">,</tt> <tt class="py-name">current_user</tt><tt class="py-op">.</tt><tt id="link-231" class="py-name"><a title="portality.dao.DomainObject.id
portality.migrate.st2cl.cluster2.id
portality.models.journal.JournalLikeObject.id" class="py-name" href="#" onclick="return doclink('link-231', 'id', 'link-121');">id</a></tt><tt class="py-op">)</tt> </tt>
<a name="L259"></a><tt class="py-lineno">259</tt>  <tt class="py-line">    <tt class="py-keyword">except</tt> <tt id="link-232" class="py-name"><a title="portality.lock
portality.lock.lock
portality.models.lock" class="py-name" href="#" onclick="return doclink('link-232', 'lock', 'link-17');">lock</a></tt><tt class="py-op">.</tt><tt id="link-233" class="py-name"><a title="portality.lock.Locked" class="py-name" href="#" onclick="return doclink('link-233', 'Locked', 'link-123');">Locked</a></tt> <tt class="py-keyword">as</tt> <tt id="link-234" class="py-name"><a title="portality.datasets.l" class="py-name" href="#" onclick="return doclink('link-234', 'l', 'link-124');">l</a></tt><tt class="py-op">:</tt> </tt>
<a name="L260"></a><tt class="py-lineno">260</tt>  <tt class="py-line">        <tt class="py-keyword">return</tt> <tt id="link-235" class="py-name"><a title="portality.formcontext.formcontext.AssEdApplicationReview.render_template
portality.formcontext.formcontext.AssEdJournalReview.render_template
portality.formcontext.formcontext.EditorApplicationReview.render_template
portality.formcontext.formcontext.EditorJournalReview.render_template
portality.formcontext.formcontext.FormContext.render_template
portality.formcontext.formcontext.ManEdApplicationReview.render_template
portality.formcontext.formcontext.ManEdJournalReview.render_template
portality.formcontext.formcontext.PublisherCsvReApplication.render_template
portality.formcontext.formcontext.PublisherReApplication.render_template
portality.formcontext.formcontext.ReadOnlyJournal.render_template" class="py-name" href="#" onclick="return doclink('link-235', 'render_template', 'link-2');">render_template</a></tt><tt class="py-op">(</tt><tt class="py-string">"admin/suggestion_locked.html"</tt><tt class="py-op">,</tt> <tt id="link-236" class="py-name" targets="Module portality.models.suggestion=portality.models.suggestion-module.html,Function portality.view.doaj.suggestion()=portality.view.doaj-module.html#suggestion"><a title="portality.models.suggestion
portality.view.doaj.suggestion" class="py-name" href="#" onclick="return doclink('link-236', 'suggestion', 'link-236');">suggestion</a></tt><tt class="py-op">=</tt><tt class="py-name">ap</tt><tt class="py-op">,</tt> <tt id="link-237" class="py-name"><a title="portality.lock
portality.lock.lock
portality.models.lock" class="py-name" href="#" onclick="return doclink('link-237', 'lock', 'link-17');">lock</a></tt><tt class="py-op">=</tt><tt id="link-238" class="py-name"><a title="portality.datasets.l" class="py-name" href="#" onclick="return doclink('link-238', 'l', 'link-124');">l</a></tt><tt class="py-op">.</tt><tt id="link-239" class="py-name"><a title="portality.lock
portality.lock.lock
portality.models.lock" class="py-name" href="#" onclick="return doclink('link-239', 'lock', 'link-17');">lock</a></tt><tt class="py-op">,</tt> <tt class="py-name">edit_suggestion_page</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">)</tt> </tt>
<a name="L261"></a><tt class="py-lineno">261</tt>  <tt class="py-line"> </tt>
<a name="L262"></a><tt class="py-lineno">262</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">request</tt><tt class="py-op">.</tt><tt class="py-name">method</tt> <tt class="py-op">==</tt> <tt class="py-string">"GET"</tt><tt class="py-op">:</tt> </tt>
<a name="L263"></a><tt class="py-lineno">263</tt>  <tt class="py-line">        <tt class="py-name">fc</tt> <tt class="py-op">=</tt> <tt id="link-240" class="py-name"><a title="portality.formcontext
portality.formcontext.formcontext" class="py-name" href="#" onclick="return doclink('link-240', 'formcontext', 'link-14');">formcontext</a></tt><tt class="py-op">.</tt><tt id="link-241" class="py-name" targets="Class portality.formcontext.formcontext.ApplicationFormFactory=portality.formcontext.formcontext.ApplicationFormFactory-class.html"><a title="portality.formcontext.formcontext.ApplicationFormFactory" class="py-name" href="#" onclick="return doclink('link-241', 'ApplicationFormFactory', 'link-241');">ApplicationFormFactory</a></tt><tt class="py-op">.</tt><tt id="link-242" class="py-name"><a title="portality.formcontext.formcontext.ApplicationFormFactory.get_form_context
portality.formcontext.formcontext.JournalFormFactory.get_form_context" class="py-name" href="#" onclick="return doclink('link-242', 'get_form_context', 'link-132');">get_form_context</a></tt><tt class="py-op">(</tt><tt id="link-243" class="py-name"><a title="portality.models.account.Account.role" class="py-name" href="#" onclick="return doclink('link-243', 'role', 'link-133');">role</a></tt><tt class="py-op">=</tt><tt class="py-string">"admin"</tt><tt class="py-op">,</tt> <tt id="link-244" class="py-name"><a title="portality.formcontext.formcontext.FormContext.source" class="py-name" href="#" onclick="return doclink('link-244', 'source', 'link-134');">source</a></tt><tt class="py-op">=</tt><tt class="py-name">ap</tt><tt class="py-op">)</tt> </tt>
<a name="L264"></a><tt class="py-lineno">264</tt>  <tt class="py-line">        <tt class="py-keyword">return</tt> <tt class="py-name">fc</tt><tt class="py-op">.</tt><tt id="link-245" class="py-name"><a title="portality.formcontext.formcontext.AssEdApplicationReview.render_template
portality.formcontext.formcontext.AssEdJournalReview.render_template
portality.formcontext.formcontext.EditorApplicationReview.render_template
portality.formcontext.formcontext.EditorJournalReview.render_template
portality.formcontext.formcontext.FormContext.render_template
portality.formcontext.formcontext.ManEdApplicationReview.render_template
portality.formcontext.formcontext.ManEdJournalReview.render_template
portality.formcontext.formcontext.PublisherCsvReApplication.render_template
portality.formcontext.formcontext.PublisherReApplication.render_template
portality.formcontext.formcontext.ReadOnlyJournal.render_template" class="py-name" href="#" onclick="return doclink('link-245', 'render_template', 'link-2');">render_template</a></tt><tt class="py-op">(</tt><tt class="py-name">edit_suggestion_page</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">,</tt> <tt id="link-246" class="py-name"><a title="portality.lock
portality.lock.lock
portality.models.lock" class="py-name" href="#" onclick="return doclink('link-246', 'lock', 'link-17');">lock</a></tt><tt class="py-op">=</tt><tt class="py-name">lockinfo</tt><tt class="py-op">)</tt> </tt>
<a name="L265"></a><tt class="py-lineno">265</tt>  <tt class="py-line">    <tt class="py-keyword">elif</tt> <tt class="py-name">request</tt><tt class="py-op">.</tt><tt class="py-name">method</tt> <tt class="py-op">==</tt> <tt class="py-string">"POST"</tt><tt class="py-op">:</tt> </tt>
<a name="L266"></a><tt class="py-lineno">266</tt>  <tt class="py-line">        <tt class="py-name">fc</tt> <tt class="py-op">=</tt> <tt id="link-247" class="py-name"><a title="portality.formcontext
portality.formcontext.formcontext" class="py-name" href="#" onclick="return doclink('link-247', 'formcontext', 'link-14');">formcontext</a></tt><tt class="py-op">.</tt><tt id="link-248" class="py-name"><a title="portality.formcontext.formcontext.ApplicationFormFactory" class="py-name" href="#" onclick="return doclink('link-248', 'ApplicationFormFactory', 'link-241');">ApplicationFormFactory</a></tt><tt class="py-op">.</tt><tt id="link-249" class="py-name"><a title="portality.formcontext.formcontext.ApplicationFormFactory.get_form_context
portality.formcontext.formcontext.JournalFormFactory.get_form_context" class="py-name" href="#" onclick="return doclink('link-249', 'get_form_context', 'link-132');">get_form_context</a></tt><tt class="py-op">(</tt><tt id="link-250" class="py-name"><a title="portality.models.account.Account.role" class="py-name" href="#" onclick="return doclink('link-250', 'role', 'link-133');">role</a></tt><tt class="py-op">=</tt><tt class="py-string">"admin"</tt><tt class="py-op">,</tt> <tt id="link-251" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form_data" class="py-name" href="#" onclick="return doclink('link-251', 'form_data', 'link-141');">form_data</a></tt><tt class="py-op">=</tt><tt class="py-name">request</tt><tt class="py-op">.</tt><tt id="link-252" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-252', 'form', 'link-142');">form</a></tt><tt class="py-op">,</tt> <tt id="link-253" class="py-name"><a title="portality.formcontext.formcontext.FormContext.source" class="py-name" href="#" onclick="return doclink('link-253', 'source', 'link-134');">source</a></tt><tt class="py-op">=</tt><tt class="py-name">ap</tt><tt class="py-op">)</tt> </tt>
<a name="L267"></a><tt class="py-lineno">267</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">fc</tt><tt class="py-op">.</tt><tt id="link-254" class="py-name"><a title="portality.article.DOAJXWalk.validate
portality.formcontext.formcontext.FormContext.validate
portality.formcontext.formcontext.ManEdJournalReview.validate
portality.formcontext.validate
portality.lib.dataobj.DataObj.validate
portality.lib.dataobj.validate" class="py-name" href="#" onclick="return doclink('link-254', 'validate', 'link-144');">validate</a></tt><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L268"></a><tt class="py-lineno">268</tt>  <tt class="py-line">            <tt class="py-keyword">try</tt><tt class="py-op">:</tt> </tt>
<a name="L269"></a><tt class="py-lineno">269</tt>  <tt class="py-line">                <tt class="py-name">fc</tt><tt class="py-op">.</tt><tt id="link-255" class="py-name"><a title="portality.formcontext.formcontext.AssEdApplicationReview.finalise
portality.formcontext.formcontext.AssEdJournalReview.finalise
portality.formcontext.formcontext.EditorApplicationReview.finalise
portality.formcontext.formcontext.EditorJournalReview.finalise
portality.formcontext.formcontext.FormContext.finalise
portality.formcontext.formcontext.ManEdApplicationReview.finalise
portality.formcontext.formcontext.ManEdJournalReview.finalise
portality.formcontext.formcontext.PublicApplication.finalise
portality.formcontext.formcontext.PublisherCsvReApplication.finalise
portality.formcontext.formcontext.PublisherReApplication.finalise
portality.formcontext.formcontext.ReadOnlyJournal.finalise" class="py-name" href="#" onclick="return doclink('link-255', 'finalise', 'link-145');">finalise</a></tt><tt class="py-op">(</tt><tt class="py-op">)</tt> </tt>
<a name="L270"></a><tt class="py-lineno">270</tt>  <tt class="py-line">                <tt class="py-name">flash</tt><tt class="py-op">(</tt><tt class="py-string">'Application updated.'</tt><tt class="py-op">,</tt> <tt class="py-string">'success'</tt><tt class="py-op">)</tt> </tt>
<a name="L271"></a><tt class="py-lineno">271</tt>  <tt class="py-line">                <tt class="py-keyword">for</tt> <tt id="link-256" class="py-name"><a title="portality.journalcsv.Journal2QuestionXwalk.a
portality.reapplication.Suggestion2QuestionXwalk.a" class="py-name" href="#" onclick="return doclink('link-256', 'a', 'link-98');">a</a></tt> <tt class="py-keyword">in</tt> <tt class="py-name">fc</tt><tt class="py-op">.</tt><tt id="link-257" class="py-name"><a title="portality.formcontext.formcontext.FormContext.alert" class="py-name" href="#" onclick="return doclink('link-257', 'alert', 'link-147');">alert</a></tt><tt class="py-op">:</tt> </tt>
<a name="L272"></a><tt class="py-lineno">272</tt>  <tt class="py-line">                    <tt id="link-258" class="py-name"><a title="portality.util.flash_with_url" class="py-name" href="#" onclick="return doclink('link-258', 'flash_with_url', 'link-20');">flash_with_url</a></tt><tt class="py-op">(</tt><tt id="link-259" class="py-name"><a title="portality.journalcsv.Journal2QuestionXwalk.a
portality.reapplication.Suggestion2QuestionXwalk.a" class="py-name" href="#" onclick="return doclink('link-259', 'a', 'link-98');">a</a></tt><tt class="py-op">,</tt> <tt class="py-string">"success"</tt><tt class="py-op">)</tt> </tt>
<a name="L273"></a><tt class="py-lineno">273</tt>  <tt class="py-line">                <tt class="py-keyword">return</tt> <tt id="link-260" class="py-name"><a title="portality.view.account.RedirectForm.redirect" class="py-name" href="#" onclick="return doclink('link-260', 'redirect', 'link-3');">redirect</a></tt><tt class="py-op">(</tt><tt class="py-name">url_for</tt><tt class="py-op">(</tt><tt class="py-string">"admin.suggestion_page"</tt><tt class="py-op">,</tt> <tt class="py-name">suggestion_id</tt><tt class="py-op">=</tt><tt class="py-name">ap</tt><tt class="py-op">.</tt><tt id="link-261" class="py-name"><a title="portality.dao.DomainObject.id
portality.migrate.st2cl.cluster2.id
portality.models.journal.JournalLikeObject.id" class="py-name" href="#" onclick="return doclink('link-261', 'id', 'link-121');">id</a></tt><tt class="py-op">,</tt> <tt class="py-name">_anchor</tt><tt class="py-op">=</tt><tt class="py-string">'done'</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L274"></a><tt class="py-lineno">274</tt>  <tt class="py-line">            <tt class="py-keyword">except</tt> <tt id="link-262" class="py-name"><a title="portality.formcontext
portality.formcontext.formcontext" class="py-name" href="#" onclick="return doclink('link-262', 'formcontext', 'link-14');">formcontext</a></tt><tt class="py-op">.</tt><tt id="link-263" class="py-name"><a title="portality.formcontext.formcontext.FormContextException" class="py-name" href="#" onclick="return doclink('link-263', 'FormContextException', 'link-153');">FormContextException</a></tt> <tt class="py-keyword">as</tt> <tt class="py-name">e</tt><tt class="py-op">:</tt> </tt>
<a name="L275"></a><tt class="py-lineno">275</tt>  <tt class="py-line">                <tt class="py-name">flash</tt><tt class="py-op">(</tt><tt class="py-name">e</tt><tt class="py-op">.</tt><tt id="link-264" class="py-name"><a title="portality.view.forms.ContactUs.message" class="py-name" href="#" onclick="return doclink('link-264', 'message', 'link-154');">message</a></tt><tt class="py-op">)</tt> </tt>
<a name="L276"></a><tt class="py-lineno">276</tt>  <tt class="py-line">                <tt class="py-keyword">return</tt> <tt id="link-265" class="py-name"><a title="portality.view.account.RedirectForm.redirect" class="py-name" href="#" onclick="return doclink('link-265', 'redirect', 'link-3');">redirect</a></tt><tt class="py-op">(</tt><tt class="py-name">url_for</tt><tt class="py-op">(</tt><tt class="py-string">"admin.suggestion_page"</tt><tt class="py-op">,</tt> <tt class="py-name">suggestion_id</tt><tt class="py-op">=</tt><tt class="py-name">ap</tt><tt class="py-op">.</tt><tt id="link-266" class="py-name"><a title="portality.dao.DomainObject.id
portality.migrate.st2cl.cluster2.id
portality.models.journal.JournalLikeObject.id" class="py-name" href="#" onclick="return doclink('link-266', 'id', 'link-121');">id</a></tt><tt class="py-op">,</tt> <tt class="py-name">_anchor</tt><tt class="py-op">=</tt><tt class="py-string">'cannot_edit'</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L277"></a><tt class="py-lineno">277</tt>  <tt class="py-line">        <tt class="py-keyword">else</tt><tt class="py-op">:</tt> </tt>
<a name="L278"></a><tt class="py-lineno">278</tt>  <tt class="py-line">            <tt class="py-keyword">return</tt> <tt class="py-name">fc</tt><tt class="py-op">.</tt><tt id="link-267" class="py-name"><a title="portality.formcontext.formcontext.AssEdApplicationReview.render_template
portality.formcontext.formcontext.AssEdJournalReview.render_template
portality.formcontext.formcontext.EditorApplicationReview.render_template
portality.formcontext.formcontext.EditorJournalReview.render_template
portality.formcontext.formcontext.FormContext.render_template
portality.formcontext.formcontext.ManEdApplicationReview.render_template
portality.formcontext.formcontext.ManEdJournalReview.render_template
portality.formcontext.formcontext.PublisherCsvReApplication.render_template
portality.formcontext.formcontext.PublisherReApplication.render_template
portality.formcontext.formcontext.ReadOnlyJournal.render_template" class="py-name" href="#" onclick="return doclink('link-267', 'render_template', 'link-2');">render_template</a></tt><tt class="py-op">(</tt><tt class="py-name">edit_suggestion_page</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">,</tt> <tt id="link-268" class="py-name"><a title="portality.lock
portality.lock.lock
portality.models.lock" class="py-name" href="#" onclick="return doclink('link-268', 'lock', 'link-17');">lock</a></tt><tt class="py-op">=</tt><tt class="py-name">lockinfo</tt><tt class="py-op">)</tt> </tt>
</div><a name="L279"></a><tt class="py-lineno">279</tt>  <tt class="py-line"> </tt>
<a name="admin_site_search"></a><div id="admin_site_search-def"><a name="L280"></a><tt class="py-lineno">280</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">blueprint</tt><tt class="py-op">.</tt><tt class="py-name">route</tt><tt class="py-op">(</tt><tt class="py-string">"/admin_site_search"</tt><tt class="py-op">)</tt> </tt>
<a name="L281"></a><tt class="py-lineno">281</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">login_required</tt> </tt>
<a name="L282"></a><tt class="py-lineno">282</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">ssl_required</tt> </tt>
<a name="L283"></a><tt class="py-lineno">283</tt> <a class="py-toggle" href="#" id="admin_site_search-toggle" onclick="return toggle('admin_site_search');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="portality.view.admin-module.html#admin_site_search">admin_site_search</a><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="admin_site_search-collapsed" style="display:none;" pad="+++" indent="++++"></div><div id="admin_site_search-expanded"><a name="L284"></a><tt class="py-lineno">284</tt>  <tt class="py-line">    <tt class="py-keyword">return</tt> <tt id="link-269" class="py-name"><a title="portality.formcontext.formcontext.AssEdApplicationReview.render_template
portality.formcontext.formcontext.AssEdJournalReview.render_template
portality.formcontext.formcontext.EditorApplicationReview.render_template
portality.formcontext.formcontext.EditorJournalReview.render_template
portality.formcontext.formcontext.FormContext.render_template
portality.formcontext.formcontext.ManEdApplicationReview.render_template
portality.formcontext.formcontext.ManEdJournalReview.render_template
portality.formcontext.formcontext.PublisherCsvReApplication.render_template
portality.formcontext.formcontext.PublisherReApplication.render_template
portality.formcontext.formcontext.ReadOnlyJournal.render_template" class="py-name" href="#" onclick="return doclink('link-269', 'render_template', 'link-2');">render_template</a></tt><tt class="py-op">(</tt><tt class="py-string">"admin/admin_site_search.html"</tt><tt class="py-op">,</tt> <tt class="py-name">admin_page</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">,</tt> <tt class="py-name">search_page</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">,</tt> <tt class="py-name">facetviews</tt><tt class="py-op">=</tt><tt class="py-op">[</tt><tt class="py-string">'admin.journalarticle.facetview'</tt><tt class="py-op">]</tt><tt class="py-op">)</tt> </tt>
</div><a name="L285"></a><tt class="py-lineno">285</tt>  <tt class="py-line"> </tt>
<a name="editor_group_search"></a><div id="editor_group_search-def"><a name="L286"></a><tt class="py-lineno">286</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">blueprint</tt><tt class="py-op">.</tt><tt class="py-name">route</tt><tt class="py-op">(</tt><tt class="py-string">"/editor_groups"</tt><tt class="py-op">)</tt> </tt>
<a name="L287"></a><tt class="py-lineno">287</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">login_required</tt> </tt>
<a name="L288"></a><tt class="py-lineno">288</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">ssl_required</tt> </tt>
<a name="L289"></a><tt class="py-lineno">289</tt> <a class="py-toggle" href="#" id="editor_group_search-toggle" onclick="return toggle('editor_group_search');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="portality.view.admin-module.html#editor_group_search">editor_group_search</a><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="editor_group_search-collapsed" style="display:none;" pad="+++" indent="++++"></div><div id="editor_group_search-expanded"><a name="L290"></a><tt class="py-lineno">290</tt>  <tt class="py-line">    <tt class="py-keyword">return</tt> <tt id="link-270" class="py-name"><a title="portality.formcontext.formcontext.AssEdApplicationReview.render_template
portality.formcontext.formcontext.AssEdJournalReview.render_template
portality.formcontext.formcontext.EditorApplicationReview.render_template
portality.formcontext.formcontext.EditorJournalReview.render_template
portality.formcontext.formcontext.FormContext.render_template
portality.formcontext.formcontext.ManEdApplicationReview.render_template
portality.formcontext.formcontext.ManEdJournalReview.render_template
portality.formcontext.formcontext.PublisherCsvReApplication.render_template
portality.formcontext.formcontext.PublisherReApplication.render_template
portality.formcontext.formcontext.ReadOnlyJournal.render_template" class="py-name" href="#" onclick="return doclink('link-270', 'render_template', 'link-2');">render_template</a></tt><tt class="py-op">(</tt><tt class="py-string">"admin/editor_group_search.html"</tt><tt class="py-op">,</tt> <tt class="py-name">admin_page</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">,</tt> <tt class="py-name">search_page</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">,</tt> <tt class="py-name">facetviews</tt><tt class="py-op">=</tt><tt class="py-op">[</tt><tt class="py-string">'admin.editorgroups.facetview'</tt><tt class="py-op">]</tt><tt class="py-op">)</tt> </tt>
</div><a name="L291"></a><tt class="py-lineno">291</tt>  <tt class="py-line"> </tt>
<a name="editor_group"></a><div id="editor_group-def"><a name="L292"></a><tt class="py-lineno">292</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">blueprint</tt><tt class="py-op">.</tt><tt class="py-name">route</tt><tt class="py-op">(</tt><tt class="py-string">"/editor_group"</tt><tt class="py-op">,</tt> <tt class="py-name">methods</tt><tt class="py-op">=</tt><tt class="py-op">[</tt><tt class="py-string">"GET"</tt><tt class="py-op">,</tt> <tt class="py-string">"POST"</tt><tt class="py-op">]</tt><tt class="py-op">)</tt> </tt>
<a name="L293"></a><tt class="py-lineno">293</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">blueprint</tt><tt class="py-op">.</tt><tt class="py-name">route</tt><tt class="py-op">(</tt><tt class="py-string">"/editor_group/&lt;group_id&gt;"</tt><tt class="py-op">,</tt> <tt class="py-name">methods</tt><tt class="py-op">=</tt><tt class="py-op">[</tt><tt class="py-string">"GET"</tt><tt class="py-op">,</tt> <tt class="py-string">"POST"</tt><tt class="py-op">]</tt><tt class="py-op">)</tt> </tt>
<a name="L294"></a><tt class="py-lineno">294</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">login_required</tt> </tt>
<a name="L295"></a><tt class="py-lineno">295</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">ssl_required</tt> </tt>
<a name="L296"></a><tt class="py-lineno">296</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">write_required</tt> </tt>
<a name="L297"></a><tt class="py-lineno">297</tt> <a class="py-toggle" href="#" id="editor_group-toggle" onclick="return toggle('editor_group');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="portality.view.admin-module.html#editor_group">editor_group</a><tt class="py-op">(</tt><tt class="py-param">group_id</tt><tt class="py-op">=</tt><tt class="py-name">None</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="editor_group-collapsed" style="display:none;" pad="+++" indent="++++"></div><div id="editor_group-expanded"><a name="L298"></a><tt class="py-lineno">298</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-keyword">not</tt> <tt class="py-name">current_user</tt><tt class="py-op">.</tt><tt id="link-271" class="py-name"><a title="portality.authorise.Authorise.has_role
portality.models.account.Account.has_role" class="py-name" href="#" onclick="return doclink('link-271', 'has_role', 'link-33');">has_role</a></tt><tt class="py-op">(</tt><tt class="py-string">"modify_editor_groups"</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L299"></a><tt class="py-lineno">299</tt>  <tt class="py-line">        <tt id="link-272" class="py-name"><a title="portality.scripts.sync_doaj_records.abort" class="py-name" href="#" onclick="return doclink('link-272', 'abort', 'link-1');">abort</a></tt><tt class="py-op">(</tt><tt class="py-number">401</tt><tt class="py-op">)</tt> </tt>
<a name="L300"></a><tt class="py-lineno">300</tt>  <tt class="py-line"> </tt>
<a name="L301"></a><tt class="py-lineno">301</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">request</tt><tt class="py-op">.</tt><tt class="py-name">method</tt> <tt class="py-op">==</tt> <tt class="py-string">"GET"</tt><tt class="py-op">:</tt> </tt>
<a name="L302"></a><tt class="py-lineno">302</tt>  <tt class="py-line">        <tt id="link-273" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-273', 'form', 'link-142');">form</a></tt> <tt class="py-op">=</tt> <tt id="link-274" class="py-name"><a title="portality.view.forms.EditorGroupForm" class="py-name" href="#" onclick="return doclink('link-274', 'EditorGroupForm', 'link-28');">EditorGroupForm</a></tt><tt class="py-op">(</tt><tt class="py-op">)</tt> </tt>
<a name="L303"></a><tt class="py-lineno">303</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt id="link-275" class="py-name" targets="Variable portality.view.forms.EditorGroupForm.group_id=portality.view.forms.EditorGroupForm-class.html#group_id"><a title="portality.view.forms.EditorGroupForm.group_id" class="py-name" href="#" onclick="return doclink('link-275', 'group_id', 'link-275');">group_id</a></tt> <tt class="py-keyword">is</tt> <tt class="py-keyword">not</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L304"></a><tt class="py-lineno">304</tt>  <tt class="py-line">            <tt class="py-name">eg</tt> <tt class="py-op">=</tt> <tt id="link-276" class="py-name"><a title="portality.models" class="py-name" href="#" onclick="return doclink('link-276', 'models', 'link-11');">models</a></tt><tt class="py-op">.</tt><tt id="link-277" class="py-name" targets="Class portality.models.editors.EditorGroup=portality.models.editors.EditorGroup-class.html"><a title="portality.models.editors.EditorGroup" class="py-name" href="#" onclick="return doclink('link-277', 'EditorGroup', 'link-277');">EditorGroup</a></tt><tt class="py-op">.</tt><tt id="link-278" class="py-name"><a title="portality.dao.DomainObject.pull
portality.models.oaipmh.OAIPMHArticle.pull
portality.models.oaipmh.OAIPMHJournal.pull" class="py-name" href="#" onclick="return doclink('link-278', 'pull', 'link-101');">pull</a></tt><tt class="py-op">(</tt><tt id="link-279" class="py-name"><a title="portality.view.forms.EditorGroupForm.group_id" class="py-name" href="#" onclick="return doclink('link-279', 'group_id', 'link-275');">group_id</a></tt><tt class="py-op">)</tt> </tt>
<a name="L305"></a><tt class="py-lineno">305</tt>  <tt class="py-line">            <tt id="link-280" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-280', 'form', 'link-142');">form</a></tt><tt class="py-op">.</tt><tt id="link-281" class="py-name"><a title="portality.view.forms.EditorGroupForm.group_id" class="py-name" href="#" onclick="return doclink('link-281', 'group_id', 'link-275');">group_id</a></tt><tt class="py-op">.</tt><tt class="py-name">data</tt> <tt class="py-op">=</tt> <tt class="py-name">eg</tt><tt class="py-op">.</tt><tt id="link-282" class="py-name"><a title="portality.dao.DomainObject.id
portality.migrate.st2cl.cluster2.id
portality.models.journal.JournalLikeObject.id" class="py-name" href="#" onclick="return doclink('link-282', 'id', 'link-121');">id</a></tt> </tt>
<a name="L306"></a><tt class="py-lineno">306</tt>  <tt class="py-line">            <tt id="link-283" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-283', 'form', 'link-142');">form</a></tt><tt class="py-op">.</tt><tt id="link-284" class="py-name" targets="Method portality.models.account.Account.name()=portality.models.account.Account-class.html#name,Method portality.models.editors.EditorGroup.name()=portality.models.editors.EditorGroup-class.html#name,Variable portality.view.forms.AuthorForm.name=portality.view.forms.AuthorForm-class.html#name,Variable portality.view.forms.EditorGroupForm.name=portality.view.forms.EditorGroupForm-class.html#name"><a title="portality.models.account.Account.name
portality.models.editors.EditorGroup.name
portality.view.forms.AuthorForm.name
portality.view.forms.EditorGroupForm.name" class="py-name" href="#" onclick="return doclink('link-284', 'name', 'link-284');">name</a></tt><tt class="py-op">.</tt><tt class="py-name">data</tt> <tt class="py-op">=</tt> <tt class="py-name">eg</tt><tt class="py-op">.</tt><tt id="link-285" class="py-name"><a title="portality.models.account.Account.name
portality.models.editors.EditorGroup.name
portality.view.forms.AuthorForm.name
portality.view.forms.EditorGroupForm.name" class="py-name" href="#" onclick="return doclink('link-285', 'name', 'link-284');">name</a></tt> </tt>
<a name="L307"></a><tt class="py-lineno">307</tt>  <tt class="py-line">            <tt id="link-286" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-286', 'form', 'link-142');">form</a></tt><tt class="py-op">.</tt><tt id="link-287" class="py-name" targets="Variable portality.formcontext.forms.Editorial.editor=portality.formcontext.forms.Editorial-class.html#editor,Method portality.models.editors.EditorGroup.editor()=portality.models.editors.EditorGroup-class.html#editor,Method portality.models.journal.JournalLikeObject.editor()=portality.models.journal.JournalLikeObject-class.html#editor,Module portality.view.editor=portality.view.editor-module.html,Variable portality.view.forms.EditorGroupForm.editor=portality.view.forms.EditorGroupForm-class.html#editor"><a title="portality.formcontext.forms.Editorial.editor
portality.models.editors.EditorGroup.editor
portality.models.journal.JournalLikeObject.editor
portality.view.editor
portality.view.forms.EditorGroupForm.editor" class="py-name" href="#" onclick="return doclink('link-287', 'editor', 'link-287');">editor</a></tt><tt class="py-op">.</tt><tt class="py-name">data</tt> <tt class="py-op">=</tt> <tt class="py-name">eg</tt><tt class="py-op">.</tt><tt id="link-288" class="py-name"><a title="portality.formcontext.forms.Editorial.editor
portality.models.editors.EditorGroup.editor
portality.models.journal.JournalLikeObject.editor
portality.view.editor
portality.view.forms.EditorGroupForm.editor" class="py-name" href="#" onclick="return doclink('link-288', 'editor', 'link-287');">editor</a></tt> </tt>
<a name="L308"></a><tt class="py-lineno">308</tt>  <tt class="py-line">            <tt id="link-289" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-289', 'form', 'link-142');">form</a></tt><tt class="py-op">.</tt><tt id="link-290" class="py-name" targets="Method portality.models.editors.EditorGroup.associates()=portality.models.editors.EditorGroup-class.html#associates,Variable portality.view.forms.EditorGroupForm.associates=portality.view.forms.EditorGroupForm-class.html#associates"><a title="portality.models.editors.EditorGroup.associates
portality.view.forms.EditorGroupForm.associates" class="py-name" href="#" onclick="return doclink('link-290', 'associates', 'link-290');">associates</a></tt><tt class="py-op">.</tt><tt class="py-name">data</tt> <tt class="py-op">=</tt> <tt class="py-string">","</tt><tt class="py-op">.</tt><tt class="py-name">join</tt><tt class="py-op">(</tt><tt class="py-name">eg</tt><tt class="py-op">.</tt><tt id="link-291" class="py-name"><a title="portality.models.editors.EditorGroup.associates
portality.view.forms.EditorGroupForm.associates" class="py-name" href="#" onclick="return doclink('link-291', 'associates', 'link-290');">associates</a></tt><tt class="py-op">)</tt> </tt>
<a name="L309"></a><tt class="py-lineno">309</tt>  <tt class="py-line">        <tt class="py-keyword">return</tt> <tt id="link-292" class="py-name"><a title="portality.formcontext.formcontext.AssEdApplicationReview.render_template
portality.formcontext.formcontext.AssEdJournalReview.render_template
portality.formcontext.formcontext.EditorApplicationReview.render_template
portality.formcontext.formcontext.EditorJournalReview.render_template
portality.formcontext.formcontext.FormContext.render_template
portality.formcontext.formcontext.ManEdApplicationReview.render_template
portality.formcontext.formcontext.ManEdJournalReview.render_template
portality.formcontext.formcontext.PublisherCsvReApplication.render_template
portality.formcontext.formcontext.PublisherReApplication.render_template
portality.formcontext.formcontext.ReadOnlyJournal.render_template" class="py-name" href="#" onclick="return doclink('link-292', 'render_template', 'link-2');">render_template</a></tt><tt class="py-op">(</tt><tt class="py-string">"admin/editor_group.html"</tt><tt class="py-op">,</tt> <tt class="py-name">admin_page</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">,</tt> <tt id="link-293" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-293', 'form', 'link-142');">form</a></tt><tt class="py-op">=</tt><tt id="link-294" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-294', 'form', 'link-142');">form</a></tt><tt class="py-op">)</tt> </tt>
<a name="L310"></a><tt class="py-lineno">310</tt>  <tt class="py-line"> </tt>
<a name="L311"></a><tt class="py-lineno">311</tt>  <tt class="py-line">    <tt class="py-keyword">elif</tt> <tt class="py-name">request</tt><tt class="py-op">.</tt><tt class="py-name">method</tt> <tt class="py-op">==</tt> <tt class="py-string">"POST"</tt><tt class="py-op">:</tt> </tt>
<a name="L312"></a><tt class="py-lineno">312</tt>  <tt class="py-line"> </tt>
<a name="L313"></a><tt class="py-lineno">313</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt class="py-name">request</tt><tt class="py-op">.</tt><tt id="link-295" class="py-name"><a title="portality.ordereddict.OrderedDict.values" class="py-name" href="#" onclick="return doclink('link-295', 'values', 'link-38');">values</a></tt><tt class="py-op">.</tt><tt class="py-name">get</tt><tt class="py-op">(</tt><tt class="py-string">"delete"</tt><tt class="py-op">,</tt> <tt class="py-string">"false"</tt><tt class="py-op">)</tt> <tt class="py-op">==</tt> <tt class="py-string">"true"</tt><tt class="py-op">:</tt> </tt>
<a name="L314"></a><tt class="py-lineno">314</tt>  <tt class="py-line">            <tt class="py-comment"># we have been asked to delete the id</tt> </tt>
<a name="L315"></a><tt class="py-lineno">315</tt>  <tt class="py-line">            <tt class="py-keyword">if</tt> <tt id="link-296" class="py-name"><a title="portality.view.forms.EditorGroupForm.group_id" class="py-name" href="#" onclick="return doclink('link-296', 'group_id', 'link-275');">group_id</a></tt> <tt class="py-keyword">is</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L316"></a><tt class="py-lineno">316</tt>  <tt class="py-line">                <tt class="py-comment"># we can only delete things that exist</tt> </tt>
<a name="L317"></a><tt class="py-lineno">317</tt>  <tt class="py-line">                <tt id="link-297" class="py-name"><a title="portality.scripts.sync_doaj_records.abort" class="py-name" href="#" onclick="return doclink('link-297', 'abort', 'link-1');">abort</a></tt><tt class="py-op">(</tt><tt class="py-number">400</tt><tt class="py-op">)</tt> </tt>
<a name="L318"></a><tt class="py-lineno">318</tt>  <tt class="py-line">            <tt class="py-name">eg</tt> <tt class="py-op">=</tt> <tt id="link-298" class="py-name"><a title="portality.models" class="py-name" href="#" onclick="return doclink('link-298', 'models', 'link-11');">models</a></tt><tt class="py-op">.</tt><tt id="link-299" class="py-name"><a title="portality.models.editors.EditorGroup" class="py-name" href="#" onclick="return doclink('link-299', 'EditorGroup', 'link-277');">EditorGroup</a></tt><tt class="py-op">.</tt><tt id="link-300" class="py-name"><a title="portality.dao.DomainObject.pull
portality.models.oaipmh.OAIPMHArticle.pull
portality.models.oaipmh.OAIPMHJournal.pull" class="py-name" href="#" onclick="return doclink('link-300', 'pull', 'link-101');">pull</a></tt><tt class="py-op">(</tt><tt id="link-301" class="py-name"><a title="portality.view.forms.EditorGroupForm.group_id" class="py-name" href="#" onclick="return doclink('link-301', 'group_id', 'link-275');">group_id</a></tt><tt class="py-op">)</tt> </tt>
<a name="L319"></a><tt class="py-lineno">319</tt>  <tt class="py-line">            <tt class="py-keyword">if</tt> <tt class="py-name">eg</tt> <tt class="py-keyword">is</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L320"></a><tt class="py-lineno">320</tt>  <tt class="py-line">                <tt id="link-302" class="py-name"><a title="portality.scripts.sync_doaj_records.abort" class="py-name" href="#" onclick="return doclink('link-302', 'abort', 'link-1');">abort</a></tt><tt class="py-op">(</tt><tt class="py-number">404</tt><tt class="py-op">)</tt> </tt>
<a name="L321"></a><tt class="py-lineno">321</tt>  <tt class="py-line"> </tt>
<a name="L322"></a><tt class="py-lineno">322</tt>  <tt class="py-line">            <tt class="py-name">eg</tt><tt class="py-op">.</tt><tt id="link-303" class="py-name"><a title="portality.api.v1.bulk.applications.ApplicationsBulkApi.delete
portality.api.v1.bulk.articles.ArticlesBulkApi.delete
portality.api.v1.crud.applications.ApplicationsCrudApi.delete
portality.api.v1.crud.articles.ArticlesCrudApi.delete
portality.dao.DomainObject.delete" class="py-name" href="#" onclick="return doclink('link-303', 'delete', 'link-104');">delete</a></tt><tt class="py-op">(</tt><tt class="py-op">)</tt> </tt>
<a name="L323"></a><tt class="py-lineno">323</tt>  <tt class="py-line"> </tt>
<a name="L324"></a><tt class="py-lineno">324</tt>  <tt class="py-line">            <tt class="py-comment"># return a json response</tt> </tt>
<a name="L325"></a><tt class="py-lineno">325</tt>  <tt class="py-line">            <tt class="py-name">resp</tt> <tt class="py-op">=</tt> <tt class="py-name">make_response</tt><tt class="py-op">(</tt><tt id="link-304" class="py-name"><a title="portality.dao.DomainObject.json
portality.lib.dataobj.DataObj.json" class="py-name" href="#" onclick="return doclink('link-304', 'json', 'link-0');">json</a></tt><tt class="py-op">.</tt><tt class="py-name">dumps</tt><tt class="py-op">(</tt><tt class="py-op">{</tt><tt class="py-string">"success"</tt> <tt class="py-op">:</tt> <tt class="py-name">True</tt><tt class="py-op">}</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L326"></a><tt class="py-lineno">326</tt>  <tt class="py-line">            <tt class="py-name">resp</tt><tt class="py-op">.</tt><tt class="py-name">mimetype</tt> <tt class="py-op">=</tt> <tt class="py-string">"application/json"</tt> </tt>
<a name="L327"></a><tt class="py-lineno">327</tt>  <tt class="py-line">            <tt class="py-keyword">return</tt> <tt class="py-name">resp</tt> </tt>
<a name="L328"></a><tt class="py-lineno">328</tt>  <tt class="py-line"> </tt>
<a name="L329"></a><tt class="py-lineno">329</tt>  <tt class="py-line">        <tt class="py-comment"># otherwise, we want to edit the content of the form or the object</tt> </tt>
<a name="L330"></a><tt class="py-lineno">330</tt>  <tt class="py-line">        <tt id="link-305" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-305', 'form', 'link-142');">form</a></tt> <tt class="py-op">=</tt> <tt id="link-306" class="py-name"><a title="portality.view.forms.EditorGroupForm" class="py-name" href="#" onclick="return doclink('link-306', 'EditorGroupForm', 'link-28');">EditorGroupForm</a></tt><tt class="py-op">(</tt><tt class="py-name">request</tt><tt class="py-op">.</tt><tt id="link-307" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-307', 'form', 'link-142');">form</a></tt><tt class="py-op">)</tt> </tt>
<a name="L331"></a><tt class="py-lineno">331</tt>  <tt class="py-line"> </tt>
<a name="L332"></a><tt class="py-lineno">332</tt>  <tt class="py-line">        <tt class="py-keyword">if</tt> <tt id="link-308" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-308', 'form', 'link-142');">form</a></tt><tt class="py-op">.</tt><tt id="link-309" class="py-name"><a title="portality.article.DOAJXWalk.validate
portality.formcontext.formcontext.FormContext.validate
portality.formcontext.formcontext.ManEdJournalReview.validate
portality.formcontext.validate
portality.lib.dataobj.DataObj.validate
portality.lib.dataobj.validate" class="py-name" href="#" onclick="return doclink('link-309', 'validate', 'link-144');">validate</a></tt><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
<a name="L333"></a><tt class="py-lineno">333</tt>  <tt class="py-line">            <tt class="py-comment"># get the group id from the url or from the request parameters</tt> </tt>
<a name="L334"></a><tt class="py-lineno">334</tt>  <tt class="py-line">            <tt class="py-keyword">if</tt> <tt id="link-310" class="py-name"><a title="portality.view.forms.EditorGroupForm.group_id" class="py-name" href="#" onclick="return doclink('link-310', 'group_id', 'link-275');">group_id</a></tt> <tt class="py-keyword">is</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L335"></a><tt class="py-lineno">335</tt>  <tt class="py-line">                <tt id="link-311" class="py-name"><a title="portality.view.forms.EditorGroupForm.group_id" class="py-name" href="#" onclick="return doclink('link-311', 'group_id', 'link-275');">group_id</a></tt> <tt class="py-op">=</tt> <tt class="py-name">request</tt><tt class="py-op">.</tt><tt id="link-312" class="py-name"><a title="portality.ordereddict.OrderedDict.values" class="py-name" href="#" onclick="return doclink('link-312', 'values', 'link-38');">values</a></tt><tt class="py-op">.</tt><tt class="py-name">get</tt><tt class="py-op">(</tt><tt class="py-string">"group_id"</tt><tt class="py-op">)</tt> </tt>
<a name="L336"></a><tt class="py-lineno">336</tt>  <tt class="py-line">                <tt id="link-313" class="py-name"><a title="portality.view.forms.EditorGroupForm.group_id" class="py-name" href="#" onclick="return doclink('link-313', 'group_id', 'link-275');">group_id</a></tt> <tt class="py-op">=</tt> <tt id="link-314" class="py-name"><a title="portality.view.forms.EditorGroupForm.group_id" class="py-name" href="#" onclick="return doclink('link-314', 'group_id', 'link-275');">group_id</a></tt> <tt class="py-keyword">if</tt> <tt id="link-315" class="py-name"><a title="portality.view.forms.EditorGroupForm.group_id" class="py-name" href="#" onclick="return doclink('link-315', 'group_id', 'link-275');">group_id</a></tt> <tt class="py-op">!=</tt> <tt class="py-string">""</tt> <tt class="py-keyword">else</tt> <tt class="py-name">None</tt> </tt>
<a name="L337"></a><tt class="py-lineno">337</tt>  <tt class="py-line"> </tt>
<a name="L338"></a><tt class="py-lineno">338</tt>  <tt class="py-line">            <tt class="py-comment"># if we have a group id, this is an edit, so get the existing group</tt> </tt>
<a name="L339"></a><tt class="py-lineno">339</tt>  <tt class="py-line">            <tt class="py-keyword">if</tt> <tt id="link-316" class="py-name"><a title="portality.view.forms.EditorGroupForm.group_id" class="py-name" href="#" onclick="return doclink('link-316', 'group_id', 'link-275');">group_id</a></tt> <tt class="py-keyword">is</tt> <tt class="py-keyword">not</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L340"></a><tt class="py-lineno">340</tt>  <tt class="py-line">                <tt class="py-name">eg</tt> <tt class="py-op">=</tt> <tt id="link-317" class="py-name"><a title="portality.models" class="py-name" href="#" onclick="return doclink('link-317', 'models', 'link-11');">models</a></tt><tt class="py-op">.</tt><tt id="link-318" class="py-name"><a title="portality.models.editors.EditorGroup" class="py-name" href="#" onclick="return doclink('link-318', 'EditorGroup', 'link-277');">EditorGroup</a></tt><tt class="py-op">.</tt><tt id="link-319" class="py-name"><a title="portality.dao.DomainObject.pull
portality.models.oaipmh.OAIPMHArticle.pull
portality.models.oaipmh.OAIPMHJournal.pull" class="py-name" href="#" onclick="return doclink('link-319', 'pull', 'link-101');">pull</a></tt><tt class="py-op">(</tt><tt id="link-320" class="py-name"><a title="portality.view.forms.EditorGroupForm.group_id" class="py-name" href="#" onclick="return doclink('link-320', 'group_id', 'link-275');">group_id</a></tt><tt class="py-op">)</tt> </tt>
<a name="L341"></a><tt class="py-lineno">341</tt>  <tt class="py-line">                <tt class="py-keyword">if</tt> <tt class="py-name">eg</tt> <tt class="py-keyword">is</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L342"></a><tt class="py-lineno">342</tt>  <tt class="py-line">                    <tt id="link-321" class="py-name"><a title="portality.scripts.sync_doaj_records.abort" class="py-name" href="#" onclick="return doclink('link-321', 'abort', 'link-1');">abort</a></tt><tt class="py-op">(</tt><tt class="py-number">404</tt><tt class="py-op">)</tt> </tt>
<a name="L343"></a><tt class="py-lineno">343</tt>  <tt class="py-line">            <tt class="py-keyword">else</tt><tt class="py-op">:</tt> </tt>
<a name="L344"></a><tt class="py-lineno">344</tt>  <tt class="py-line">                <tt class="py-name">eg</tt> <tt class="py-op">=</tt> <tt id="link-322" class="py-name"><a title="portality.models" class="py-name" href="#" onclick="return doclink('link-322', 'models', 'link-11');">models</a></tt><tt class="py-op">.</tt><tt id="link-323" class="py-name"><a title="portality.models.editors.EditorGroup" class="py-name" href="#" onclick="return doclink('link-323', 'EditorGroup', 'link-277');">EditorGroup</a></tt><tt class="py-op">(</tt><tt class="py-op">)</tt> </tt>
<a name="L345"></a><tt class="py-lineno">345</tt>  <tt class="py-line"> </tt>
<a name="L346"></a><tt class="py-lineno">346</tt>  <tt class="py-line">            <tt id="link-324" class="py-name"><a title="portality.models.editors.EditorGroup.associates
portality.view.forms.EditorGroupForm.associates" class="py-name" href="#" onclick="return doclink('link-324', 'associates', 'link-290');">associates</a></tt> <tt class="py-op">=</tt> <tt id="link-325" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-325', 'form', 'link-142');">form</a></tt><tt class="py-op">.</tt><tt id="link-326" class="py-name"><a title="portality.models.editors.EditorGroup.associates
portality.view.forms.EditorGroupForm.associates" class="py-name" href="#" onclick="return doclink('link-326', 'associates', 'link-290');">associates</a></tt><tt class="py-op">.</tt><tt class="py-name">data</tt> </tt>
<a name="L347"></a><tt class="py-lineno">347</tt>  <tt class="py-line">            <tt class="py-keyword">if</tt> <tt id="link-327" class="py-name"><a title="portality.models.editors.EditorGroup.associates
portality.view.forms.EditorGroupForm.associates" class="py-name" href="#" onclick="return doclink('link-327', 'associates', 'link-290');">associates</a></tt> <tt class="py-keyword">is</tt> <tt class="py-keyword">not</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L348"></a><tt class="py-lineno">348</tt>  <tt class="py-line">                <tt id="link-328" class="py-name"><a title="portality.models.editors.EditorGroup.associates
portality.view.forms.EditorGroupForm.associates" class="py-name" href="#" onclick="return doclink('link-328', 'associates', 'link-290');">associates</a></tt> <tt class="py-op">=</tt> <tt class="py-op">[</tt><tt id="link-329" class="py-name"><a title="portality.journalcsv.Journal2QuestionXwalk.a
portality.reapplication.Suggestion2QuestionXwalk.a" class="py-name" href="#" onclick="return doclink('link-329', 'a', 'link-98');">a</a></tt><tt class="py-op">.</tt><tt class="py-name">strip</tt><tt class="py-op">(</tt><tt class="py-op">)</tt> <tt class="py-keyword">for</tt> <tt id="link-330" class="py-name"><a title="portality.journalcsv.Journal2QuestionXwalk.a
portality.reapplication.Suggestion2QuestionXwalk.a" class="py-name" href="#" onclick="return doclink('link-330', 'a', 'link-98');">a</a></tt> <tt class="py-keyword">in</tt> <tt id="link-331" class="py-name"><a title="portality.models.editors.EditorGroup.associates
portality.view.forms.EditorGroupForm.associates" class="py-name" href="#" onclick="return doclink('link-331', 'associates', 'link-290');">associates</a></tt><tt class="py-op">.</tt><tt class="py-name">split</tt><tt class="py-op">(</tt><tt class="py-string">","</tt><tt class="py-op">)</tt> <tt class="py-keyword">if</tt> <tt id="link-332" class="py-name"><a title="portality.journalcsv.Journal2QuestionXwalk.a
portality.reapplication.Suggestion2QuestionXwalk.a" class="py-name" href="#" onclick="return doclink('link-332', 'a', 'link-98');">a</a></tt><tt class="py-op">.</tt><tt class="py-name">strip</tt><tt class="py-op">(</tt><tt class="py-op">)</tt> <tt class="py-op">!=</tt> <tt class="py-string">""</tt><tt class="py-op">]</tt> </tt>
<a name="L349"></a><tt class="py-lineno">349</tt>  <tt class="py-line"> </tt>
<a name="L350"></a><tt class="py-lineno">350</tt>  <tt class="py-line">            <tt class="py-comment"># prep the user accounts with the correct role(s)</tt> </tt>
<a name="L351"></a><tt class="py-lineno">351</tt>  <tt class="py-line">            <tt class="py-name">ed</tt> <tt class="py-op">=</tt> <tt id="link-333" class="py-name"><a title="portality.models" class="py-name" href="#" onclick="return doclink('link-333', 'models', 'link-11');">models</a></tt><tt class="py-op">.</tt><tt id="link-334" class="py-name" targets="Class portality.models.account.Account=portality.models.account.Account-class.html"><a title="portality.models.account.Account" class="py-name" href="#" onclick="return doclink('link-334', 'Account', 'link-334');">Account</a></tt><tt class="py-op">.</tt><tt id="link-335" class="py-name"><a title="portality.dao.DomainObject.pull
portality.models.oaipmh.OAIPMHArticle.pull
portality.models.oaipmh.OAIPMHJournal.pull" class="py-name" href="#" onclick="return doclink('link-335', 'pull', 'link-101');">pull</a></tt><tt class="py-op">(</tt><tt id="link-336" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-336', 'form', 'link-142');">form</a></tt><tt class="py-op">.</tt><tt id="link-337" class="py-name"><a title="portality.formcontext.forms.Editorial.editor
portality.models.editors.EditorGroup.editor
portality.models.journal.JournalLikeObject.editor
portality.view.editor
portality.view.forms.EditorGroupForm.editor" class="py-name" href="#" onclick="return doclink('link-337', 'editor', 'link-287');">editor</a></tt><tt class="py-op">.</tt><tt class="py-name">data</tt><tt class="py-op">)</tt> </tt>
<a name="L352"></a><tt class="py-lineno">352</tt>  <tt class="py-line">            <tt class="py-name">ed</tt><tt class="py-op">.</tt><tt id="link-338" class="py-name" targets="Method portality.models.account.Account.add_role()=portality.models.account.Account-class.html#add_role"><a title="portality.models.account.Account.add_role" class="py-name" href="#" onclick="return doclink('link-338', 'add_role', 'link-338');">add_role</a></tt><tt class="py-op">(</tt><tt class="py-string">"editor"</tt><tt class="py-op">)</tt> </tt>
<a name="L353"></a><tt class="py-lineno">353</tt>  <tt class="py-line">            <tt class="py-name">ed</tt><tt class="py-op">.</tt><tt id="link-339" class="py-name"><a title="portality.clcsv.ClCsv.save
portality.dao.DomainObject.save
portality.models.article.Article.save
portality.models.history.History.save
portality.models.journal.Journal.save
portality.models.lcc.LCC.save
portality.models.suggestion.Suggestion.save
portality.scripts.prepare_delete_request.save" class="py-name" href="#" onclick="return doclink('link-339', 'save', 'link-166');">save</a></tt><tt class="py-op">(</tt><tt class="py-op">)</tt> </tt>
<a name="L354"></a><tt class="py-lineno">354</tt>  <tt class="py-line">            <tt class="py-keyword">if</tt> <tt id="link-340" class="py-name"><a title="portality.models.editors.EditorGroup.associates
portality.view.forms.EditorGroupForm.associates" class="py-name" href="#" onclick="return doclink('link-340', 'associates', 'link-290');">associates</a></tt> <tt class="py-keyword">is</tt> <tt class="py-keyword">not</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L355"></a><tt class="py-lineno">355</tt>  <tt class="py-line">                <tt class="py-keyword">for</tt> <tt id="link-341" class="py-name"><a title="portality.journalcsv.Journal2QuestionXwalk.a
portality.reapplication.Suggestion2QuestionXwalk.a" class="py-name" href="#" onclick="return doclink('link-341', 'a', 'link-98');">a</a></tt> <tt class="py-keyword">in</tt> <tt id="link-342" class="py-name"><a title="portality.models.editors.EditorGroup.associates
portality.view.forms.EditorGroupForm.associates" class="py-name" href="#" onclick="return doclink('link-342', 'associates', 'link-290');">associates</a></tt><tt class="py-op">:</tt> </tt>
<a name="L356"></a><tt class="py-lineno">356</tt>  <tt class="py-line">                    <tt class="py-name">ae</tt> <tt class="py-op">=</tt> <tt id="link-343" class="py-name"><a title="portality.models" class="py-name" href="#" onclick="return doclink('link-343', 'models', 'link-11');">models</a></tt><tt class="py-op">.</tt><tt id="link-344" class="py-name"><a title="portality.models.account.Account" class="py-name" href="#" onclick="return doclink('link-344', 'Account', 'link-334');">Account</a></tt><tt class="py-op">.</tt><tt id="link-345" class="py-name"><a title="portality.dao.DomainObject.pull
portality.models.oaipmh.OAIPMHArticle.pull
portality.models.oaipmh.OAIPMHJournal.pull" class="py-name" href="#" onclick="return doclink('link-345', 'pull', 'link-101');">pull</a></tt><tt class="py-op">(</tt><tt id="link-346" class="py-name"><a title="portality.journalcsv.Journal2QuestionXwalk.a
portality.reapplication.Suggestion2QuestionXwalk.a" class="py-name" href="#" onclick="return doclink('link-346', 'a', 'link-98');">a</a></tt><tt class="py-op">)</tt> </tt>
<a name="L357"></a><tt class="py-lineno">357</tt>  <tt class="py-line">                    <tt class="py-name">ae</tt><tt class="py-op">.</tt><tt id="link-347" class="py-name"><a title="portality.models.account.Account.add_role" class="py-name" href="#" onclick="return doclink('link-347', 'add_role', 'link-338');">add_role</a></tt><tt class="py-op">(</tt><tt class="py-string">"associate_editor"</tt><tt class="py-op">)</tt> </tt>
<a name="L358"></a><tt class="py-lineno">358</tt>  <tt class="py-line">                    <tt class="py-name">ae</tt><tt class="py-op">.</tt><tt id="link-348" class="py-name"><a title="portality.clcsv.ClCsv.save
portality.dao.DomainObject.save
portality.models.article.Article.save
portality.models.history.History.save
portality.models.journal.Journal.save
portality.models.lcc.LCC.save
portality.models.suggestion.Suggestion.save
portality.scripts.prepare_delete_request.save" class="py-name" href="#" onclick="return doclink('link-348', 'save', 'link-166');">save</a></tt><tt class="py-op">(</tt><tt class="py-op">)</tt> </tt>
<a name="L359"></a><tt class="py-lineno">359</tt>  <tt class="py-line"> </tt>
<a name="L360"></a><tt class="py-lineno">360</tt>  <tt class="py-line">            <tt class="py-name">eg</tt><tt class="py-op">.</tt><tt id="link-349" class="py-name" targets="Method portality.models.account.Account.set_name()=portality.models.account.Account-class.html#set_name,Method portality.models.editors.EditorGroup.set_name()=portality.models.editors.EditorGroup-class.html#set_name"><a title="portality.models.account.Account.set_name
portality.models.editors.EditorGroup.set_name" class="py-name" href="#" onclick="return doclink('link-349', 'set_name', 'link-349');">set_name</a></tt><tt class="py-op">(</tt><tt id="link-350" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-350', 'form', 'link-142');">form</a></tt><tt class="py-op">.</tt><tt id="link-351" class="py-name"><a title="portality.models.account.Account.name
portality.models.editors.EditorGroup.name
portality.view.forms.AuthorForm.name
portality.view.forms.EditorGroupForm.name" class="py-name" href="#" onclick="return doclink('link-351', 'name', 'link-284');">name</a></tt><tt class="py-op">.</tt><tt class="py-name">data</tt><tt class="py-op">)</tt> </tt>
<a name="L361"></a><tt class="py-lineno">361</tt>  <tt class="py-line">            <tt class="py-name">eg</tt><tt class="py-op">.</tt><tt id="link-352" class="py-name" targets="Method portality.models.editors.EditorGroup.set_editor()=portality.models.editors.EditorGroup-class.html#set_editor,Method portality.models.journal.JournalLikeObject.set_editor()=portality.models.journal.JournalLikeObject-class.html#set_editor"><a title="portality.models.editors.EditorGroup.set_editor
portality.models.journal.JournalLikeObject.set_editor" class="py-name" href="#" onclick="return doclink('link-352', 'set_editor', 'link-352');">set_editor</a></tt><tt class="py-op">(</tt><tt id="link-353" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-353', 'form', 'link-142');">form</a></tt><tt class="py-op">.</tt><tt id="link-354" class="py-name"><a title="portality.formcontext.forms.Editorial.editor
portality.models.editors.EditorGroup.editor
portality.models.journal.JournalLikeObject.editor
portality.view.editor
portality.view.forms.EditorGroupForm.editor" class="py-name" href="#" onclick="return doclink('link-354', 'editor', 'link-287');">editor</a></tt><tt class="py-op">.</tt><tt class="py-name">data</tt><tt class="py-op">)</tt> </tt>
<a name="L362"></a><tt class="py-lineno">362</tt>  <tt class="py-line">            <tt class="py-keyword">if</tt> <tt id="link-355" class="py-name"><a title="portality.models.editors.EditorGroup.associates
portality.view.forms.EditorGroupForm.associates" class="py-name" href="#" onclick="return doclink('link-355', 'associates', 'link-290');">associates</a></tt> <tt class="py-keyword">is</tt> <tt class="py-keyword">not</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L363"></a><tt class="py-lineno">363</tt>  <tt class="py-line">                <tt class="py-name">eg</tt><tt class="py-op">.</tt><tt id="link-356" class="py-name" targets="Method portality.models.editors.EditorGroup.set_associates()=portality.models.editors.EditorGroup-class.html#set_associates"><a title="portality.models.editors.EditorGroup.set_associates" class="py-name" href="#" onclick="return doclink('link-356', 'set_associates', 'link-356');">set_associates</a></tt><tt class="py-op">(</tt><tt id="link-357" class="py-name"><a title="portality.models.editors.EditorGroup.associates
portality.view.forms.EditorGroupForm.associates" class="py-name" href="#" onclick="return doclink('link-357', 'associates', 'link-290');">associates</a></tt><tt class="py-op">)</tt> </tt>
<a name="L364"></a><tt class="py-lineno">364</tt>  <tt class="py-line">            <tt class="py-name">eg</tt><tt class="py-op">.</tt><tt id="link-358" class="py-name"><a title="portality.clcsv.ClCsv.save
portality.dao.DomainObject.save
portality.models.article.Article.save
portality.models.history.History.save
portality.models.journal.Journal.save
portality.models.lcc.LCC.save
portality.models.suggestion.Suggestion.save
portality.scripts.prepare_delete_request.save" class="py-name" href="#" onclick="return doclink('link-358', 'save', 'link-166');">save</a></tt><tt class="py-op">(</tt><tt class="py-op">)</tt> </tt>
<a name="L365"></a><tt class="py-lineno">365</tt>  <tt class="py-line"> </tt>
<a name="L366"></a><tt class="py-lineno">366</tt>  <tt class="py-line">            <tt class="py-name">flash</tt><tt class="py-op">(</tt><tt class="py-string">"Group was updated - changes may not be reflected below immediately.  Reload the page to see the update."</tt><tt class="py-op">,</tt> <tt class="py-string">"success"</tt><tt class="py-op">)</tt> </tt>
<a name="L367"></a><tt class="py-lineno">367</tt>  <tt class="py-line">            <tt class="py-keyword">return</tt> <tt id="link-359" class="py-name"><a title="portality.view.account.RedirectForm.redirect" class="py-name" href="#" onclick="return doclink('link-359', 'redirect', 'link-3');">redirect</a></tt><tt class="py-op">(</tt><tt class="py-name">url_for</tt><tt class="py-op">(</tt><tt class="py-string">'admin.editor_group_search'</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L368"></a><tt class="py-lineno">368</tt>  <tt class="py-line">        <tt class="py-keyword">else</tt><tt class="py-op">:</tt> </tt>
<a name="L369"></a><tt class="py-lineno">369</tt>  <tt class="py-line">            <tt class="py-keyword">return</tt> <tt id="link-360" class="py-name"><a title="portality.formcontext.formcontext.AssEdApplicationReview.render_template
portality.formcontext.formcontext.AssEdJournalReview.render_template
portality.formcontext.formcontext.EditorApplicationReview.render_template
portality.formcontext.formcontext.EditorJournalReview.render_template
portality.formcontext.formcontext.FormContext.render_template
portality.formcontext.formcontext.ManEdApplicationReview.render_template
portality.formcontext.formcontext.ManEdJournalReview.render_template
portality.formcontext.formcontext.PublisherCsvReApplication.render_template
portality.formcontext.formcontext.PublisherReApplication.render_template
portality.formcontext.formcontext.ReadOnlyJournal.render_template" class="py-name" href="#" onclick="return doclink('link-360', 'render_template', 'link-2');">render_template</a></tt><tt class="py-op">(</tt><tt class="py-string">"admin/editor_group.html"</tt><tt class="py-op">,</tt> <tt class="py-name">admin_page</tt><tt class="py-op">=</tt><tt class="py-name">True</tt><tt class="py-op">,</tt> <tt id="link-361" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-361', 'form', 'link-142');">form</a></tt><tt class="py-op">=</tt><tt id="link-362" class="py-name"><a title="portality.formcontext.formcontext.FormContext.form
portality.lib.modeldoc.form" class="py-name" href="#" onclick="return doclink('link-362', 'form', 'link-142');">form</a></tt><tt class="py-op">)</tt> </tt>
</div><a name="L370"></a><tt class="py-lineno">370</tt>  <tt class="py-line"> </tt>
<a name="user_autocomplete"></a><div id="user_autocomplete-def"><a name="L371"></a><tt class="py-lineno">371</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">blueprint</tt><tt class="py-op">.</tt><tt class="py-name">route</tt><tt class="py-op">(</tt><tt class="py-string">"/autocomplete/user"</tt><tt class="py-op">)</tt> </tt>
<a name="L372"></a><tt class="py-lineno">372</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">login_required</tt> </tt>
<a name="L373"></a><tt class="py-lineno">373</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">ssl_required</tt> </tt>
<a name="L374"></a><tt class="py-lineno">374</tt> <a class="py-toggle" href="#" id="user_autocomplete-toggle" onclick="return toggle('user_autocomplete');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="portality.view.admin-module.html#user_autocomplete">user_autocomplete</a><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="user_autocomplete-collapsed" style="display:none;" pad="+++" indent="++++"></div><div id="user_autocomplete-expanded"><a name="L375"></a><tt class="py-lineno">375</tt>  <tt class="py-line">    <tt id="link-363" class="py-name" targets="Class Method portality.journalcsv.Journal2QuestionXwalk.q()=portality.journalcsv.Journal2QuestionXwalk-class.html#q,Class Method portality.reapplication.Suggestion2QuestionXwalk.q()=portality.reapplication.Suggestion2QuestionXwalk-class.html#q"><a title="portality.journalcsv.Journal2QuestionXwalk.q
portality.reapplication.Suggestion2QuestionXwalk.q" class="py-name" href="#" onclick="return doclink('link-363', 'q', 'link-363');">q</a></tt> <tt class="py-op">=</tt> <tt class="py-name">request</tt><tt class="py-op">.</tt><tt id="link-364" class="py-name"><a title="portality.ordereddict.OrderedDict.values" class="py-name" href="#" onclick="return doclink('link-364', 'values', 'link-38');">values</a></tt><tt class="py-op">.</tt><tt class="py-name">get</tt><tt class="py-op">(</tt><tt class="py-string">"q"</tt><tt class="py-op">)</tt> </tt>
<a name="L376"></a><tt class="py-lineno">376</tt>  <tt class="py-line">    <tt id="link-365" class="py-name" targets="Variable portality.view.account.RegisterForm.s=portality.view.account.RegisterForm-class.html#s"><a title="portality.view.account.RegisterForm.s" class="py-name" href="#" onclick="return doclink('link-365', 's', 'link-365');">s</a></tt> <tt class="py-op">=</tt> <tt class="py-name">request</tt><tt class="py-op">.</tt><tt id="link-366" class="py-name"><a title="portality.ordereddict.OrderedDict.values" class="py-name" href="#" onclick="return doclink('link-366', 'values', 'link-38');">values</a></tt><tt class="py-op">.</tt><tt class="py-name">get</tt><tt class="py-op">(</tt><tt class="py-string">"s"</tt><tt class="py-op">,</tt> <tt class="py-number">10</tt><tt class="py-op">)</tt> </tt>
<a name="L377"></a><tt class="py-lineno">377</tt>  <tt class="py-line">    <tt class="py-name">ac</tt> <tt class="py-op">=</tt> <tt id="link-367" class="py-name"><a title="portality.models" class="py-name" href="#" onclick="return doclink('link-367', 'models', 'link-11');">models</a></tt><tt class="py-op">.</tt><tt id="link-368" class="py-name"><a title="portality.models.account.Account" class="py-name" href="#" onclick="return doclink('link-368', 'Account', 'link-334');">Account</a></tt><tt class="py-op">.</tt><tt id="link-369" class="py-name" targets="Class Method portality.dao.DomainObject.autocomplete()=portality.dao.DomainObject-class.html#autocomplete,Function portality.view.doaj.autocomplete()=portality.view.doaj-module.html#autocomplete"><a title="portality.dao.DomainObject.autocomplete
portality.view.doaj.autocomplete" class="py-name" href="#" onclick="return doclink('link-369', 'autocomplete', 'link-369');">autocomplete</a></tt><tt class="py-op">(</tt><tt class="py-string">"id"</tt><tt class="py-op">,</tt> <tt id="link-370" class="py-name"><a title="portality.journalcsv.Journal2QuestionXwalk.q
portality.reapplication.Suggestion2QuestionXwalk.q" class="py-name" href="#" onclick="return doclink('link-370', 'q', 'link-363');">q</a></tt><tt class="py-op">,</tt> <tt class="py-name">size</tt><tt class="py-op">=</tt><tt id="link-371" class="py-name"><a title="portality.view.account.RegisterForm.s" class="py-name" href="#" onclick="return doclink('link-371', 's', 'link-365');">s</a></tt><tt class="py-op">)</tt> </tt>
<a name="L378"></a><tt class="py-lineno">378</tt>  <tt class="py-line"> </tt>
<a name="L379"></a><tt class="py-lineno">379</tt>  <tt class="py-line">    <tt class="py-comment"># return a json response</tt> </tt>
<a name="L380"></a><tt class="py-lineno">380</tt>  <tt class="py-line">    <tt class="py-name">resp</tt> <tt class="py-op">=</tt> <tt class="py-name">make_response</tt><tt class="py-op">(</tt><tt id="link-372" class="py-name"><a title="portality.dao.DomainObject.json
portality.lib.dataobj.DataObj.json" class="py-name" href="#" onclick="return doclink('link-372', 'json', 'link-0');">json</a></tt><tt class="py-op">.</tt><tt class="py-name">dumps</tt><tt class="py-op">(</tt><tt class="py-name">ac</tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L381"></a><tt class="py-lineno">381</tt>  <tt class="py-line">    <tt class="py-name">resp</tt><tt class="py-op">.</tt><tt class="py-name">mimetype</tt> <tt class="py-op">=</tt> <tt class="py-string">"application/json"</tt> </tt>
<a name="L382"></a><tt class="py-lineno">382</tt>  <tt class="py-line">    <tt class="py-keyword">return</tt> <tt class="py-name">resp</tt> </tt>
</div><a name="L383"></a><tt class="py-lineno">383</tt>  <tt class="py-line"> </tt>
<a name="eg_associates_dropdown"></a><div id="eg_associates_dropdown-def"><a name="L384"></a><tt class="py-lineno">384</tt>  <tt class="py-line"> </tt>
<a name="L385"></a><tt class="py-lineno">385</tt>  <tt class="py-line"><tt class="py-comment"># Route which returns the associate editor account names within a given editor group</tt> </tt>
<a name="L386"></a><tt class="py-lineno">386</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">blueprint</tt><tt class="py-op">.</tt><tt class="py-name">route</tt><tt class="py-op">(</tt><tt class="py-string">"/dropdown/eg_associates"</tt><tt class="py-op">)</tt> </tt>
<a name="L387"></a><tt class="py-lineno">387</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">login_required</tt> </tt>
<a name="L388"></a><tt class="py-lineno">388</tt>  <tt class="py-line"><tt class="py-decorator">@</tt><tt class="py-decorator">ssl_required</tt> </tt>
<a name="L389"></a><tt class="py-lineno">389</tt> <a class="py-toggle" href="#" id="eg_associates_dropdown-toggle" onclick="return toggle('eg_associates_dropdown');">-</a><tt class="py-line"><tt class="py-keyword">def</tt> <a class="py-def-name" href="portality.view.admin-module.html#eg_associates_dropdown">eg_associates_dropdown</a><tt class="py-op">(</tt><tt class="py-op">)</tt><tt class="py-op">:</tt> </tt>
</div><div id="eg_associates_dropdown-collapsed" style="display:none;" pad="+++" indent="++++"></div><div id="eg_associates_dropdown-expanded"><a name="L390"></a><tt class="py-lineno">390</tt>  <tt class="py-line">    <tt class="py-name">egn</tt> <tt class="py-op">=</tt> <tt class="py-name">request</tt><tt class="py-op">.</tt><tt id="link-373" class="py-name"><a title="portality.ordereddict.OrderedDict.values" class="py-name" href="#" onclick="return doclink('link-373', 'values', 'link-38');">values</a></tt><tt class="py-op">.</tt><tt class="py-name">get</tt><tt class="py-op">(</tt><tt class="py-string">"egn"</tt><tt class="py-op">)</tt> </tt>
<a name="L391"></a><tt class="py-lineno">391</tt>  <tt class="py-line">    <tt class="py-name">eg</tt> <tt class="py-op">=</tt> <tt id="link-374" class="py-name"><a title="portality.models" class="py-name" href="#" onclick="return doclink('link-374', 'models', 'link-11');">models</a></tt><tt class="py-op">.</tt><tt id="link-375" class="py-name"><a title="portality.models.editors.EditorGroup" class="py-name" href="#" onclick="return doclink('link-375', 'EditorGroup', 'link-277');">EditorGroup</a></tt><tt class="py-op">.</tt><tt id="link-376" class="py-name" targets="Class Method portality.dao.DomainObject.pull_by_key()=portality.dao.DomainObject-class.html#pull_by_key"><a title="portality.dao.DomainObject.pull_by_key" class="py-name" href="#" onclick="return doclink('link-376', 'pull_by_key', 'link-376');">pull_by_key</a></tt><tt class="py-op">(</tt><tt class="py-string">"name"</tt><tt class="py-op">,</tt> <tt class="py-name">egn</tt><tt class="py-op">)</tt> </tt>
<a name="L392"></a><tt class="py-lineno">392</tt>  <tt class="py-line"> </tt>
<a name="L393"></a><tt class="py-lineno">393</tt>  <tt class="py-line">    <tt class="py-keyword">if</tt> <tt class="py-name">eg</tt> <tt class="py-keyword">is</tt> <tt class="py-keyword">not</tt> <tt class="py-name">None</tt><tt class="py-op">:</tt> </tt>
<a name="L394"></a><tt class="py-lineno">394</tt>  <tt class="py-line">        <tt id="link-377" class="py-name" targets="Module portality.models.editors=portality.models.editors-module.html"><a title="portality.models.editors" class="py-name" href="#" onclick="return doclink('link-377', 'editors', 'link-377');">editors</a></tt> <tt class="py-op">=</tt> <tt class="py-op">[</tt><tt class="py-name">eg</tt><tt class="py-op">.</tt><tt id="link-378" class="py-name"><a title="portality.formcontext.forms.Editorial.editor
portality.models.editors.EditorGroup.editor
portality.models.journal.JournalLikeObject.editor
portality.view.editor
portality.view.forms.EditorGroupForm.editor" class="py-name" href="#" onclick="return doclink('link-378', 'editor', 'link-287');">editor</a></tt><tt class="py-op">]</tt> </tt>
<a name="L395"></a><tt class="py-lineno">395</tt>  <tt class="py-line">        <tt id="link-379" class="py-name"><a title="portality.models.editors" class="py-name" href="#" onclick="return doclink('link-379', 'editors', 'link-377');">editors</a></tt> <tt class="py-op">+=</tt> <tt class="py-name">eg</tt><tt class="py-op">.</tt><tt id="link-380" class="py-name"><a title="portality.models.editors.EditorGroup.associates
portality.view.forms.EditorGroupForm.associates" class="py-name" href="#" onclick="return doclink('link-380', 'associates', 'link-290');">associates</a></tt> </tt>
<a name="L396"></a><tt class="py-lineno">396</tt>  <tt class="py-line">        <tt id="link-381" class="py-name"><a title="portality.models.editors" class="py-name" href="#" onclick="return doclink('link-381', 'editors', 'link-377');">editors</a></tt> <tt class="py-op">=</tt> <tt class="py-name">list</tt><tt class="py-op">(</tt><tt class="py-name">set</tt><tt class="py-op">(</tt><tt id="link-382" class="py-name"><a title="portality.models.editors" class="py-name" href="#" onclick="return doclink('link-382', 'editors', 'link-377');">editors</a></tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L397"></a><tt class="py-lineno">397</tt>  <tt class="py-line">    <tt class="py-keyword">else</tt><tt class="py-op">:</tt> </tt>
<a name="L398"></a><tt class="py-lineno">398</tt>  <tt class="py-line">        <tt id="link-383" class="py-name"><a title="portality.models.editors" class="py-name" href="#" onclick="return doclink('link-383', 'editors', 'link-377');">editors</a></tt> <tt class="py-op">=</tt> <tt class="py-name">None</tt> </tt>
<a name="L399"></a><tt class="py-lineno">399</tt>  <tt class="py-line"> </tt>
<a name="L400"></a><tt class="py-lineno">400</tt>  <tt class="py-line">    <tt class="py-comment"># return a json response</tt> </tt>
<a name="L401"></a><tt class="py-lineno">401</tt>  <tt class="py-line">    <tt class="py-name">resp</tt> <tt class="py-op">=</tt> <tt class="py-name">make_response</tt><tt class="py-op">(</tt><tt id="link-384" class="py-name"><a title="portality.dao.DomainObject.json
portality.lib.dataobj.DataObj.json" class="py-name" href="#" onclick="return doclink('link-384', 'json', 'link-0');">json</a></tt><tt class="py-op">.</tt><tt class="py-name">dumps</tt><tt class="py-op">(</tt><tt id="link-385" class="py-name"><a title="portality.models.editors" class="py-name" href="#" onclick="return doclink('link-385', 'editors', 'link-377');">editors</a></tt><tt class="py-op">)</tt><tt class="py-op">)</tt> </tt>
<a name="L402"></a><tt class="py-lineno">402</tt>  <tt class="py-line">    <tt class="py-name">resp</tt><tt class="py-op">.</tt><tt class="py-name">mimetype</tt> <tt class="py-op">=</tt> <tt class="py-string">"application/json"</tt> </tt>
<a name="L403"></a><tt class="py-lineno">403</tt>  <tt class="py-line">    <tt class="py-keyword">return</tt> <tt class="py-name">resp</tt> </tt>
</div><a name="L404"></a><tt class="py-lineno">404</tt>  <tt class="py-line"> </tt><script type="text/javascript">
<!--
expandto(location.href);
// -->
</script>
</pre>
<br />
<!-- ==================== NAVIGATION BAR ==================== -->
<table class="navbar" border="0" width="100%" cellpadding="0"
       bgcolor="#a0c0ff" cellspacing="0">
  <tr valign="middle">
  <!-- Home link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="portality-module.html">Home</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Tree link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="module-tree.html">Trees</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Index link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="identifier-index.html">Indices</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Help link -->
      <th>&nbsp;&nbsp;&nbsp;<a
        href="help.html">Help</a>&nbsp;&nbsp;&nbsp;</th>

  <!-- Project homepage -->
      <th class="navbar" align="right" width="100%">
        <table border="0" cellpadding="0" cellspacing="0">
          <tr><th class="navbar" align="center"
            ><a class="navbar" target="_top" href="https://github.com/DOAJ/doaj">DOAJ</a></th>
          </tr></table></th>
  </tr>
</table>
<table border="0" cellpadding="0" cellspacing="0" width="100%%">
  <tr>
    <td align="left" class="footer">
    Generated by Epydoc 3.0.1 on Tue Apr 19 14:14:06 2016
    </td>
    <td align="right" class="footer">
      <a target="mainFrame" href="http://epydoc.sourceforge.net"
        >http://epydoc.sourceforge.net</a>
    </td>
  </tr>
</table>

<script type="text/javascript">
  <!--
  // Private objects are initially displayed (because if
  // javascript is turned off then we want them to be
  // visible); but by default, we want to hide them.  So hide
  // them unless we have a cookie that says to show them.
  checkCookie();
  // -->
</script>
</body>
</html>
