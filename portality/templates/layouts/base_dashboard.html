{% extends "layouts/base.html" %}

{% block base_content %}
<body class="dashboard {% block body_class %}{% endblock %}" data-spy="scroll" data-offset="70">

  {# global site note #}
  {% if config.get("SITE_NOTE_ACTIVE", False) and not request.cookies.get(config.get("SITE_NOTE_KEY")) %}
  {% include config.get("SITE_NOTE_TEMPLATE") %}
  {% endif %}

  <header>
    {% include "includes/_flash_notification.html" %}

    <h2 class="sr-only">DOAJ Dashboard</h2>

    <nav class="primary-nav flex-space-between" id="primary-nav">
      <a href="{{ url_for('doaj.dashboard') }}" class="logo">
        {% include "includes/svg/doaj-icon.svg" %}
      </a>
      <ul class="inlined-list flex-center">
        <li class="dropdown">
          <span class="dropdown__trigger tag tag--secondary" role="button" aria-haspopup="true" aria-expanded="false">
            <span class="sr-only">Notifications</span>
            <span data-feather="bell" aria-hidden="true"></span>
          </span>
          <ul class="dropdown__menu">
            {# TODO display last 10 event notifications here #}
            <li>
              <a href="#" class="dropdown__link">
                <span>@fsoldati tagged you in <i>Internationale Zeitschrift für Kulturkomparatistik</i></span>
                <time datetime="2021-07-17">2 hours ago</time>
              </a>
            </li>
            <li>
              <a href="#" class="dropdown__link">
                <span>@fsoldati tagged you in <i>Internationale Zeitschrift für Kulturkomparatistik</i></span>
                <time datetime="2021-07-17">2 hours ago</time>
              </a>
            </li>
            <li>
              <a href="#" class="dropdown__link">
                <span>@fsoldati tagged you in <i>Internationale Zeitschrift für Kulturkomparatistik</i></span>
                <time datetime="2021-07-17">2 hours ago</time>
              </a>
            </li>
          </ul>
        </li>
        <li>
          <a href="{{ url_for('account.username', username=current_user.id) }}" class="tag tag--secondary">
            <span class="sr-only">Profile</span>
            <span data-feather="smile" aria-hidden="true"></span>
          </a>
        </li>
      </ul>
    </nav>

    <nav class="secondary-nav">
      {# TODO display correct identification data here #}
      <dl>
        <dt>
          Managing Editor of&nbsp;&nbsp;
        </dt>
        <dd>
          <ul class="inlined-list tags">
            {# TODO find a better way to link to predefined queries #}
            <li class="tag tag--secondary">
              <a href="{{ url_for('admin.index') }}?source=%7B%22query%22%3A%7B%22bool%22%3A%7B%22must%22%3A%5B%7B%22term%22%3A%7B%22admin.editor_group.exact%22%3A%22German1%22%7D%7D%5D%7D%7D%2C%22track_total_hits%22%3Atrue%7D">GERMAN 1</a>
            </li>
            <li class="tag tag--secondary">
              <a href="{{ url_for('admin.index') }}?source=%7B%22query%22%3A%7B%22bool%22%3A%7B%22must%22%3A%5B%7B%22term%22%3A%7B%22admin.editor_group.exact%22%3A%22Italian1%22%7D%7D%5D%7D%7D%2C%22track_total_hits%22%3Atrue%7D">ITALIAN 1</a>
            </li>
            <li class="tag tag--secondary">
              <a href="{{ url_for('admin.index') }}?source=%7B%22query%22%3A%7B%22bool%22%3A%7B%22must%22%3A%5B%7B%22term%22%3A%7B%22admin.editor_group.exact%22%3A%22Polish1%22%7D%7D%5D%7D%7D%2C%22track_total_hits%22%3Atrue%7D">POLISH 1</a>
            </li>
          </ul>
        </dd>
        &nbsp;/&nbsp;&nbsp;
        <dt>
          Username&nbsp;&nbsp;
        </dt>
        <dd>
          <a href="{{ url_for('account.username', username=current_user.id) }}" class="tag">{{ current_user.id }}</a>
        </dd>
      </dl>
    </nav>

    {% block extra_header %}{% endblock %}
  </header>

  {% include 'admin/nav.html' %}

  {% block main_panel %}
  {% block content %}{% endblock %}
  {% endblock %}

  {% include '_js_includes.html' %}

  {% block extra_js_bottom %}{% endblock extra_js_bottom %}

  {% if not request.cookies.get("doaj-consent") %}
  <script type="text/javascript">
  jQuery(document).ready(function() {
    $(".cookie-consent #cookie-consent-hide").on("click", setCookieConsent);
    $(".site-note-dismiss").on("click", dissmissSiteNote);
  });
  </script>
  {% endif %}

</body>
{% endblock %}
