<script type="text/javascript" src="/portality/static/vendor/parsley-2.9.2/parsley.min.js?v={{config.get('DOAJ_VERSION')}}"></script>
<script type="text/javascript" src="/portality/static/vendor/edges/src/edges.js?v={{config.get('DOAJ_VERSION')}}"></script>
<script type="text/javascript" src="/portality/static/js/formulaic.js?v={{config.get('DOAJ_VERSION')}}"></script>
<script type="text/javascript">
    jQuery(document).ready(function($) {
        formulaic.active = formulaic.newFormulaic({
            formSelector: "#{{ form_id }}",
            functions : {{ formulaic_context.javascript_functions|tojson }},
            doValidation : {% if js_validation %}true{% else %}false{% endif %},
            autoSave: {{ auto_save }},
            fieldsets : {{ formulaic_context.ui_settings|tojson }}
        });
});

    let fields = document.getElementsByClassName("form__question");
    for (let f of fields) {
        let dependant = document.getElementById(f.getAttribute("dependant_field")+"__container")
        if (dependant) {
            console.log(dependant);
            let inputs = document.getElementsByName(f.getAttribute("id").replace("__container", ""))
            for (let i = 0; i < inputs.length; i++){
                inputs[i].addEventListener("click", function (e) {
                    if (inputs[i].checked) {
                        if (inputs[i].value === f.getAttribute("dependant_value")){
                            console.log("show")
                            dependant.style.display = '';
                        }
                        else {
                            console.log("hide")
                            dependant.style.display = 'none';
                        }
                    }
                })
            }
            }
    }

            {#element.addEventListener("click", function (e) {#}
            {#    console.log(this);#}



</script>