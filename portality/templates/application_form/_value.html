{% macro value(x, field_name, formulaic_context) %}
    {% if x == None or x == "" or x == [] %}
        <em>[Nothing]</em>
    {% elif x is string and x.startswith("http") %}
        <a href="{{ x }}" target="_blank" rel="noopener" style="word-break: break-all">{{ x }}</a>
    {% elif x == "y" %}
        Yes
    {% elif x == "n" %}
        No
    {% elif field_name == "language" %}
        {{ formulaic_context.language_name_from_language(x) }}
    {% elif field_name == "publisher_country" or field_name == "institution_country" %}
        {{ formulaic_context.country_name_from_code(x) }}
    {% else %}
        {{ x }}
    {% endif %}
{% endmacro %}