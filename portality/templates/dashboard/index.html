{% extends "layouts/dashboard_base.html" %}
{# ~~Dashboard:Page~~ #}
{% set TODOS = {
        constants.TODO_MANED_STALLED: {
            "text" : "<strong>Stalled</strong> <span class='todo-list__status'>+8 wks inactive</span>",
            "colour" : "var(--salmon)",
            "feather": "coffee"
        },
        constants.TODO_MANED_FOLLOW_UP_OLD: {
            "text": "<strong>Old</strong> <span class='todo-list__status'>+10 wks old</span>",
            "colour" : "var(--sanguine)",
            "feather": "clock"
        },
        constants.TODO_MANED_READY: {
            "text" : "<strong>Ready</strong>",
            "colour" : "var(--dark-green)",
            "feather": "check-circle",
            "link" : url_for('admin.suggestions') + "?source=" + search_query_source(term=[{"admin.application_status.exact":"ready"}])
        },
        constants.TODO_MANED_COMPLETED: {
            "text" : "<strong>Completed</strong> <span class='todo-list__status'>+2 wks updated</span>",
            "colour" : "var(--mid-green)",
            "feather": "user-check",
            "link" : url_for('admin.suggestions') + "?source=" + search_query_source(term=[{"admin.application_status.exact":"completed"}])
        },
        constants.TODO_MANED_ASSIGN_PENDING: {
            "text" : "<strong>Pending</strong> <span class='todo-list__status'>+2 wks submitted</span>",
            "colour" : "var(--yellow)",
            "feather": "inbox",
            "link" : url_for('admin.suggestions') + "?source=" + search_query_source(term=[{"admin.application_status.exact":"pending"}])
        }
    }
%}

{% block content %}
  <section>
    {% if todos|length == 0 %}
    <div class="flex-center">
      <p class="card col-md-6">
        <span class="type-03">ðŸŽ‰ You have no priority tasks to complete!<br/><br/>
        Keep an eye on the <a href="{{ url_for('admin.suggestions') }}">ongoing applications</a> to make sure there are no processing delays.</span>
      </p>
    </div>
    {% else %}
    <h2 class="type-04">
      You have <strong>{{ todos|length }}{% if todos|length >= config.get("TODO_LIST_SIZE")%}+{% endif %}</strong> applications in your priority list:
    </h2>
    {% endif %}
    <ol class="todo-list">
      {% for todo in todos %}
      {# TODO only show tasks for this userâ€™s groups #}
      {# TODO integrated priority in list display
      {{ todo.boost }}
       #}
       {% set action = TODOS[todo.action_id[0]] %}
       {% set app_url =  url_for('admin.application', application_id=todo.object_id) %}
       {% if loop.index <= 12 %}
        {% include "includes/_todo_item.html" %}
       {% endif %}
      {% endfor %}
    </ol>
    {% if todos|length > 12 %}
      <p class="card card--compact" role="button" data-toggle="collapse" data-target="#todo-more" aria-expanded="false">
        <strong class="flex-center type-03">
          See more items <span data-feather="plus" aria-hidden="true"></span>
        </strong>
      </p>
      <div id="todo-more" class="collapse" aria-expanded="false">
        <ol class="todo-list">
          {% for todo in todos %}
            {% set action = TODOS[todo.action_id[0]] %}
            {% set app_url =  url_for('admin.application', application_id=todo.object_id) %}
            {% if loop.index > 12 %}
              {% include "includes/_todo_item.html" %}
            {% endif %}
          {% endfor %}
        </ol>
      </div>
    {% endif %}
  </section>

  {# TODO get activity data as part of E7 and E8
  <section>
    <h2 class="label">Activity</h2>

    <div class="tabs">
      <nav role="tablist" aria-label="Activity by team">
        <button role="tab" aria-selected="true" aria-controls="panel-1" id="tab-1" tabindex="0" class="tag tag--secondary">
          German 1
        </button>
        <button role="tab" aria-selected="false" aria-controls="panel-2" id="tab-2" tabindex="-1" class="tag tag--secondary">
          Italian 1
        </button>
        <button role="tab" aria-selected="false" aria-controls="panel-3" id="tab-3" tabindex="-1" class="tag tag--secondary">
          Polish 1
        </button>
      </nav>

      <article id="panel-1" role="tabpanel" tabindex="0" aria-labelledby="tab-1" class="card">
        <h3>
          German 1â€™s ongoing applications
          <a href="#" class="tag tag--secondary">29 <span class="sr-only">applications</span></a>
        </h3>

        <h4 class="label label--tertiary">By associate editor</h4>
        <ul class="inlined-list type-06">
          <li>
            <a href="#" class="label tag">ilaria <em>(you)</em></a>
            <a href="#" class="tag tag--secondary">4 <span class="sr-only">applications</span></a>
          </li>
          <li>
            <a href="#" class="label tag">galimberti</a>
            <a href="#" class="tag tag--secondary">12 <span class="sr-only">applications</span></a>
          </li>
          <li>
            <a href="#" class="label tag">sricetto</a>
            <a href="#" class="tag tag--secondary">9 <span class="sr-only">applications</span></a>
          </li>
          <li>
            <a href="#" class="label tag">fsoldati</a>
            <a href="#" class="tag tag--secondary">2 <span class="sr-only">applications</span></a>
          </li>
          <li>
            <a href="#" class="label tag tag--featured">unassigned</a>
            <a href="#" class="tag tag--secondary">5 <span class="sr-only">applications</span></a>
          </li>
        </ul>

        <hr/>

        <h4 class="label label--tertiary">By status</h4>
        <ul class="inlined-list progress-bar">
          <li>
            <a href="#">
              <span>Pending <span>8</span></span>
              <span></span>
            </a>
          </li>
          <li>
            <a href="#">
              <span>In progress <span>4</span></span>
              <span></span>
            </a>
          </li>
          <li>
            <a href="#">
              <span>Completed <span>1</span></span>
              <span></span>
            </a>
          </li>
          <li>
            <a href="#">
              <span>Ready <span>9</span></span>
              <span></span>
            </a>
          </li>
        </ul>
      </article>

      <article id="panel-2" role="tabpanel" tabindex="0" aria-labelledby="tab-2" hidden>

      </article>
nxnxxxxxc
      <article id="panel-3" role="tabpanel" tabindex="0" aria-labelledby="tab-3" hidden>

      </article>
    </div>

  </section>
  #}
{% endblock %}
