{% extends "layouts/dashboard_base.html" %}
{# ~~Dashboard:Page~~ #}
{% set TODOS = {
        constants.TODO_MANED_STALLED: "Chase <strong>stalled</strong> application",
        constants.TODO_MANED_FOLLOW_UP_OLD: "Follow up with <strong>old<strong> application",
        constants.TODO_MANED_READY: "Make a decision on <strong>ready<strong> application",
        constants.TODO_MANED_COMPLETED: "Review <strong>completed<strong> application",
        constants.TODO_MANED_ASSIGN_PENDING: "Assign <strong>pending<strong> application"
    }
        %}

{% block content %}
    <main>

        <h1>Hi, {{ current_user.name }}!</h1>

        <section>
            <h2 class="label">Here are your priorities:</h2>
            <ol class="unstyled-list">
                {% for todo in todos %}
                    {# TODO only show tasks for this userâ€™s groups #}
                    {# TODO integrated priority in list display
      {{ todo.boost }}
       #}
                    <li class="card card--compact">
                        <article class="row">
                            <time datetime="{{ todo.date.strftime('%Y-%m-%d') }}" class="col-xs-1 label label--secondary font-mono">{{ todo.date.strftime('%d %b %Y') }}</time>
                            <div class="col-xs-11 flex-space-between">
                                <header>
                                    <p class="label label--secondary">{{ TODOS[todo.action_id[0]] | safe }}</p>
                                    <h3>
                                        <a href="{{ url_for('admin.application', application_id=todo.object_id) }}">{{ todo.title }}</a>
                                    </h3>
                                </header>
                                <dl class="no-margins flex-end-col">
                                    <dt class="sr-only">Team</dt>
                                    <dd><a href="#" class="tag">{{ todo.object.editor_group }}</a></dd>
                                </dl>
                            </div>
                        </article>
                    </li>
                {% endfor %}
            </ol>
            {# TODO to be displayed once we implement page listing out all tasks
    <footer class="card card--compact flex-center">
      <a href="#">See all tasks</a>
    </footer>
    #}
        </section>

        <section>
            <h2 class="label">Activity</h2>

            <div class="tabs">
                <nav role="tablist" aria-label="Activity by team">
                    {% for eg in maned_of %}
                        <button role="tab" aria-selected="false" aria-controls="group-tab" id="group-tab-{{ eg.id }}" tabindex="0" class="tag tag--secondary">
                            <a href="#" class="js-group-tab" data-group-id="{{ eg.id }}">{{ eg.name }}</a>
                        </button>
                    {% endfor %}
                </nav>
                <article id="group-tab" role="tabpanel" tabindex="0" aria-labelledby="" class="card">Select a group</article>
            </div>

        </section>

    </main>
{% endblock %}

{% block extra_js_bottom %}
<script type="text/javascript" src="/static/js/dashboard.js?v={{config.get('DOAJ_VERSION')}}"></script>
<script type="text/javascript">
    doaj.dashboard.init()
</script>
{% endblock %}
